!function(){var t,e={3986:function(t,e,n){"use strict";var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]),e.Z=o},9313:function(t,e,n){"use strict";var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]),e.Z=o},2396:function(t,e,n){"use strict";var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]),e.Z=o},5642:function(t,e,n){"use strict";var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]),e.Z=o},6006:function(t,e,n){"use strict";var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]),e.Z=o},9334:function(t,e,n){"use strict";var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]),e.Z=o},4558:function(t,e,n){"use strict";var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]),e.Z=o},31:function(t,e,n){"use strict";var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]),e.Z=o},874:function(t,e,n){"use strict";var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]),e.Z=o},5779:function(t,e,n){"use strict";var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]),e.Z=o},6026:function(t,e,n){"use strict";var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]),e.Z=o},627:function(t,e,n){"use strict";var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]),e.Z=o},6317:function(t,e,n){"use strict";var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]),e.Z=o},3334:function(t,e,n){"use strict";var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]),e.Z=o},4188:function(t,e,n){"use strict";var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]),e.Z=o},7200:function(t,e,n){"use strict";var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]),e.Z=o},7694:function(t,e,n){"use strict";var r,o,i,s=n(655),c=n(3913),l=n(94);class a extends l.c{transformDelta(t,e){return e.type.startsWith("key")?{x:0,y:0}:t}}a.pluginName="disableKeyboard";class f extends l.c{transformDelta(t,e){return e.type.match(/wheel/)&&e.ctrlKey?{x:0,y:0}:t}}f.pluginName="preventZoomScrolling";class $ extends l.c{constructor(){super(...arguments),this._remainMomentum={x:0,y:0}}transformDelta(t){const{limit:e,offset:n}=this.scrollbar,r=this._remainMomentum.x+t.x,o=this._remainMomentum.y+t.y;return this.scrollbar.setMomentum(Math.max(-n.x,Math.min(r,e.x-n.x)),Math.max(-n.y,Math.min(o,e.y-n.y))),{x:0,y:0}}onRender(t){Object.assign(this._remainMomentum,t)}}$.pluginName="edgeEasing";class p extends l.c{constructor(){super(...arguments),r.set(this,void 0),o.set(this,void 0),i.set(this,(t=>{const{offset:e,limit:n}=this.scrollbar,{top:i,right:l,bottom:a,left:f}=this.scrollbar.bounding,$=t.detail.pointerX,p=t.detail.pointerY;let u=0,d=0,g=0,h=0;this.scrollbar.options.alwaysShowTracks&&(g=(0,s.Q_)(this,o,"f"),h=(0,s.Q_)(this,r,"f")),$>=l-g?u=10:$<=f&&(u=-10),p>=a-h?d=10:p<=i&&(d=-10),this.scrollbar.setMomentum((0,c.Z)(e.x+u,0,n.x)-e.x,(0,c.Z)(e.y+d,0,n.y)-e.y)}))}onInit(){this.scrollbar.containerEl.addEventListener("pan-move",(0,s.Q_)(this,i,"f"))}onUpdate(){(0,s.YH)(this,o,this.scrollbar.track.yAxis.element.clientWidth,"f"),(0,s.YH)(this,r,this.scrollbar.track.xAxis.element.clientHeight,"f")}onDestroy(){this.scrollbar.containerEl.removeEventListener("pan-move",(0,s.Q_)(this,i,"f"))}}r=new WeakMap,o=new WeakMap,i=new WeakMap,p.pluginName="pannable",l.Z.use(a,f,p,$);var u=n(4234),d=n(5517),g=n(5317),h=n(9877),m=n(9798),v=n(4561),y=n(2334),w=n(1941);function I(t){let e,n;return e=new w.Z({props:{target:"#modal",$$slots:{default:[L]},$$scope:{ctx:t}}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,n){const r={};35&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function x(t){let e;const n=t[2].default,r=(0,u.nuO)(n,t,t[5],null);return{c(){r&&r.c()},l(t){r&&r.l(t)},m(t,n){r&&r.m(t,n),e=!0},p(t,o){r&&r.p&&(!e||32&o)&&(0,u.kmG)(r,n,t,t[5],e?(0,u.u2N)(n,t[5],o,null):(0,u.VOJ)(t[5]),null)},i(t){e||((0,u.Ui)(r,t),e=!0)},o(t){(0,u.etI)(r,t),e=!1},d(t){r&&r.d(t)}}}function L(t){let e,n,r;const o=[t[1]];function i(e){t[3](e)}let s={$$slots:{default:[x]},$$scope:{ctx:t}};for(let t=0;t<o.length;t+=1)s=(0,u.f0i)(s,o[t]);return void 0!==t[0]&&(s.open=t[0]),e=new m.ZP({props:s}),u.VnY.push((()=>(0,u.akz)(e,"open",i))),e.$on("MDCDialog:closed",t[4]),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,n){(0,u.yef)(e,t,n),r=!0},p(t,r){const i=2&r?(0,u.LoY)(o,[(0,u.gCg)(t[1])]):{};32&r&&(i.$$scope={dirty:r,ctx:t}),!n&&1&r&&(n=!0,i.open=t[0],(0,u.hjT)((()=>n=!1))),e.$set(i)},i(t){r||((0,u.Ui)(e.$$.fragment,t),r=!0)},o(t){(0,u.etI)(e.$$.fragment,t),r=!1},d(t){(0,u.vpE)(e,t)}}}function b(t){let e,n,r=t[0]&&I(t);return{c(){r&&r.c(),e=(0,u.cSb)()},l(t){r&&r.l(t),e=(0,u.cSb)()},m(t,o){r&&r.m(t,o),(0,u.ZMF)(t,e,o),n=!0},p(t,[n]){t[0]?r?(r.p(t,n),1&n&&(0,u.Ui)(r,1)):(r=I(t),r.c(),(0,u.Ui)(r,1),r.m(e.parentNode,e)):r&&((0,u.dvw)(),(0,u.etI)(r,1,1,(()=>{r=null})),(0,u.gbL)())},i(t){n||((0,u.Ui)(r),n=!0)},o(t){(0,u.etI)(r),n=!1},d(t){r&&r.d(t),t&&(0,u.ogt)(e)}}}function E(t,e,n){const r=["open"];let o=(0,u.q2N)(e,r),{$$slots:i={},$$scope:s}=e,{open:c}=e;return t.$$set=t=>{e=(0,u.f0i)((0,u.f0i)({},e),(0,u.Jvk)(t)),n(1,o=(0,u.q2N)(e,r)),"open"in t&&n(0,c=t.open),"$$scope"in t&&n(5,s=t.$$scope)},[c,o,i,function(t){c=t,n(0,c)},function(e){u.cKT.call(this,t,e)},s]}class Y extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,E,b,u.AqN,{open:0})}}var z,T=Y,F=n(8),Z=n.n(F);function U(t){switch(t){case z.PNG:return"png";case z.JPEG:return"jpg";case z.WEBP:return"webp";case z.TGA:return"tga";case z.AS_IS:return"{as_is}";default:return"unknown"}}!function(t){t.PNG="image/png",t.JPEG="image/jpeg",t.WEBP="image/webp",t.TGA="image/targa",t.AS_IS="<as_is>"}(z||(z={}));const B=[96,96,2],D=String.fromCharCode(255)+String.fromCharCode(224);function O(t){return atob(t.split(",")[1])}function j(t,e=0){return(t.charCodeAt(e)<<8)+t.charCodeAt(e+1)}class M{constructor(t,e,n,r,o){this.canvas=t,this.filename=e,this.filetype=n,this.exif=r,this.tgaMeta=o,this.width=t.width,this.height=t.height,this.fixExif()}static fromFile(t){return(0,s.mG)(this,void 0,void 0,(function*(){const e=document.createElement("canvas");if(t.type===z.TGA){const{decodeTga:e}=yield n.e(216).then(n.bind(n,9541)),r=yield e(new Uint8Array(yield t.arrayBuffer())),o=new ImageData(new Uint8ClampedArray(r.image.data),r.image.width,r.image.height);return M.fromImageData(o,t.name,t.type,void 0,r.details)}const r=document.createElement("img"),o=URL.createObjectURL(t);let i;return t.type===z.JPEG&&(i=yield function(t){return(0,s.mG)(this,void 0,void 0,(function*(){const e=new FileReader;return new Promise(((n,r)=>{e.onload=()=>{const t=e.result,r=Z().load(t),o=r["0th"];if(!o[F.ImageIFD.XResolution]||!o[F.ImageIFD.YResolution]){const[e,n,r]=function(t){const e=O(t);if("JFIF"!==e.slice(6,10))return B;const n=e.charCodeAt(13)+1,r=j(e,14),o=j(e,16);return r&&o?[r,o,n]:B}(t);o[F.ImageIFD.XResolution]=[e,1],o[F.ImageIFD.YResolution]=[n,1],o[F.ImageIFD.ResolutionUnit]=r}n(r)},e.onerror=r,e.readAsDataURL(t)}))}))}(t)),new Promise(((n,s)=>{r.onload=()=>{const o=e.getContext("2d");e.width=r.naturalWidth,e.height=r.naturalHeight,o.drawImage(r,0,0,r.naturalWidth,r.naturalHeight),URL.revokeObjectURL(r.src),n(new M(e,t.name,t.type,i))},r.onerror=t=>{URL.revokeObjectURL(r.src),s(t)},r.src=o}))}))}static fromImageData(t,e,n,r,o){const i=document.createElement("canvas"),s=i.getContext("2d");return i.width=t.width,i.height=t.height,s.putImageData(t,0,0),new M(i,e,n,r,o)}toBlob(t){return(0,s.mG)(this,void 0,void 0,(function*(){const e=t||this.filetype;if(e===z.TGA){const{encodeTga:t}=yield n.e(216).then(n.bind(n,9541)),r=this.getImageData(),o={};this.tgaMeta&&(o.bitDepth=this.tgaMeta.header.bitDepth,o.imageId=this.tgaMeta.imageId,o.imageType=this.tgaMeta.header.imageType,o.origin=this.tgaMeta.header.origin,o.screenOrigin=this.tgaMeta.header.screenOrigin);const i=yield t({width:r.width,height:r.height,data:new Uint8Array(r.data.buffer)},o);return new Blob([new Uint8Array(i.data)],{type:e})}if(e!==z.JPEG||!this.exif)return function(t,e){return(0,s.mG)(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{t.toBlob((t=>{t?n(t):r(new Error("Unable to convert canvas to blob."))}),e)}))}))}(this.canvas,e);const r=Z().dump(this.exif),o=O(Z().insert(r,this.canvas.toDataURL(e,1))),i=Uint8Array.from(function(t){const e=t.indexOf(D);if(-1===e)return t;const n=e+2,r=n+j(t,n);return t.slice(0,e)+t.slice(r)}(o),(t=>t.charCodeAt(0)));return new Blob([i],{type:e})}))}getImageData(){return this.canvas.getContext("2d").getImageData(0,0,this.width,this.height)}rename(t){return new M(this.canvas,t,this.filetype,this.exif,this.tgaMeta)}changeFiletype(t){if(t===this.filetype||t===z.AS_IS)return this;const e=this.filename.replace(/\.[^/.]+$/,""),n=U(t);return new M(this.canvas,`${e}.${n}`,t,this.exif,this.tgaMeta)}fixExif(){this.exif&&(this.exif["0th"][F.ImageIFD.ImageWidth]=this.exif["1st"][F.ImageIFD.ImageWidth]=this.exif.Exif[F.ExifIFD.PixelXDimension]=this.width,this.exif["0th"][F.ImageIFD.ImageLength]=this.exif["1st"][F.ImageIFD.ImageLength]=this.exif.Exif[F.ExifIFD.PixelYDimension]=this.height,this.exif["0th"][F.ImageIFD.Orientation]=1)}}var C,G,S=n(5369);class q extends((0,S.WV)({x:0,y:0})){formRectWith(t){return new V({x1:this.x,y1:this.y,x2:t.x,y2:t.y})}clone(){return new q(this.toObject())}}class V extends((0,S.WV)({x1:0,y1:0,x2:0,y2:0})){get left(){return this.x1}get top(){return this.y1}get right(){return this.x2}get bottom(){return this.y2}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}get x1y1(){return new q({x:this.x1,y:this.y1})}get x2y2(){return new q({x:this.x2,y:this.y2})}clone(){return new V(this.toObject())}}!function(t){t.PEG_HOLE="PEG_HOLE",t.FRAME="FRAME"}(C||(C={})),function(t){t.OPEN_IMAGES="OPEN_IMAGES",t.SELECT_REF_IMAGE="SELECT_REF_IMAGE",t.SET_ROI="SET_ROI",t.SET_PIVOT="SET_PIVOT",t.RUN_CV="RUN_CV"}(G||(G={}));const P={[G.OPEN_IMAGES]:"原画を開く",[G.SELECT_REF_IMAGE]:"基準画像選択",[G.SET_ROI]:"対象領域設定",[G.SET_PIVOT]:"基準位置設定",[G.RUN_CV]:"OpenCV 処理"},_=(0,S.aV)([G.OPEN_IMAGES,G.SELECT_REF_IMAGE,G.SET_ROI,G.SET_PIVOT,G.RUN_CV]);var N,W,X,A,k,R,H,Q,J,K,tt,et,nt=n(8261);N=new WeakMap,W=new WeakMap,X=new WeakMap;class rt{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}function ot(t){return t?new Worker(t):new Worker(new URL(n.p+n.u(696),n.b))}k=new WeakMap,R=new WeakMap,H=new WeakMap,A=new WeakSet,Q=function(){return(0,s.mG)(this,void 0,void 0,(function*(){try{yield(0,s.Q_)(this,A,"m",J).call(this,"ping"),(0,s.Q_)(this,R,"f").resolve(null)}catch(t){(0,s.Q_)(this,R,"f").reject(t)}}))},J=function(t,e){return(0,s.mG)(this,void 0,void 0,(function*(){const n=(0,s.Q_)(this,k,"f").map((n=>(0,s.Q_)(this,A,"m",K).call(this,n,t,e)));return Promise.all(n)}))},K=function(t,e,n,r){return(0,s.mG)(this,void 0,void 0,(function*(){const o=new rt,i=(0,s.Q_)(this,A,"m",tt).call(this,t,e,n,r,(({data:t})=>{t.error?o.reject(new Error(t.error)):o.resolve(t.result),i()}));return o.promise}))},tt=function(t,e,n,r,o){var i;const c=(0,s.Q_)(this,H,"f");function l(t){t.data.respondTo===e&&t.data.id===c&&(null==o||o(t))}return(0,s.YH)(this,H,(i=(0,s.Q_)(this,H,"f"),++i),"f"),t.addEventListener("message",l),t.postMessage({request:e,id:c,body:n},r||[]),()=>t.removeEventListener("message",l)},et=function(t){return{width:t.width,height:t.height,buffer:t.data.buffer}};const it=(0,nt.fZ)(!1),st=(0,nt.fZ)((0,S.aV)()),ct=(0,nt.fZ)((0,S.aV)()),lt=(0,nt.fZ)(0),at=(0,nt.nK)([st,lt],(([t,e])=>t.get(e))),ft=(0,nt.nK)([ct,lt],(([t,e])=>t.get(e))),$t=(0,nt.fZ)(localStorage.getItem("keyframe-refiner-detect-mode")||C.PEG_HOLE),pt=(0,nt.fZ)(localStorage.getItem("keyframe-refiner-filename-template")||"{filename}_out"),ut=(0,nt.fZ)(localStorage.getItem("keyframe-refiner-output-mime")||z.AS_IS);$t.subscribe((t=>{localStorage.setItem("keyframe-refiner-detect-mode",t)})),pt.subscribe((t=>{localStorage.setItem("keyframe-refiner-filename-template",t)})),ut.subscribe((t=>{localStorage.setItem("keyframe-refiner-output-mime",t)}));const dt=(0,nt.fZ)(!1),gt=(0,nt.fZ)(),ht=(0,nt.fZ)(new q),mt=(0,nt.fZ)(new V),vt=new class{constructor(t,e=t.first()){N.set(this,void 0),W.set(this,void 0),X.set(this,void 0),this.allSteps=(0,nt.fZ)(t),this.currentStep=(0,nt.fZ)(e),this.currentIndex=(0,nt.fZ)(0),(0,s.YH)(this,W,(0,nt.U2)(this.allSteps),"f"),(0,s.YH)(this,N,(0,nt.U2)(this.currentStep),"f"),(0,s.YH)(this,X,(0,nt.U2)(this.currentIndex),"f"),this.currentStep.subscribe((t=>{const e=(0,s.Q_)(this,W,"f").indexOf(t);if(-1===e)throw new Error(`${t} is not found in ${(0,s.Q_)(this,W,"f").toString()}`);(0,s.YH)(this,N,t,"f"),this.currentIndex.set(e)})),this.allSteps.subscribe((t=>{if(0===t.size)throw new Error("all-step list is empty");(0,s.YH)(this,W,t,"f"),this.currentIndex.set(0)})),this.currentIndex.subscribe((t=>{const e=(0,s.Q_)(this,W,"f").get(t);if(void 0===e)throw new Error(`step index ${t} does not exist on ${(0,s.Q_)(this,W,"f").toString()}`);(0,s.YH)(this,X,t,"f"),this.currentStep.set(e)}))}forward(){(0,s.Q_)(this,X,"f")!==(0,s.Q_)(this,W,"f").size-1&&this.currentIndex.update((t=>t+1))}backward(){0!==(0,s.Q_)(this,X,"f")&&this.currentIndex.update((t=>t-1))}reset(){this.currentIndex.set(0)}activated(t){const e=(0,s.Q_)(this,W,"f").indexOf(t);return-1!==e&&e<=(0,s.Q_)(this,X,"f")}hasFinished(t){const e=(0,s.Q_)(this,W,"f").indexOf(t);return-1!==e&&e<(0,s.Q_)(this,X,"f")}}(_),yt=(0,nt.fZ)(new class{constructor(t,e=!1,n=navigator.hardwareConcurrency||4){A.add(this),k.set(this,void 0),R.set(this,new rt),this.ready=(0,s.Q_)(this,R,"f").promise,H.set(this,0),(0,s.YH)(this,k,[],"f");for(let e=0;e<n;e++){const n=ot(t);(0,s.Q_)(this,k,"f").push(n),n.onerror=t=>{alert(`Worker ${e} error: ${t.message}`)}}(0,s.Q_)(this,A,"m",Q).call(this).then((()=>this.setDebugMode(e)))}setDebugMode(t){return(0,s.mG)(this,void 0,void 0,(function*(){return(0,s.Q_)(this,A,"m",J).call(this,"set-debug",{debug:t})}))}requestPivot(t,e,n){return(0,s.mG)(this,void 0,void 0,(function*(){const r=e.getImageData(),{pivot:o}=yield(0,s.Q_)(this,A,"m",K).call(this,(0,s.Q_)(this,k,"f")[0],"request-pivot",{mode:t,image:{width:r.width,height:r.height,buffer:r.data.buffer},ROI:{x:n.x1,y:n.y1,width:n.width,height:n.height}},[r.data.buffer]);return new q({x:o.x,y:o.y})}))}requestProcessing(t,e,n,r,o,i,c){return(0,s.mG)(this,void 0,void 0,(function*(){yield(0,s.Q_)(this,A,"m",J).call(this,"set-configs",{configs:{mode:t,fitFrame:e,refImage:(0,s.Q_)(this,A,"m",et).call(this,r.getImageData()),ROI:{x:o.x1,y:o.y1,width:o.width,height:o.height},pivot:{x:i.x,y:i.y}}});const l=new rt,a=n.length;let f=0,$=0;const p=t=>(0,s.mG)(this,void 0,void 0,(function*(){if(f>=a)return;const e=f;f++;const r=(0,s.Q_)(this,A,"m",et).call(this,n[e].getImageData());let o;try{const{image:i}=yield(0,s.Q_)(this,A,"m",K).call(this,t,"request-processing",{image:r,filename:n[e].filename},[r.buffer]),{filename:c,filetype:l,exif:a}=n[e],f=new ImageData(new Uint8ClampedArray(i.buffer),i.width,i.height);o=M.fromImageData(f,c,l,a)}catch(t){console.error("[main]",t),o=t}$++,c(e,o,$/a),$===a?l.resolve(null):f<a&&p(t)}));return(0,s.Q_)(this,k,"f").forEach(p),l.promise.then((()=>{(0,s.Q_)(this,A,"m",J).call(this,"clean")})),l.promise}))}}),wt=(0,nt.fZ)(!1),It=(0,nt.fZ)(!1),xt=(0,nt.fZ)(!1),Lt=(0,nt.fZ)(!1),bt=(0,nt.fZ)(!1);var Et=n(3379),Yt=n.n(Et),zt=n(5779);function Tt(t,e,n){const r=t.slice();return r[18]=e[n],r}function Ft(t,e,n){const r=t.slice();return r[18]=e[n],r}function Zt(t){let e;return{c(){e=(0,u.fLW)("重複ファイル")},l(t){e=(0,u.Bno)(t,"重複ファイル")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Ut(t){let e,n,r=t[18].name+"";return{c(){e=(0,u.bGB)("li"),n=(0,u.fLW)(r)},l(t){e=(0,u.vT0)(t,"LI",{});var o=(0,u.pIy)(e);n=(0,u.Bno)(o,r),o.forEach(u.ogt)},m(t,r){(0,u.ZMF)(t,e,r),(0,u.ztY)(e,n)},p(t,e){16&e&&r!==(r=t[18].name+"")&&(0,u.rTO)(n,r)},d(t){t&&(0,u.ogt)(e)}}}function Bt(t){let e,n,r,o,i=t[4],s=[];for(let e=0;e<i.length;e+=1)s[e]=Ut(Ft(t,i,e));return{c(){e=(0,u.bGB)("p"),n=(0,u.fLW)("以下のファイルがすでに追加されています。"),r=(0,u.DhX)(),o=(0,u.bGB)("ul");for(let t=0;t<s.length;t+=1)s[t].c()},l(t){e=(0,u.vT0)(t,"P",{});var i=(0,u.pIy)(e);n=(0,u.Bno)(i,"以下のファイルがすでに追加されています。"),i.forEach(u.ogt),r=(0,u.qzd)(t),o=(0,u.vT0)(t,"UL",{});var c=(0,u.pIy)(o);for(let t=0;t<s.length;t+=1)s[t].l(c);c.forEach(u.ogt)},m(t,i){(0,u.ZMF)(t,e,i),(0,u.ztY)(e,n),(0,u.ZMF)(t,r,i),(0,u.ZMF)(t,o,i);for(let t=0;t<s.length;t+=1)s[t].m(o,null)},p(t,e){if(16&e){let n;for(i=t[4],n=0;n<i.length;n+=1){const r=Ft(t,i,n);s[n]?s[n].p(r,e):(s[n]=Ut(r),s[n].c(),s[n].m(o,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=i.length}},d(t){t&&(0,u.ogt)(e),t&&(0,u.ogt)(r),t&&(0,u.ogt)(o),(0,u.RMB)(s,t)}}}function Dt(t){let e;return{c(){e=(0,u.fLW)("閉じる")},l(t){e=(0,u.Bno)(t,"閉じる")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Ot(t){let e,n;return e=new y.ZP({props:{$$slots:{default:[Dt]},$$scope:{ctx:t}}}),e.$on("click",t[8]),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,n){const r={};8388608&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function jt(t){let e,n,r,o,i,s;return e=new m.Dx({props:{$$slots:{default:[Zt]},$$scope:{ctx:t}}}),r=new m.VY({props:{$$slots:{default:[Bt]},$$scope:{ctx:t}}}),i=new m.eX({props:{$$slots:{default:[Ot]},$$scope:{ctx:t}}}),{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.DhX)(),(0,u.YCL)(r.$$.fragment),o=(0,u.DhX)(),(0,u.YCL)(i.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.qzd)(t),(0,u.wOw)(r.$$.fragment,t),o=(0,u.qzd)(t),(0,u.wOw)(i.$$.fragment,t)},m(t,c){(0,u.yef)(e,t,c),(0,u.ZMF)(t,n,c),(0,u.yef)(r,t,c),(0,u.ZMF)(t,o,c),(0,u.yef)(i,t,c),s=!0},p(t,n){const o={};8388608&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const s={};8388624&n&&(s.$$scope={dirty:n,ctx:t}),r.$set(s);const c={};8388609&n&&(c.$$scope={dirty:n,ctx:t}),i.$set(c)},i(t){s||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(r.$$.fragment,t),(0,u.Ui)(i.$$.fragment,t),s=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(r.$$.fragment,t),(0,u.etI)(i.$$.fragment,t),s=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n),(0,u.vpE)(r,t),t&&(0,u.ogt)(o),(0,u.vpE)(i,t)}}}function Mt(t){let e;return{c(){e=(0,u.fLW)("非サポートファイル")},l(t){e=(0,u.Bno)(t,"非サポートファイル")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Ct(t){let e,n,r=t[18].name+"";return{c(){e=(0,u.bGB)("li"),n=(0,u.fLW)(r)},l(t){e=(0,u.vT0)(t,"LI",{});var o=(0,u.pIy)(e);n=(0,u.Bno)(o,r),o.forEach(u.ogt)},m(t,r){(0,u.ZMF)(t,e,r),(0,u.ztY)(e,n)},p(t,e){32&e&&r!==(r=t[18].name+"")&&(0,u.rTO)(n,r)},d(t){t&&(0,u.ogt)(e)}}}function Gt(t){let e,n,r,o,i=t[5],s=[];for(let e=0;e<i.length;e+=1)s[e]=Ct(Tt(t,i,e));return{c(){e=(0,u.bGB)("p"),n=(0,u.fLW)("以下のファイル形式はサポートされていません。"),r=(0,u.DhX)(),o=(0,u.bGB)("ul");for(let t=0;t<s.length;t+=1)s[t].c()},l(t){e=(0,u.vT0)(t,"P",{});var i=(0,u.pIy)(e);n=(0,u.Bno)(i,"以下のファイル形式はサポートされていません。"),i.forEach(u.ogt),r=(0,u.qzd)(t),o=(0,u.vT0)(t,"UL",{});var c=(0,u.pIy)(o);for(let t=0;t<s.length;t+=1)s[t].l(c);c.forEach(u.ogt)},m(t,i){(0,u.ZMF)(t,e,i),(0,u.ztY)(e,n),(0,u.ZMF)(t,r,i),(0,u.ZMF)(t,o,i);for(let t=0;t<s.length;t+=1)s[t].m(o,null)},p(t,e){if(32&e){let n;for(i=t[5],n=0;n<i.length;n+=1){const r=Tt(t,i,n);s[n]?s[n].p(r,e):(s[n]=Ct(r),s[n].c(),s[n].m(o,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=i.length}},d(t){t&&(0,u.ogt)(e),t&&(0,u.ogt)(r),t&&(0,u.ogt)(o),(0,u.RMB)(s,t)}}}function St(t){let e;return{c(){e=(0,u.fLW)("閉じる")},l(t){e=(0,u.Bno)(t,"閉じる")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function qt(t){let e,n;return e=new y.ZP({props:{$$slots:{default:[St]},$$scope:{ctx:t}}}),e.$on("click",t[11]),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,n){const r={};8388608&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function Vt(t){let e,n,r,o,i,s;return e=new m.Dx({props:{$$slots:{default:[Mt]},$$scope:{ctx:t}}}),r=new m.VY({props:{$$slots:{default:[Gt]},$$scope:{ctx:t}}}),i=new m.eX({props:{$$slots:{default:[qt]},$$scope:{ctx:t}}}),{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.DhX)(),(0,u.YCL)(r.$$.fragment),o=(0,u.DhX)(),(0,u.YCL)(i.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.qzd)(t),(0,u.wOw)(r.$$.fragment,t),o=(0,u.qzd)(t),(0,u.wOw)(i.$$.fragment,t)},m(t,c){(0,u.yef)(e,t,c),(0,u.ZMF)(t,n,c),(0,u.yef)(r,t,c),(0,u.ZMF)(t,o,c),(0,u.yef)(i,t,c),s=!0},p(t,n){const o={};8388608&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const s={};8388640&n&&(s.$$scope={dirty:n,ctx:t}),r.$set(s);const c={};8388610&n&&(c.$$scope={dirty:n,ctx:t}),i.$set(c)},i(t){s||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(r.$$.fragment,t),(0,u.Ui)(i.$$.fragment,t),s=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(r.$$.fragment,t),(0,u.etI)(i.$$.fragment,t),s=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n),(0,u.vpE)(r,t),t&&(0,u.ogt)(o),(0,u.vpE)(i,t)}}}function Pt(t){let e,n;return e=new w.Z({props:{target:"#image-viewer",$$slots:{default:[_t]},$$scope:{ctx:t}}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,n){const r={};8388616&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function _t(t){let e,n;return e=new v.Z({props:{class:"upload-progress",progress:t[3]}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,n){const r={};8&n&&(r.progress=t[3]),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function Nt(t){let e,n,r,o,i,s,c,l;function a(e){t[9](e)}let f={$$slots:{default:[jt]},$$scope:{ctx:t}};function $(e){t[12](e)}void 0!==t[0]&&(f.open=t[0]),e=new T({props:f}),u.VnY.push((()=>(0,u.akz)(e,"open",a))),e.$on("closed",t[10]);let p={$$slots:{default:[Vt]},$$scope:{ctx:t}};void 0!==t[1]&&(p.open=t[1]),o=new T({props:p}),u.VnY.push((()=>(0,u.akz)(o,"open",$))),o.$on("closed",t[13]);let d=t[2]&&Pt(t);return{c(){(0,u.YCL)(e.$$.fragment),r=(0,u.DhX)(),(0,u.YCL)(o.$$.fragment),s=(0,u.DhX)(),d&&d.c(),c=(0,u.cSb)()},l(t){(0,u.wOw)(e.$$.fragment,t),r=(0,u.qzd)(t),(0,u.wOw)(o.$$.fragment,t),s=(0,u.qzd)(t),d&&d.l(t),c=(0,u.cSb)()},m(t,n){(0,u.yef)(e,t,n),(0,u.ZMF)(t,r,n),(0,u.yef)(o,t,n),(0,u.ZMF)(t,s,n),d&&d.m(t,n),(0,u.ZMF)(t,c,n),l=!0},p(t,[r]){const s={};8388625&r&&(s.$$scope={dirty:r,ctx:t}),!n&&1&r&&(n=!0,s.open=t[0],(0,u.hjT)((()=>n=!1))),e.$set(s);const l={};8388642&r&&(l.$$scope={dirty:r,ctx:t}),!i&&2&r&&(i=!0,l.open=t[1],(0,u.hjT)((()=>i=!1))),o.$set(l),t[2]?d?(d.p(t,r),4&r&&(0,u.Ui)(d,1)):(d=Pt(t),d.c(),(0,u.Ui)(d,1),d.m(c.parentNode,c)):d&&((0,u.dvw)(),(0,u.etI)(d,1,1,(()=>{d=null})),(0,u.gbL)())},i(t){l||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(o.$$.fragment,t),(0,u.Ui)(d),l=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(o.$$.fragment,t),(0,u.etI)(d),l=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(r),(0,u.vpE)(o,t),t&&(0,u.ogt)(s),d&&d.d(t),t&&(0,u.ogt)(c)}}}function Wt(t,e,n){let r,o;(0,u.FIv)(t,st,(t=>n(14,r=t)));const{currentStep:i}=vt;(0,u.FIv)(t,i,(t=>n(15,o=t)));let c=!1,l=!1,a=!1,f=0,$=[],p=[];return[c,l,a,f,$,p,i,function(t){return(0,s.mG)(this,void 0,void 0,(function*(){n(2,a=!0),n(3,f=0);const e=function(t){const e=[],r=[];for(const n of t)n.type.startsWith("image/")?e.push(n):r.push(n);return 0!==r.length&&(n(5,p=r),n(1,l=!0)),e}(function(t){const e=[],o=[],i={};for(const t of r)i[t.filename]=!0;for(const n of t)i[n.name]?o.push(n):e.push(n);return 0!==o.length&&(n(4,$=o),n(0,c=!0)),e}(t)),i=e.length,s=e.map(M.fromFile);for(let t=0;t<i;t++)(0,u.fxP)(st,r=r.push(yield s[t]),r),n(3,f=(t+1)/i);n(2,a=!1),o===G.OPEN_IMAGES&&0!==r.size&&vt.forward()}))},()=>{n(0,c=!1)},function(t){c=t,n(0,c)},()=>{n(4,$.length=0,$)},()=>{n(1,l=!1)},function(t){l=t,n(1,l)},()=>{n(5,p.length=0,p)}]}Yt()(zt.Z,{insert:"head",singleton:!1}),zt.Z.locals;class Xt extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,Wt,Nt,u.AqN,{uploadFiles:7})}get uploadFiles(){return this.$$.ctx[7]}}var At=Xt,kt=n(2396);function Rt(t){let e,n;return{c(){e=(0,u.bGB)("div"),n=(0,u.fLW)("ファイルをドロップしてアップロード"),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0});var r=(0,u.pIy)(e);n=(0,u.Bno)(r,"ファイルをドロップしてアップロード"),r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","svelte-jdw6x0")},m(t,r){(0,u.ZMF)(t,e,r),(0,u.ztY)(e,n)},d(t){t&&(0,u.ogt)(e)}}}function Ht(t){let e,n,r,o,i,s;e=new At({props:{}}),t[6](e);let c=t[1]&&Rt();return{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.DhX)(),c&&c.c(),r=(0,u.cSb)()},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.qzd)(t),c&&c.l(t),r=(0,u.cSb)()},m(l,a){(0,u.yef)(e,l,a),(0,u.ZMF)(l,n,a),c&&c.m(l,a),(0,u.ZMF)(l,r,a),o=!0,i||(s=[(0,u.oLt)(window,"dragover",(0,u.AT7)(t[3])),(0,u.oLt)(window,"drop",(0,u.AT7)(t[2])),(0,u.oLt)(window,"dragenter",t[4]),(0,u.oLt)(window,"dragleave",t[5])],i=!0)},p(t,[n]){e.$set({}),t[1]?c||(c=Rt(),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null)},i(t){o||((0,u.Ui)(e.$$.fragment,t),o=!0)},o(t){(0,u.etI)(e.$$.fragment,t),o=!1},d(o){t[6](null),(0,u.vpE)(e,o),o&&(0,u.ogt)(n),c&&c.d(o),o&&(0,u.ogt)(r),i=!1,(0,u.j7q)(s)}}}function Qt(t,e,n){let r,o=0;return[r,o,function(t){var e;n(1,o=0),(null===(e=t.dataTransfer)||void 0===e?void 0:e.files.length)&&r.uploadFiles(Array.from(t.dataTransfer.files))},function(e){u.cKT.call(this,t,e)},()=>{n(1,o++,o)},()=>{n(1,o--,o)},function(t){u.VnY[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}Yt()(kt.Z,{insert:"head",singleton:!1}),kt.Z.locals;class Jt extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,Qt,Ht,u.AqN,{})}}var Kt=Jt,te=n(3439),ee=n(1043),ne=n(31);function re(t){let e;return{c(){e=(0,u.bi5)("path"),this.h()},l(t){e=(0,u.Evd)(t,"path",{fill:!0,d:!0}),(0,u.pIy)(e).forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"fill","currentColor"),(0,u.Ljt)(e,"d",t[0])},m(t,n){(0,u.ZMF)(t,e,n)},p(t,n){1&n&&(0,u.Ljt)(e,"d",t[0])},d(t){t&&(0,u.ogt)(e)}}}function oe(t){let e,n,r;n=new ee.J({props:{component:te.Z,viewBox:"0 0 24 24",$$slots:{default:[re]},$$scope:{ctx:t}}});let o=[{class:"icon"},t[1]],i={};for(let t=0;t<o.length;t+=1)i=(0,u.f0i)(i,o[t]);return{c(){e=(0,u.bGB)("span"),(0,u.YCL)(n.$$.fragment),this.h()},l(t){e=(0,u.vT0)(t,"SPAN",{class:!0});var r=(0,u.pIy)(e);(0,u.wOw)(n.$$.fragment,r),r.forEach(u.ogt),this.h()},h(){(0,u.UF7)(e,i),(0,u.VHj)(e,"svelte-18x3mqx",!0)},m(t,o){(0,u.ZMF)(t,e,o),(0,u.yef)(n,e,null),r=!0},p(t,[r]){const s={};5&r&&(s.$$scope={dirty:r,ctx:t}),n.$set(s),(0,u.UF7)(e,i=(0,u.LoY)(o,[{class:"icon"},2&r&&t[1]])),(0,u.VHj)(e,"svelte-18x3mqx",!0)},i(t){r||((0,u.Ui)(n.$$.fragment,t),r=!0)},o(t){(0,u.etI)(n.$$.fragment,t),r=!1},d(t){t&&(0,u.ogt)(e),(0,u.vpE)(n)}}}function ie(t,e,n){const r=["icon"];let o=(0,u.q2N)(e,r),{icon:i}=e;return t.$$set=t=>{e=(0,u.f0i)((0,u.f0i)({},e),(0,u.Jvk)(t)),n(1,o=(0,u.q2N)(e,r)),"icon"in t&&n(0,i=t.icon)},[i,o]}Yt()(ne.Z,{insert:"head",singleton:!1}),ne.Z.locals;class se extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,ie,oe,u.AqN,{icon:0})}}var ce,le,ae,fe,$e,pe=se,ue=n(8568);function de(t,e,n,r){let o,i,s,c;return r===G.RUN_CV?e?e instanceof Error?(o=t,c=e.message,i=!0):(o=e,i=!1):(o=t,s=!0,i=!0):(o=t,i=!!n&&o!==n),{image:o,error:c,dimmed:i,processing:s}}class ge{constructor(t){ce.add(this),le.set(this,void 0),ae.set(this,void 0),fe.set(this,!1),(0,s.YH)(this,le,t,"f"),(0,ue.gx)((()=>{(0,s.YH)(this,fe,(0,s.Q_)(this,ce,"m",$e).call(this),"f")}))}stale(){return(0,s.Q_)(this,fe,"f")||(0,s.Q_)(this,ce,"m",$e).call(this)}}function he(){const t=(0,nt.fZ)(!1);let e;return{activated:t,init:()=>(t.set(!0),new Promise((t=>{e=t}))),ok(){t.set(!1),e(!0)},cancel(){t.set(!1),e(!1)}}}function me(t){let e,n,r;const o=t[5].default,i=(0,u.nuO)(o,t,t[4],null);let s=[{class:"scrollbar"},t[1]],c={};for(let t=0;t<s.length;t+=1)c=(0,u.f0i)(c,s[t]);return{c(){e=(0,u.bGB)("div"),n=(0,u.bGB)("div"),i&&i.c(),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0});var r=(0,u.pIy)(e);n=(0,u.vT0)(r,"DIV",{class:!0});var o=(0,u.pIy)(n);i&&i.l(o),o.forEach(u.ogt),r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(n,"class","scrollbar-wrapper"),(0,u.UF7)(e,c)},m(o,s){(0,u.ZMF)(o,e,s),(0,u.ztY)(e,n),i&&i.m(n,null),t[6](e),r=!0},p(t,[n]){i&&i.p&&(!r||16&n)&&(0,u.kmG)(i,o,t,t[4],r?(0,u.u2N)(o,t[4],n,null):(0,u.VOJ)(t[4]),null),(0,u.UF7)(e,c=(0,u.LoY)(s,[{class:"scrollbar"},2&n&&t[1]]))},i(t){r||((0,u.Ui)(i,t),r=!0)},o(t){(0,u.etI)(i,t),r=!1},d(n){n&&(0,u.ogt)(e),i&&i.d(n),t[6](null)}}}function ve(t,e,n){const r=["options","getScrollbar"];let o,i,c,a=(0,u.q2N)(e,r),{$$slots:f={},$$scope:$}=e;const p="function"==typeof ResizeObserver,d=new rt;let{options:g={}}=e;function h(){return d.promise}return(0,ue.v)("getScrollbar",h),(0,ue.H3)((()=>{i=l.Z.init(o,Object.assign({alwaysShowTracks:!0,continuousScrolling:!1},g)),d.resolve(i),p&&(c=new ResizeObserver((()=>{i.update()})),c.observe(i.contentEl))})),p||(0,ue.gx)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){yield(0,ue.Ky)(),i.update()})))),(0,ue.ev)((()=>{i.destroy(),null==c||c.disconnect()})),t.$$set=t=>{e=(0,u.f0i)((0,u.f0i)({},e),(0,u.Jvk)(t)),n(1,a=(0,u.q2N)(e,r)),"options"in t&&n(2,g=t.options),"$$scope"in t&&n(4,$=t.$$scope)},[o,a,g,h,$,f,function(t){u.VnY[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}le=new WeakMap,ae=new WeakMap,fe=new WeakMap,ce=new WeakSet,$e=function(){if(!(0,s.Q_)(this,ae,"f"))return(0,s.YH)(this,ae,(0,s.Q_)(this,le,"f").call(this),"f"),!0;const t=(0,s.Q_)(this,le,"f").call(this),e=(0,s.Q_)(this,ae,"f").some(((e,n)=>e!==t[n]));return(0,s.YH)(this,ae,t,"f"),e};class ye extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,ve,me,u.AqN,{options:2,getScrollbar:3})}get getScrollbar(){return this.$$.ctx[3]}}var we=ye;function Ie(t){let e;return{c(){e=(0,u.bGB)("canvas")},l(t){e=(0,u.vT0)(t,"CANVAS",{}),(0,u.pIy)(e).forEach(u.ogt)},m(n,r){(0,u.ZMF)(n,e,r),t[2](e)},p:u.ZTd,i:u.ZTd,o:u.ZTd,d(n){n&&(0,u.ogt)(e),t[2](null)}}}function xe(t,e,n){let r,{image:o}=e;const i=new ge((()=>[o]));return(0,ue.gx)((function(){return(0,s.mG)(this,void 0,void 0,(function*(){if(!r||!o)return;if(!i.stale())return;const t=r.getContext("2d");n(0,r.width=o.width,r),n(0,r.height=o.height,r),t.drawImage(o.canvas,0,0,o.width,o.height,0,0,o.width,o.height)}))})),t.$$set=t=>{"image"in t&&n(1,o=t.image)},[r,o,function(t){u.VnY[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}class Le extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,xe,Ie,u.AqN,{image:1})}}var be=Le,Ee=n(6317);function Ye(t,e,n){const r=t.slice();return r[41]=e[n].image,r[42]=e[n].error,r[43]=e[n].index,r[44]=e[n].dimmed,r}function ze(t){let e,n,r,o;return n=new pe({props:{icon:g._gM}}),{c(){e=(0,u.bGB)("span"),(0,u.YCL)(n.$$.fragment),this.h()},l(t){e=(0,u.vT0)(t,"SPAN",{class:!0,title:!0});var r=(0,u.pIy)(e);(0,u.wOw)(n.$$.fragment,r),r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","error-icon svelte-law7gk"),(0,u.Ljt)(e,"title",r=t[42])},m(t,r){(0,u.ZMF)(t,e,r),(0,u.yef)(n,e,null),o=!0},p(t,n){(!o||128&n[0]&&r!==(r=t[42]))&&(0,u.Ljt)(e,"title",r)},i(t){o||((0,u.Ui)(n.$$.fragment,t),o=!0)},o(t){(0,u.etI)(n.$$.fragment,t),o=!1},d(t){t&&(0,u.ogt)(e),(0,u.vpE)(n)}}}function Te(t){let e,n,r,o,i;function s(){return t[28](t[43])}return n=new pe({props:{icon:g.j43}}),{c(){e=(0,u.bGB)("span"),(0,u.YCL)(n.$$.fragment),this.h()},l(t){e=(0,u.vT0)(t,"SPAN",{class:!0,title:!0});var r=(0,u.pIy)(e);(0,u.wOw)(n.$$.fragment,r),r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","delete-icon svelte-law7gk"),(0,u.Ljt)(e,"title","この画像を削除")},m(t,c){(0,u.ZMF)(t,e,c),(0,u.yef)(n,e,null),r=!0,o||(i=(0,u.oLt)(e,"click",(0,u.XET)(s)),o=!0)},p(e,n){t=e},i(t){r||((0,u.Ui)(n.$$.fragment,t),r=!0)},o(t){(0,u.etI)(n.$$.fragment,t),r=!1},d(t){t&&(0,u.ogt)(e),(0,u.vpE)(n),o=!1,i()}}}function Fe(t){let e,n,r;return n=new pe({props:{icon:g.OjT}}),{c(){e=(0,u.bGB)("span"),(0,u.YCL)(n.$$.fragment),this.h()},l(t){e=(0,u.vT0)(t,"SPAN",{class:!0,title:!0});var r=(0,u.pIy)(e);(0,u.wOw)(n.$$.fragment,r),r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","reference-image-icon svelte-law7gk"),(0,u.Ljt)(e,"title","基準画像")},m(t,o){(0,u.ZMF)(t,e,o),(0,u.yef)(n,e,null),r=!0},p:u.ZTd,i(t){r||((0,u.Ui)(n.$$.fragment,t),r=!0)},o(t){(0,u.etI)(n.$$.fragment,t),r=!1},d(t){t&&(0,u.ogt)(e),(0,u.vpE)(n)}}}function Ze(t,e){let n,r,o,i,s,c,l,a,f;r=new be({props:{image:e[41]}});let $=e[42]&&ze(e),p=e[10]&&Te(e),d=e[41]===e[11]&&Fe();function g(){return e[29](e[43])}return{key:t,first:null,c(){n=(0,u.bGB)("div"),(0,u.YCL)(r.$$.fragment),o=(0,u.DhX)(),$&&$.c(),i=(0,u.DhX)(),p&&p.c(),s=(0,u.DhX)(),d&&d.c(),this.h()},l(t){n=(0,u.vT0)(t,"DIV",{class:!0,title:!0});var e=(0,u.pIy)(n);(0,u.wOw)(r.$$.fragment,e),o=(0,u.qzd)(e),$&&$.l(e),i=(0,u.qzd)(e),p&&p.l(e),s=(0,u.qzd)(e),d&&d.l(e),e.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(n,"class","thumb svelte-law7gk"),(0,u.Ljt)(n,"title",c=e[41]?.filename),(0,u.VHj)(n,"dimmed",e[44]),(0,u.VHj)(n,"error",e[42]),(0,u.VHj)(n,"selected",e[12]===e[43]),this.first=n},m(t,e){(0,u.ZMF)(t,n,e),(0,u.yef)(r,n,null),(0,u.ztY)(n,o),$&&$.m(n,null),(0,u.ztY)(n,i),p&&p.m(n,null),(0,u.ztY)(n,s),d&&d.m(n,null),l=!0,a||(f=(0,u.oLt)(n,"click",g),a=!0)},p(t,o){e=t;const a={};128&o[0]&&(a.image=e[41]),r.$set(a),e[42]?$?($.p(e,o),128&o[0]&&(0,u.Ui)($,1)):($=ze(e),$.c(),(0,u.Ui)($,1),$.m(n,i)):$&&((0,u.dvw)(),(0,u.etI)($,1,1,(()=>{$=null})),(0,u.gbL)()),e[10]?p?(p.p(e,o),1024&o[0]&&(0,u.Ui)(p,1)):(p=Te(e),p.c(),(0,u.Ui)(p,1),p.m(n,s)):p&&((0,u.dvw)(),(0,u.etI)(p,1,1,(()=>{p=null})),(0,u.gbL)()),e[41]===e[11]?d?(d.p(e,o),2176&o[0]&&(0,u.Ui)(d,1)):(d=Fe(),d.c(),(0,u.Ui)(d,1),d.m(n,null)):d&&((0,u.dvw)(),(0,u.etI)(d,1,1,(()=>{d=null})),(0,u.gbL)()),(!l||128&o[0]&&c!==(c=e[41]?.filename))&&(0,u.Ljt)(n,"title",c),128&o[0]&&(0,u.VHj)(n,"dimmed",e[44]),128&o[0]&&(0,u.VHj)(n,"error",e[42]),4224&o[0]&&(0,u.VHj)(n,"selected",e[12]===e[43])},i(t){l||((0,u.Ui)(r.$$.fragment,t),(0,u.Ui)($),(0,u.Ui)(p),(0,u.Ui)(d),l=!0)},o(t){(0,u.etI)(r.$$.fragment,t),(0,u.etI)($),(0,u.etI)(p),(0,u.etI)(d),l=!1},d(t){t&&(0,u.ogt)(n),(0,u.vpE)(r),$&&$.d(),p&&p.d(),d&&d.d(),a=!1,f()}}}function Ue(t){let e,n,r,o,i,s,c,l,a,f;return n=new At({props:{}}),t[30](n),i=new pe({props:{icon:g.qX5}}),{c(){e=(0,u.bGB)("div"),(0,u.YCL)(n.$$.fragment),r=(0,u.DhX)(),o=(0,u.bGB)("span"),(0,u.YCL)(i.$$.fragment),s=(0,u.DhX)(),c=(0,u.bGB)("input"),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0,title:!0});var l=(0,u.pIy)(e);(0,u.wOw)(n.$$.fragment,l),r=(0,u.qzd)(l),o=(0,u.vT0)(l,"SPAN",{class:!0});var a=(0,u.pIy)(o);(0,u.wOw)(i.$$.fragment,a),a.forEach(u.ogt),s=(0,u.qzd)(l),c=(0,u.vT0)(l,"INPUT",{type:!0,accept:!0,class:!0}),l.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(o,"class","uploader-icon svelte-law7gk"),(0,u.Ljt)(c,"type","file"),(0,u.Ljt)(c,"accept","image/*"),c.multiple=!0,(0,u.Ljt)(c,"class","svelte-law7gk"),(0,u.Ljt)(e,"class","uploader svelte-law7gk"),(0,u.Ljt)(e,"title","原画を追加")},m($,p){(0,u.ZMF)($,e,p),(0,u.yef)(n,e,null),(0,u.ztY)(e,r),(0,u.ztY)(e,o),(0,u.yef)(i,o,null),(0,u.ztY)(e,s),(0,u.ztY)(e,c),t[31](c),l=!0,a||(f=[(0,u.oLt)(c,"change",t[23]),(0,u.oLt)(e,"click",t[32])],a=!0)},p(t,e){n.$set({})},i(t){l||((0,u.Ui)(n.$$.fragment,t),(0,u.Ui)(i.$$.fragment,t),l=!0)},o(t){(0,u.etI)(n.$$.fragment,t),(0,u.etI)(i.$$.fragment,t),l=!1},d(r){r&&(0,u.ogt)(e),t[30](null),(0,u.vpE)(n),(0,u.vpE)(i),t[31](null),a=!1,(0,u.j7q)(f)}}}function Be(t){let e,n,r,o,i,s,c,l,a,f=[],$=new Map,p=t[7];const d=t=>t[41];for(let e=0;e<p.length;e+=1){let n=Ye(t,p,e),r=d(n);$.set(r,f[e]=Ze(r,n))}let g=t[10]&&Ue(t);return{c(){e=(0,u.bGB)("div"),r=(0,u.DhX)();for(let t=0;t<f.length;t+=1)f[t].c();o=(0,u.DhX)(),i=(0,u.bGB)("div"),c=(0,u.DhX)(),g&&g.c(),l=(0,u.cSb)(),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0,style:!0}),(0,u.pIy)(e).forEach(u.ogt),r=(0,u.qzd)(t);for(let e=0;e<f.length;e+=1)f[e].l(t);o=(0,u.qzd)(t),i=(0,u.vT0)(t,"DIV",{class:!0,style:!0}),(0,u.pIy)(i).forEach(u.ogt),c=(0,u.qzd)(t),g&&g.l(t),l=(0,u.cSb)(),this.h()},h(){(0,u.Ljt)(e,"class","thumb-placeholder placeholder-before svelte-law7gk"),(0,u.Ljt)(e,"style",n=`height: ${t[9]}px`),(0,u.Ljt)(i,"class","thumb-placeholder placeholder-after svelte-law7gk"),(0,u.Ljt)(i,"style",s=`height: ${t[8]}px`)},m(t,n){(0,u.ZMF)(t,e,n),(0,u.ZMF)(t,r,n);for(let e=0;e<f.length;e+=1)f[e].m(t,n);(0,u.ZMF)(t,o,n),(0,u.ZMF)(t,i,n),(0,u.ZMF)(t,c,n),g&&g.m(t,n),(0,u.ZMF)(t,l,n),a=!0},p(t,r){(!a||512&r[0]&&n!==(n=`height: ${t[9]}px`))&&(0,u.Ljt)(e,"style",n),2104448&r[0]&&(p=t[7],(0,u.dvw)(),f=(0,u.GQg)(f,r,d,1,t,p,$,o.parentNode,u.cly,Ze,o,Ye),(0,u.gbL)()),(!a||256&r[0]&&s!==(s=`height: ${t[8]}px`))&&(0,u.Ljt)(i,"style",s),t[10]?g?(g.p(t,r),1024&r[0]&&(0,u.Ui)(g,1)):(g=Ue(t),g.c(),(0,u.Ui)(g,1),g.m(l.parentNode,l)):g&&((0,u.dvw)(),(0,u.etI)(g,1,1,(()=>{g=null})),(0,u.gbL)())},i(t){if(!a){for(let t=0;t<p.length;t+=1)(0,u.Ui)(f[t]);(0,u.Ui)(g),a=!0}},o(t){for(let t=0;t<f.length;t+=1)(0,u.etI)(f[t]);(0,u.etI)(g),a=!1},d(t){t&&(0,u.ogt)(e),t&&(0,u.ogt)(r);for(let e=0;e<f.length;e+=1)f[e].d(t);t&&(0,u.ogt)(o),t&&(0,u.ogt)(i),t&&(0,u.ogt)(c),g&&g.d(t),t&&(0,u.ogt)(l)}}}function De(t){let e,n;return e=new w.Z({props:{target:"body",$$slots:{default:[Oe]},$$scope:{ctx:t}}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,n){const r={};65536&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function Oe(t){let e,n,r,o,i,s,c,l;return i=new pe({props:{icon:g.MNB}}),{c(){e=(0,u.bGB)("div"),n=(0,u.bGB)("span"),r=(0,u.fLW)("すべての画像を削除"),o=(0,u.DhX)(),(0,u.YCL)(i.$$.fragment),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0});var s=(0,u.pIy)(e);n=(0,u.vT0)(s,"SPAN",{});var c=(0,u.pIy)(n);r=(0,u.Bno)(c,"すべての画像を削除"),c.forEach(u.ogt),o=(0,u.qzd)(s),(0,u.wOw)(i.$$.fragment,s),s.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","clear-all svelte-law7gk")},m(a,f){(0,u.ZMF)(a,e,f),(0,u.ztY)(e,n),(0,u.ztY)(n,r),(0,u.ztY)(e,o),(0,u.yef)(i,e,null),s=!0,c||(l=(0,u.oLt)(e,"click",t[22]),c=!0)},p:u.ZTd,i(t){s||((0,u.Ui)(i.$$.fragment,t),s=!0)},o(t){(0,u.etI)(i.$$.fragment,t),s=!1},d(t){t&&(0,u.ogt)(e),(0,u.vpE)(i),c=!1,l()}}}function je(t){let e;return{c(){e=(0,u.fLW)("画像の削除")},l(t){e=(0,u.Bno)(t,"画像の削除")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Me(t){let e,n,r;return{c(){e=(0,u.fLW)("“"),n=(0,u.fLW)(t[3]),r=(0,u.fLW)("”を削除しますか？")},l(o){e=(0,u.Bno)(o,"“"),n=(0,u.Bno)(o,t[3]),r=(0,u.Bno)(o,"”を削除しますか？")},m(t,o){(0,u.ZMF)(t,e,o),(0,u.ZMF)(t,n,o),(0,u.ZMF)(t,r,o)},p(t,e){8&e[0]&&(0,u.rTO)(n,t[3])},d(t){t&&(0,u.ogt)(e),t&&(0,u.ogt)(n),t&&(0,u.ogt)(r)}}}function Ce(t){let e;return{c(){e=(0,u.fLW)("キャンセル")},l(t){e=(0,u.Bno)(t,"キャンセル")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Ge(t){let e;return{c(){e=(0,u.fLW)("削除")},l(t){e=(0,u.Bno)(t,"削除")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Se(t){let e,n,r,o;return e=new y.ZP({props:{$$slots:{default:[Ce]},$$scope:{ctx:t}}}),e.$on("click",t[16].cancel),r=new y.ZP({props:{color:"secondary",$$slots:{default:[Ge]},$$scope:{ctx:t}}}),r.$on("click",t[16].ok),{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.DhX)(),(0,u.YCL)(r.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.qzd)(t),(0,u.wOw)(r.$$.fragment,t)},m(t,i){(0,u.yef)(e,t,i),(0,u.ZMF)(t,n,i),(0,u.yef)(r,t,i),o=!0},p(t,n){const o={};65536&n[1]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const i={};65536&n[1]&&(i.$$scope={dirty:n,ctx:t}),r.$set(i)},i(t){o||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(r.$$.fragment,t),o=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(r.$$.fragment,t),o=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n),(0,u.vpE)(r,t)}}}function qe(t){let e,n,r,o,i,s;return e=new m.Dx({props:{$$slots:{default:[je]},$$scope:{ctx:t}}}),r=new m.VY({props:{$$slots:{default:[Me]},$$scope:{ctx:t}}}),i=new m.eX({props:{$$slots:{default:[Se]},$$scope:{ctx:t}}}),{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.DhX)(),(0,u.YCL)(r.$$.fragment),o=(0,u.DhX)(),(0,u.YCL)(i.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.qzd)(t),(0,u.wOw)(r.$$.fragment,t),o=(0,u.qzd)(t),(0,u.wOw)(i.$$.fragment,t)},m(t,c){(0,u.yef)(e,t,c),(0,u.ZMF)(t,n,c),(0,u.yef)(r,t,c),(0,u.ZMF)(t,o,c),(0,u.yef)(i,t,c),s=!0},p(t,n){const o={};65536&n[1]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const s={};8&n[0]|65536&n[1]&&(s.$$scope={dirty:n,ctx:t}),r.$set(s);const c={};65536&n[1]&&(c.$$scope={dirty:n,ctx:t}),i.$set(c)},i(t){s||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(r.$$.fragment,t),(0,u.Ui)(i.$$.fragment,t),s=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(r.$$.fragment,t),(0,u.etI)(i.$$.fragment,t),s=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n),(0,u.vpE)(r,t),t&&(0,u.ogt)(o),(0,u.vpE)(i,t)}}}function Ve(t){let e;return{c(){e=(0,u.fLW)("画像の削除")},l(t){e=(0,u.Bno)(t,"画像の削除")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Pe(t){let e;return{c(){e=(0,u.fLW)("すべての画像を削除しますか？")},l(t){e=(0,u.Bno)(t,"すべての画像を削除しますか？")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function _e(t){let e;return{c(){e=(0,u.fLW)("キャンセル")},l(t){e=(0,u.Bno)(t,"キャンセル")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Ne(t){let e;return{c(){e=(0,u.fLW)("削除")},l(t){e=(0,u.Bno)(t,"削除")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function We(t){let e,n,r,o;return e=new y.ZP({props:{$$slots:{default:[_e]},$$scope:{ctx:t}}}),e.$on("click",t[18].cancel),r=new y.ZP({props:{color:"secondary",$$slots:{default:[Ne]},$$scope:{ctx:t}}}),r.$on("click",t[18].ok),{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.DhX)(),(0,u.YCL)(r.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.qzd)(t),(0,u.wOw)(r.$$.fragment,t)},m(t,i){(0,u.yef)(e,t,i),(0,u.ZMF)(t,n,i),(0,u.yef)(r,t,i),o=!0},p(t,n){const o={};65536&n[1]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const i={};65536&n[1]&&(i.$$scope={dirty:n,ctx:t}),r.$set(i)},i(t){o||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(r.$$.fragment,t),o=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(r.$$.fragment,t),o=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n),(0,u.vpE)(r,t)}}}function Xe(t){let e,n,r,o,i,s;return e=new m.Dx({props:{$$slots:{default:[Ve]},$$scope:{ctx:t}}}),r=new m.VY({props:{$$slots:{default:[Pe]},$$scope:{ctx:t}}}),i=new m.eX({props:{$$slots:{default:[We]},$$scope:{ctx:t}}}),{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.DhX)(),(0,u.YCL)(r.$$.fragment),o=(0,u.DhX)(),(0,u.YCL)(i.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.qzd)(t),(0,u.wOw)(r.$$.fragment,t),o=(0,u.qzd)(t),(0,u.wOw)(i.$$.fragment,t)},m(t,c){(0,u.yef)(e,t,c),(0,u.ZMF)(t,n,c),(0,u.yef)(r,t,c),(0,u.ZMF)(t,o,c),(0,u.yef)(i,t,c),s=!0},p(t,n){const o={};65536&n[1]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const s={};65536&n[1]&&(s.$$scope={dirty:n,ctx:t}),r.$set(s);const c={};65536&n[1]&&(c.$$scope={dirty:n,ctx:t}),i.$set(c)},i(t){s||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(r.$$.fragment,t),(0,u.Ui)(i.$$.fragment,t),s=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(r.$$.fragment,t),(0,u.etI)(i.$$.fragment,t),s=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n),(0,u.vpE)(r,t),t&&(0,u.ogt)(o),(0,u.vpE)(i,t)}}}function Ae(t){let e,n,r,o,i,s,c,l,a,f,$,p,d;n=new we({props:{$$slots:{default:[Be]},$$scope:{ctx:t}}}),t[33](n);let g=t[10]&&0!==t[2].size&&De(t);function h(e){t[34](e)}let m={scrimClickAction:"",escapeKeyAction:"",$$slots:{default:[qe]},$$scope:{ctx:t}};function v(e){t[35](e)}void 0!==t[14]&&(m.open=t[14]),s=new T({props:m}),u.VnY.push((()=>(0,u.akz)(s,"open",h)));let y={scrimClickAction:"",escapeKeyAction:"",$$slots:{default:[Xe]},$$scope:{ctx:t}};return void 0!==t[13]&&(y.open=t[13]),a=new T({props:y}),u.VnY.push((()=>(0,u.akz)(a,"open",v))),{c(){e=(0,u.bGB)("div"),(0,u.YCL)(n.$$.fragment),o=(0,u.DhX)(),g&&g.c(),i=(0,u.DhX)(),(0,u.YCL)(s.$$.fragment),l=(0,u.DhX)(),(0,u.YCL)(a.$$.fragment),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0,style:!0});var r=(0,u.pIy)(e);(0,u.wOw)(n.$$.fragment,r),r.forEach(u.ogt),o=(0,u.qzd)(t),g&&g.l(t),i=(0,u.qzd)(t),(0,u.wOw)(s.$$.fragment,t),l=(0,u.qzd)(t),(0,u.wOw)(a.$$.fragment,t),this.h()},h(){(0,u.Ljt)(e,"class","image-track svelte-law7gk"),(0,u.Ljt)(e,"style",r=`\n    --thumb-size: ${t[0]}px;\n    --thumb-spacing: ${t[1]}px;\n  `)},m(r,c){(0,u.ZMF)(r,e,c),(0,u.yef)(n,e,null),(0,u.ZMF)(r,o,c),g&&g.m(r,c),(0,u.ZMF)(r,i,c),(0,u.yef)(s,r,c),(0,u.ZMF)(r,l,c),(0,u.yef)(a,r,c),$=!0,p||(d=(0,u.oLt)(window,"keydown",t[20]),p=!0)},p(t,o){const l={};8144&o[0]|65536&o[1]&&(l.$$scope={dirty:o,ctx:t}),n.$set(l),(!$||3&o[0]&&r!==(r=`\n    --thumb-size: ${t[0]}px;\n    --thumb-spacing: ${t[1]}px;\n  `))&&(0,u.Ljt)(e,"style",r),t[10]&&0!==t[2].size?g?(g.p(t,o),1028&o[0]&&(0,u.Ui)(g,1)):(g=De(t),g.c(),(0,u.Ui)(g,1),g.m(i.parentNode,i)):g&&((0,u.dvw)(),(0,u.etI)(g,1,1,(()=>{g=null})),(0,u.gbL)());const p={};8&o[0]|65536&o[1]&&(p.$$scope={dirty:o,ctx:t}),!c&&16384&o[0]&&(c=!0,p.open=t[14],(0,u.hjT)((()=>c=!1))),s.$set(p);const d={};65536&o[1]&&(d.$$scope={dirty:o,ctx:t}),!f&&8192&o[0]&&(f=!0,d.open=t[13],(0,u.hjT)((()=>f=!1))),a.$set(d)},i(t){$||((0,u.Ui)(n.$$.fragment,t),(0,u.Ui)(g),(0,u.Ui)(s.$$.fragment,t),(0,u.Ui)(a.$$.fragment,t),$=!0)},o(t){(0,u.etI)(n.$$.fragment,t),(0,u.etI)(g),(0,u.etI)(s.$$.fragment,t),(0,u.etI)(a.$$.fragment,t),$=!1},d(r){r&&(0,u.ogt)(e),t[33](null),(0,u.vpE)(n),r&&(0,u.ogt)(o),g&&g.d(r),r&&(0,u.ogt)(i),(0,u.vpE)(s,r),r&&(0,u.ogt)(l),(0,u.vpE)(a,r),p=!1,d()}}}function ke(t,e,n){let r,o,i,l,a,f,$,p,d,g,h;(0,u.FIv)(t,gt,(t=>n(11,a=t))),(0,u.FIv)(t,lt,(t=>n(12,f=t))),(0,u.FIv)(t,st,(t=>n(2,$=t))),(0,u.FIv)(t,ct,(t=>n(36,h=t)));const{currentStep:m}=vt;(0,u.FIv)(t,m,(t=>n(27,p=t)));let v,{thumbSize:y=150}=e,{thumbSpacing:w=20}=e;const I=he(),x=I.activated;(0,u.FIv)(t,x,(t=>n(14,g=t)));const L=he(),b=L.activated;let E,Y,z;(0,u.FIv)(t,b,(t=>n(13,d=t)));let T=0,F=0,Z=[];const U=new ge((()=>[$,h,a,T,F]));function B(){return(0,s.mG)(this,void 0,void 0,(function*(){const t=yield Y.getScrollbar(),e=t.scrollTop,o=e+t.size.container.height,i=Math.floor(e/r),s=Math.ceil(o/r),c=Math.floor((s-i+1)/2);n(24,T=Math.max(0,i-c)),n(25,F=Math.min($.size-1,s+c))}))}function D(t){return(0,s.mG)(this,void 0,void 0,(function*(){if(g||d)return;const e=f+t;if(e<0||e>$.size-1)return;(0,u.fxP)(lt,f=e,f);const n=e*r,o=n+r,i=yield Y.getScrollbar();if(0===e)i.setMomentum(0,-i.scrollTop);else if(e===$.size-1)i.setMomentum(0,i.limit.y-i.scrollTop);else{const t=n-i.scrollTop-10,e=o-(i.scrollTop+i.size.container.height)+10;t<0?i.setMomentum(0,t):e>0&&i.setMomentum(0,e)}}))}function O(t){return(0,s.mG)(this,void 0,void 0,(function*(){const e=$.get(t);n(3,v=e.filename),e===a&&n(3,v+="（基準画像）"),(yield I.init())&&((0,u.fxP)(st,$=$.remove(t),$),t===f&&(0,u.fxP)(lt,f=(0,c.Z)(f,0,$.size-1),f),e===a&&((0,u.fxP)(gt,a=void 0,a),(0,u.fxP)(m,p=G.SELECT_REF_IMAGE,p)))}))}return(0,ue.H3)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){(yield Y.getScrollbar()).addListener(B)})))),(0,ue.gx)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){yield B(),U.stale()&&n(7,Z=function(){if($.isEmpty())return[];const t=[];for(let e=T;e<=F;e++){const n=$.get(e),r=h.get(e);t.push(Object.assign(Object.assign({},de(n,r,a,p)),{index:e}))}return t}())})))),t.$$set=t=>{"thumbSize"in t&&n(0,y=t.thumbSize),"thumbSpacing"in t&&n(1,w=t.thumbSpacing)},t.$$.update=()=>{3&t.$$.dirty[0]&&n(26,r=y+w),134217728&t.$$.dirty[0]&&n(10,o=p!==G.RUN_CV),117440518&t.$$.dirty[0]&&n(9,[i,l]=[T*r,($.size-F-1)*r-w],i,(n(8,l),n(24,T),n(26,r),n(2,$),n(25,F),n(1,w),n(0,y)))},[y,w,$,v,E,Y,z,Z,l,i,o,a,f,d,g,m,I,x,L,b,function(t){switch(t.stopPropagation(),t.key){case"Delete":O(f);break;case"ArrowUp":case"ArrowLeft":D(-1);break;case"ArrowDown":case"ArrowRight":D(1)}},O,function(){return(0,s.mG)(this,void 0,void 0,(function*(){(yield L.init())&&((0,u.fxP)(st,$=$.clear(),$),(0,u.fxP)(lt,f=0,f),(0,u.fxP)(gt,a=void 0,a),vt.reset())}))},function(){z.files&&0!==z.files.length&&(E.uploadFiles(Array.from(z.files)),n(6,z.value="",z))},T,F,r,p,t=>O(t),t=>{(0,u.fxP)(lt,f=t,f)},function(t){u.VnY[t?"unshift":"push"]((()=>{E=t,n(4,E)}))},function(t){u.VnY[t?"unshift":"push"]((()=>{z=t,n(6,z)}))},()=>z.click(),function(t){u.VnY[t?"unshift":"push"]((()=>{Y=t,n(5,Y)}))},function(t){g=t,x.set(g)},function(t){d=t,b.set(d)}]}Yt()(Ee.Z,{insert:"head",singleton:!1}),Ee.Z.locals;class Re extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,ke,Ae,u.AqN,{thumbSize:0,thumbSpacing:1},null,[-1,-1])}}var He=Re,Qe=n(3434),Je=n(2805);function Ke(t){return t.clone()}var tn=n(9334);function en(t){let e,n,r,o,i,s,c,l,a,f,$,p;return{c(){e=(0,u.bGB)("div"),n=(0,u.bi5)("svg"),r=(0,u.bi5)("line"),o=(0,u.DhX)(),i=(0,u.bi5)("svg"),s=(0,u.bi5)("line"),c=(0,u.DhX)(),l=(0,u.bi5)("svg"),a=(0,u.bi5)("circle"),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0,style:!0});var f=(0,u.pIy)(e);n=(0,u.Evd)(f,"svg",{class:!0});var $=(0,u.pIy)(n);r=(0,u.Evd)($,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),(0,u.pIy)(r).forEach(u.ogt),$.forEach(u.ogt),o=(0,u.qzd)(f),i=(0,u.Evd)(f,"svg",{class:!0});var p=(0,u.pIy)(i);s=(0,u.Evd)(p,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),(0,u.pIy)(s).forEach(u.ogt),p.forEach(u.ogt),c=(0,u.qzd)(f),l=(0,u.Evd)(f,"svg",{class:!0});var d=(0,u.pIy)(l);a=(0,u.Evd)(d,"circle",{cx:!0,cy:!0,style:!0}),(0,u.pIy)(a).forEach(u.ogt),d.forEach(u.ogt),f.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(r,"x1","0"),(0,u.Ljt)(r,"y1","0"),(0,u.Ljt)(r,"x2","100%"),(0,u.Ljt)(r,"y2","0"),(0,u.Ljt)(n,"class","locator-line horizontal svelte-1lbyc7u"),(0,u.Ljt)(s,"x1","0"),(0,u.Ljt)(s,"y1","0"),(0,u.Ljt)(s,"x2","0"),(0,u.Ljt)(s,"y2","100%"),(0,u.Ljt)(i,"class","locator-line vertical svelte-1lbyc7u"),(0,u.Ljt)(a,"cx","50%"),(0,u.Ljt)(a,"cy","50%"),(0,u.czc)(a,"r","calc(var(--locator-radius) - var(--locator-line-width))"),(0,u.Ljt)(l,"class","locator-circle svelte-1lbyc7u"),(0,u.Ljt)(e,"class","locator svelte-1lbyc7u"),(0,u.Ljt)(e,"style",f=`--locator-x: ${t[2].x}px; --locator-y: ${t[2].y}px`),(0,u.VHj)(e,"readonly",t[0])},m(f,d){(0,u.ZMF)(f,e,d),(0,u.ztY)(e,n),(0,u.ztY)(n,r),(0,u.ztY)(e,o),(0,u.ztY)(e,i),(0,u.ztY)(i,s),(0,u.ztY)(e,c),(0,u.ztY)(e,l),(0,u.ztY)(l,a),t[10](e),$||(p=[(0,u.oLt)(window,"pointermove",t[5]),(0,u.oLt)(window,"pointerup",t[4]),(0,u.oLt)(window,"blur",t[4]),(0,u.oLt)(e,"pointerdown",t[3])],$=!0)},p(t,[n]){4&n&&f!==(f=`--locator-x: ${t[2].x}px; --locator-y: ${t[2].y}px`)&&(0,u.Ljt)(e,"style",f),1&n&&(0,u.VHj)(e,"readonly",t[0])},i:u.ZTd,o:u.ZTd,d(n){n&&(0,u.ogt)(e),t[10](null),$=!1,(0,u.j7q)(p)}}}function nn(t,e,n){let r,o,i,{point:l=new q}=e,{readonly:a=!1}=e,{limits:f=new V({x1:-1/0,y1:-1/0,x2:1/0,y2:1/0})}=e,{localToReal:$=Ke}=e,{realToLocal:p=Ke}=e,d=!1,g=new q({x:0,y:0});function h(){if(a)return;const t=o.getBoundingClientRect(),e=$(new q({x:(0,c.Z)(g.x-t.left,0,t.width),y:(0,c.Z)(g.y-t.top,0,t.height)}));n(6,l=new q({x:(0,c.Z)(e.x,f.x1,f.x2),y:(0,c.Z)(e.y,f.y1,f.y2)})),o.dispatchEvent(new CustomEvent("pan-move",{bubbles:!0,detail:{pointerX:g.x,pointerY:g.y}}))}return(0,ue.ed)("getScrollbar")&&(i=(0,ue.fw)("getScrollbar")),(0,ue.H3)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){i&&(yield i()).addListener((()=>{d&&h()}))})))),t.$$set=t=>{"point"in t&&n(6,l=t.point),"readonly"in t&&n(0,a=t.readonly),"limits"in t&&n(7,f=t.limits),"localToReal"in t&&n(8,$=t.localToReal),"realToLocal"in t&&n(9,p=t.realToLocal)},t.$$.update=()=>{576&t.$$.dirty&&n(2,r=p(l))},[a,o,r,function(t){a||(d=!0,g=new q({x:t.clientX,y:t.clientY}),document.body.classList.add("disable-select"),h())},function(){d=!1,document.body.classList.remove("disable-select")},function(t){d&&(g=new q({x:t.clientX,y:t.clientY}),h())},l,f,$,p,function(t){u.VnY[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}Yt()(tn.Z,{insert:"head",singleton:!1}),tn.Z.locals;class rn extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,nn,en,u.AqN,{point:6,readonly:0,limits:7,localToReal:8,realToLocal:9})}}var on=rn,sn=n(9313);function cn(t){let e,n,r,o,i,s,c,l,a,f,$,p,d,g,h,m,v,y,w,I,x,L,b,E,Y,z,T,F,Z,U,B,D,O,j,M,C,G,S,q=t[0].width+"",V=t[0].height+"";return{c(){e=(0,u.bGB)("div"),n=(0,u.bGB)("div"),r=(0,u.bGB)("div"),o=(0,u.DhX)(),i=(0,u.bGB)("div"),s=(0,u.DhX)(),c=(0,u.bGB)("div"),l=(0,u.DhX)(),a=(0,u.bGB)("div"),f=(0,u.DhX)(),$=(0,u.bGB)("div"),p=(0,u.bi5)("svg"),d=(0,u.bi5)("rect"),g=(0,u.bi5)("rect"),h=(0,u.DhX)(),m=(0,u.bGB)("div"),v=(0,u.DhX)(),y=(0,u.bGB)("div"),w=(0,u.DhX)(),I=(0,u.bGB)("div"),x=(0,u.DhX)(),L=(0,u.bGB)("div"),b=(0,u.DhX)(),E=(0,u.bGB)("div"),Y=(0,u.DhX)(),z=(0,u.bGB)("div"),T=(0,u.DhX)(),F=(0,u.bGB)("div"),Z=(0,u.DhX)(),U=(0,u.bGB)("div"),B=(0,u.DhX)(),D=(0,u.bGB)("div"),O=(0,u.fLW)(q),j=(0,u.fLW)(" x "),M=(0,u.fLW)(V),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0,style:!0});var C=(0,u.pIy)(e);n=(0,u.vT0)(C,"DIV",{class:!0});var G=(0,u.pIy)(n);r=(0,u.vT0)(G,"DIV",{class:!0}),(0,u.pIy)(r).forEach(u.ogt),o=(0,u.qzd)(G),i=(0,u.vT0)(G,"DIV",{class:!0}),(0,u.pIy)(i).forEach(u.ogt),s=(0,u.qzd)(G),c=(0,u.vT0)(G,"DIV",{class:!0}),(0,u.pIy)(c).forEach(u.ogt),l=(0,u.qzd)(G),a=(0,u.vT0)(G,"DIV",{class:!0}),(0,u.pIy)(a).forEach(u.ogt),G.forEach(u.ogt),f=(0,u.qzd)(C),$=(0,u.vT0)(C,"DIV",{class:!0});var S=(0,u.pIy)($);p=(0,u.Evd)(S,"svg",{class:!0});var P=(0,u.pIy)(p);d=(0,u.Evd)(P,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0}),(0,u.pIy)(d).forEach(u.ogt),g=(0,u.Evd)(P,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0}),(0,u.pIy)(g).forEach(u.ogt),P.forEach(u.ogt),h=(0,u.qzd)(S),m=(0,u.vT0)(S,"DIV",{class:!0}),(0,u.pIy)(m).forEach(u.ogt),v=(0,u.qzd)(S),y=(0,u.vT0)(S,"DIV",{class:!0}),(0,u.pIy)(y).forEach(u.ogt),w=(0,u.qzd)(S),I=(0,u.vT0)(S,"DIV",{class:!0}),(0,u.pIy)(I).forEach(u.ogt),x=(0,u.qzd)(S),L=(0,u.vT0)(S,"DIV",{class:!0}),(0,u.pIy)(L).forEach(u.ogt),b=(0,u.qzd)(S),E=(0,u.vT0)(S,"DIV",{class:!0}),(0,u.pIy)(E).forEach(u.ogt),Y=(0,u.qzd)(S),z=(0,u.vT0)(S,"DIV",{class:!0}),(0,u.pIy)(z).forEach(u.ogt),T=(0,u.qzd)(S),F=(0,u.vT0)(S,"DIV",{class:!0}),(0,u.pIy)(F).forEach(u.ogt),Z=(0,u.qzd)(S),U=(0,u.vT0)(S,"DIV",{class:!0}),(0,u.pIy)(U).forEach(u.ogt),B=(0,u.qzd)(S),D=(0,u.vT0)(S,"DIV",{class:!0});var _=(0,u.pIy)(D);O=(0,u.Bno)(_,q),j=(0,u.Bno)(_," x "),M=(0,u.Bno)(_,V),_.forEach(u.ogt),S.forEach(u.ogt),C.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(r,"class","cropper-mask mask-top svelte-1nxvtom"),(0,u.Ljt)(i,"class","cropper-mask mask-left svelte-1nxvtom"),(0,u.Ljt)(c,"class","cropper-mask mask-bottom svelte-1nxvtom"),(0,u.Ljt)(a,"class","cropper-mask mask-right svelte-1nxvtom"),(0,u.Ljt)(n,"class","cropper-mask-wrapper"),(0,u.Ljt)(d,"class","cropper-border-black"),(0,u.Ljt)(d,"x","0"),(0,u.Ljt)(d,"y","0"),(0,u.Ljt)(d,"width","100%"),(0,u.Ljt)(d,"height","100%"),(0,u.Ljt)(g,"class","cropper-border-white svelte-1nxvtom"),(0,u.Ljt)(g,"x","0"),(0,u.Ljt)(g,"y","0"),(0,u.Ljt)(g,"width","100%"),(0,u.Ljt)(g,"height","100%"),(0,u.Ljt)(p,"class","cropper-border svelte-1nxvtom"),(0,u.Ljt)(m,"class","cropper-handle handle-n svelte-1nxvtom"),(0,u.Ljt)(y,"class","cropper-handle handle-s svelte-1nxvtom"),(0,u.Ljt)(I,"class","cropper-handle handle-w svelte-1nxvtom"),(0,u.Ljt)(L,"class","cropper-handle handle-e svelte-1nxvtom"),(0,u.Ljt)(E,"class","cropper-handle handle-nw svelte-1nxvtom"),(0,u.Ljt)(z,"class","cropper-handle handle-sw svelte-1nxvtom"),(0,u.Ljt)(F,"class","cropper-handle handle-ne svelte-1nxvtom"),(0,u.Ljt)(U,"class","cropper-handle handle-se svelte-1nxvtom"),(0,u.Ljt)(D,"class","cropper-info svelte-1nxvtom"),(0,u.VHj)(D,"show",t[3]&&t[5]!==t[4].ALL),(0,u.Ljt)($,"class","cropper-box svelte-1nxvtom"),(0,u.VHj)($,"grabbing",t[3]&&t[5]===t[4].ALL),(0,u.Ljt)(e,"class","cropper svelte-1nxvtom"),(0,u.Ljt)(e,"style",C=`\n    --cropper-x1: ${t[6].x1}px;\n    --cropper-y1: ${t[6].y1}px;\n    --cropper-x2: ${t[6].x2}px;\n    --cropper-y2: ${t[6].y2}px;\n  `),(0,u.VHj)(e,"readonly",t[1])},m(C,q){(0,u.ZMF)(C,e,q),(0,u.ztY)(e,n),(0,u.ztY)(n,r),(0,u.ztY)(n,o),(0,u.ztY)(n,i),(0,u.ztY)(n,s),(0,u.ztY)(n,c),(0,u.ztY)(n,l),(0,u.ztY)(n,a),(0,u.ztY)(e,f),(0,u.ztY)(e,$),(0,u.ztY)($,p),(0,u.ztY)(p,d),(0,u.ztY)(p,g),(0,u.ztY)($,h),(0,u.ztY)($,m),(0,u.ztY)($,v),(0,u.ztY)($,y),(0,u.ztY)($,w),(0,u.ztY)($,I),(0,u.ztY)($,x),(0,u.ztY)($,L),(0,u.ztY)($,b),(0,u.ztY)($,E),(0,u.ztY)($,Y),(0,u.ztY)($,z),(0,u.ztY)($,T),(0,u.ztY)($,F),(0,u.ztY)($,Z),(0,u.ztY)($,U),(0,u.ztY)($,B),(0,u.ztY)($,D),(0,u.ztY)(D,O),(0,u.ztY)(D,j),(0,u.ztY)(D,M),t[13](e),G||(S=[(0,u.oLt)(window,"pointermove",t[9]),(0,u.oLt)(window,"pointerup",t[8]),(0,u.oLt)(window,"blur",t[8]),(0,u.oLt)(n,"pointerdown",t[10]),(0,u.oLt)(m,"pointerdown",(function(){(0,u.sBU)(t[7](t[4].N))&&t[7](t[4].N).apply(this,arguments)})),(0,u.oLt)(y,"pointerdown",(function(){(0,u.sBU)(t[7](t[4].S))&&t[7](t[4].S).apply(this,arguments)})),(0,u.oLt)(I,"pointerdown",(function(){(0,u.sBU)(t[7](t[4].W))&&t[7](t[4].W).apply(this,arguments)})),(0,u.oLt)(L,"pointerdown",(function(){(0,u.sBU)(t[7](t[4].E))&&t[7](t[4].E).apply(this,arguments)})),(0,u.oLt)(E,"pointerdown",(function(){(0,u.sBU)(t[7](t[4].NW))&&t[7](t[4].NW).apply(this,arguments)})),(0,u.oLt)(z,"pointerdown",(function(){(0,u.sBU)(t[7](t[4].SW))&&t[7](t[4].SW).apply(this,arguments)})),(0,u.oLt)(F,"pointerdown",(function(){(0,u.sBU)(t[7](t[4].NE))&&t[7](t[4].NE).apply(this,arguments)})),(0,u.oLt)(U,"pointerdown",(function(){(0,u.sBU)(t[7](t[4].SE))&&t[7](t[4].SE).apply(this,arguments)})),(0,u.oLt)($,"pointerdown",(function(){(0,u.sBU)(t[7](t[4].ALL))&&t[7](t[4].ALL).apply(this,arguments)}))],G=!0)},p(n,[r]){t=n,1&r&&q!==(q=t[0].width+"")&&(0,u.rTO)(O,q),1&r&&V!==(V=t[0].height+"")&&(0,u.rTO)(M,V),56&r&&(0,u.VHj)(D,"show",t[3]&&t[5]!==t[4].ALL),56&r&&(0,u.VHj)($,"grabbing",t[3]&&t[5]===t[4].ALL),64&r&&C!==(C=`\n    --cropper-x1: ${t[6].x1}px;\n    --cropper-y1: ${t[6].y1}px;\n    --cropper-x2: ${t[6].x2}px;\n    --cropper-y2: ${t[6].y2}px;\n  `)&&(0,u.Ljt)(e,"style",C),2&r&&(0,u.VHj)(e,"readonly",t[1])},i:u.ZTd,o:u.ZTd,d(n){n&&(0,u.ogt)(e),t[13](null),G=!1,(0,u.j7q)(S)}}}function ln(t,e,n){let r,o,{cropRect:i=new V}=e,{localToReal:l=Ke}=e,{realToLocal:a=Ke}=e,{readonly:f=!1}=e;function $(t){const e=l(t.x1y1),n=l(t.x2y2);return e.formRectWith(n)}let p=!1;var d;!function(t){t[t.NONE=0]="NONE",t[t.N=1]="N",t[t.S=2]="S",t[t.W=4]="W",t[t.E=8]="E",t[t.NW=5]="NW",t[t.NE=9]="NE",t[t.SW=6]="SW",t[t.SE=10]="SE",t[t.ALL=15]="ALL"}(d||(d={}));let g,h=d.NONE,m=new q,v=new V;function y(){o.dispatchEvent(new CustomEvent("pan-move",{bubbles:!0,detail:{pointerX:m.x,pointerY:m.y}}))}function w(){if(f)return;if(h===d.NONE)return;if(h===d.ALL)return void function(){const t=o.getBoundingClientRect(),e=m.x-t.left,s=m.y-t.top,l=(0,c.Z)(e-v.x1,0,t.width-r.width),a=(0,c.Z)(s-v.y1,0,t.height-r.height),f=l+r.width,p=a+r.height;n(0,i=$(new V({x1:l,y1:a,x2:f,y2:p}))),y()}();const t=o.getBoundingClientRect(),e=(0,c.Z)(m.x-t.left,0,t.width),s=(0,c.Z)(m.y-t.top,0,t.height);let{x1:l,y1:a,x2:p,y2:u}=r;h&d.N&&(s<u?a=s:(a=u,u=s,n(5,h=h-d.N|d.S))),h&d.S&&(s>a?u=s:(u=a,a=s,n(5,h=h-d.S|d.N))),h&d.W&&(e<p?l=e:(l=p,p=e,n(5,h=h-d.W|d.E))),h&d.E&&(e>l?p=e:(p=l,l=e,n(5,h=h-d.E|d.W))),n(0,i=$(new V({x1:l,y1:a,x2:p,y2:u}))),y()}return(0,ue.ed)("getScrollbar")&&(g=(0,ue.fw)("getScrollbar")),(0,ue.H3)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){g&&(yield g()).addListener((()=>{p&&w()}))})))),t.$$set=t=>{"cropRect"in t&&n(0,i=t.cropRect),"localToReal"in t&&n(11,l=t.localToReal),"realToLocal"in t&&n(12,a=t.realToLocal),"readonly"in t&&n(1,f=t.readonly)},t.$$.update=()=>{1&t.$$.dirty&&n(6,r=function(t){const e=a(t.x1y1),n=a(t.x2y2);return e.formRectWith(n)}(i))},[i,f,o,p,d,h,r,function(t){return e=>{if(!f&&(e.stopPropagation(),n(3,p=!0),n(5,h=t),document.body.classList.add("disable-select"),m=new q({x:e.clientX,y:e.clientY}),t===d.ALL)){const t=o.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;v=new V({x1:n-r.x1,y1:i-r.y1,x2:n-r.x2,y2:i-r.y2})}}},function(){n(3,p=!1),n(5,h=d.NONE),document.body.classList.remove("disable-select")},function(t){p&&(m=new q({x:t.clientX,y:t.clientY}),w())},function(t){if(f)return;n(3,p=!0),n(5,h=d.NW);const e=o.getBoundingClientRect(),r=t.clientX-e.left,s=t.clientY-e.top;m=new q({x:t.clientX,y:t.clientY}),n(0,i=$(new V({x1:r,y1:s,x2:r,y2:s})))},l,a,function(t){u.VnY[t?"unshift":"push"]((()=>{o=t,n(2,o)}))}]}Yt()(sn.Z,{insert:"head",singleton:!1}),sn.Z.locals;class an extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,ln,cn,u.AqN,{cropRect:0,localToReal:11,realToLocal:12,readonly:1})}}var fn=an,$n=n(6026);function pn(t){let e,n;return{c(){e=(0,u.bGB)("div"),n=(0,u.fLW)("基準位置を自動算出中..."),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0});var r=(0,u.pIy)(e);n=(0,u.Bno)(r,"基準位置を自動算出中..."),r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","viewer-fullsize-cover message svelte-arq60t")},m(t,r){(0,u.ZMF)(t,e,r),(0,u.ztY)(e,n)},d(t){t&&(0,u.ogt)(e)}}}function un(t){let e,n;return{c(){e=(0,u.bGB)("div"),n=(0,u.fLW)("OpenCV 処理待ち..."),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0});var r=(0,u.pIy)(e);n=(0,u.Bno)(r,"OpenCV 処理待ち..."),r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","viewer-fullsize-cover message svelte-arq60t")},m(t,r){(0,u.ZMF)(t,e,r),(0,u.ztY)(e,n)},d(t){t&&(0,u.ogt)(e)}}}function dn(t){let e,n,r=t[0].error+"";return{c(){e=(0,u.bGB)("div"),n=(0,u.fLW)(r),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0});var o=(0,u.pIy)(e);n=(0,u.Bno)(o,r),o.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","viewer-fullsize-cover error svelte-arq60t")},m(t,r){(0,u.ZMF)(t,e,r),(0,u.ztY)(e,n)},p(t,e){1&e[0]&&r!==(r=t[0].error+"")&&(0,u.rTO)(n,r)},d(t){t&&(0,u.ogt)(e)}}}function gn(t){let e,n,r;return n=new be({props:{image:t[3]}}),{c(){e=(0,u.bGB)("div"),(0,u.YCL)(n.$$.fragment),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0});var r=(0,u.pIy)(e);(0,u.wOw)(n.$$.fragment,r),r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","viewer-image compare svelte-arq60t")},m(t,o){(0,u.ZMF)(t,e,o),(0,u.yef)(n,e,null),r=!0},p(t,e){const r={};8&e[0]&&(r.image=t[3]),n.$set(r)},i(t){r||((0,u.Ui)(n.$$.fragment,t),r=!0)},o(t){(0,u.etI)(n.$$.fragment,t),r=!1},d(t){t&&(0,u.ogt)(e),(0,u.vpE)(n)}}}function hn(t){let e,n,r;return n=new be({props:{image:t[1]}}),{c(){e=(0,u.bGB)("div"),(0,u.YCL)(n.$$.fragment),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0});var r=(0,u.pIy)(e);(0,u.wOw)(n.$$.fragment,r),r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","viewer-image compare svelte-arq60t")},m(t,o){(0,u.ZMF)(t,e,o),(0,u.yef)(n,e,null),r=!0},p(t,e){const r={};2&e[0]&&(r.image=t[1]),n.$set(r)},i(t){r||((0,u.Ui)(n.$$.fragment,t),r=!0)},o(t){(0,u.etI)(n.$$.fragment,t),r=!1},d(t){t&&(0,u.ogt)(e),(0,u.vpE)(n)}}}function mn(t){let e,n,r;function o(e){t[28](e)}let i={localToReal:t[24],realToLocal:t[25]};return void 0!==t[12]&&(i.cropRect=t[12]),e=new fn({props:i}),u.VnY.push((()=>(0,u.akz)(e,"cropRect",o))),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,n){(0,u.yef)(e,t,n),r=!0},p(t,r){const o={};!n&&4096&r[0]&&(n=!0,o.cropRect=t[12],(0,u.hjT)((()=>n=!1))),e.$set(o)},i(t){r||((0,u.Ui)(e.$$.fragment,t),r=!0)},o(t){(0,u.etI)(e.$$.fragment,t),r=!1},d(t){(0,u.vpE)(e,t)}}}function vn(t){let e,n,r;function o(e){t[29](e)}let i={localToReal:t[24],realToLocal:t[25],readonly:!0};return void 0!==t[12]&&(i.cropRect=t[12]),e=new fn({props:i}),u.VnY.push((()=>(0,u.akz)(e,"cropRect",o))),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,n){(0,u.yef)(e,t,n),r=!0},p(t,r){const o={};!n&&4096&r[0]&&(n=!0,o.cropRect=t[12],(0,u.hjT)((()=>n=!1))),e.$set(o)},i(t){r||((0,u.Ui)(e.$$.fragment,t),r=!0)},o(t){(0,u.etI)(e.$$.fragment,t),r=!1},d(t){(0,u.vpE)(e,t)}}}function yn(t){let e,n,r;function o(e){t[30](e)}let i={limits:t[12],localToReal:t[24],realToLocal:t[25]};return void 0!==t[13]&&(i.point=t[13]),e=new on({props:i}),u.VnY.push((()=>(0,u.akz)(e,"point",o))),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,n){(0,u.yef)(e,t,n),r=!0},p(t,r){const o={};4096&r[0]&&(o.limits=t[12]),!n&&8192&r[0]&&(n=!0,o.point=t[13],(0,u.hjT)((()=>n=!1))),e.$set(o)},i(t){r||((0,u.Ui)(e.$$.fragment,t),r=!0)},o(t){(0,u.etI)(e.$$.fragment,t),r=!1},d(t){(0,u.vpE)(e,t)}}}function wn(t){let e,n,r;function o(e){t[31](e)}let i={limits:t[12],localToReal:t[24],realToLocal:t[25],readonly:!0};return void 0!==t[13]&&(i.point=t[13]),e=new on({props:i}),u.VnY.push((()=>(0,u.akz)(e,"point",o))),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,n){(0,u.yef)(e,t,n),r=!0},p(t,r){const o={};4096&r[0]&&(o.limits=t[12]),!n&&8192&r[0]&&(n=!0,o.point=t[13],(0,u.hjT)((()=>n=!1))),e.$set(o)},i(t){r||((0,u.Ui)(e.$$.fragment,t),r=!0)},o(t){(0,u.etI)(e.$$.fragment,t),r=!1},d(t){(0,u.vpE)(e,t)}}}function In(t){let e,n;return{c(){e=(0,u.bGB)("div"),n=(0,u.fLW)("基準画像ではありません"),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0});var r=(0,u.pIy)(e);n=(0,u.Bno)(r,"基準画像ではありません"),r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","not-ref-hint svelte-arq60t")},m(t,r){(0,u.ZMF)(t,e,r),(0,u.ztY)(e,n)},d(t){t&&(0,u.ogt)(e)}}}function xn(t){let e,n,r,o,i,s,c,l,a,f,$,p;r=new be({props:{image:t[0].image}});let d=t[2]===G.RUN_CV&&t[15]&&gn(t),g=t[16]&&t[1]&&hn(t),h=t[2]===G.SET_ROI&&mn(t),m=t[17]&&vn(t),v=t[2]===G.SET_PIVOT&&yn(t),y=t[18]&&wn(t),w=t[1]&&t[2]!==G.RUN_CV&&t[1]!==t[3]&&In();return{c(){e=(0,u.bGB)("article"),n=(0,u.bGB)("div"),(0,u.YCL)(r.$$.fragment),o=(0,u.DhX)(),d&&d.c(),i=(0,u.DhX)(),g&&g.c(),s=(0,u.DhX)(),h&&h.c(),c=(0,u.DhX)(),m&&m.c(),l=(0,u.DhX)(),v&&v.c(),a=(0,u.DhX)(),y&&y.c(),f=(0,u.DhX)(),w&&w.c(),this.h()},l(t){e=(0,u.vT0)(t,"ARTICLE",{class:!0,style:!0});var $=(0,u.pIy)(e);n=(0,u.vT0)($,"DIV",{class:!0});var p=(0,u.pIy)(n);(0,u.wOw)(r.$$.fragment,p),p.forEach(u.ogt),o=(0,u.qzd)($),d&&d.l($),i=(0,u.qzd)($),g&&g.l($),s=(0,u.qzd)($),h&&h.l($),c=(0,u.qzd)($),m&&m.l($),l=(0,u.qzd)($),v&&v.l($),a=(0,u.qzd)($),y&&y.l($),f=(0,u.qzd)($),w&&w.l($),$.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(n,"class","viewer-image svelte-arq60t"),(0,u.VHj)(n,"dimmed",t[0].dimmed&&!t[0].error),(0,u.Ljt)(e,"class","viewer-body svelte-arq60t"),(0,u.Ljt)(e,"style",$=`\n        --viewer-scale: ${t[4]};\n        --viewer-offset-x: ${t[8]}px;\n        --viewer-offset-y: ${t[9]}px;\n        --viewer-width: ${t[10]}px;\n        --viewer-height: ${t[11]}px;`)},m($,I){(0,u.ZMF)($,e,I),(0,u.ztY)(e,n),(0,u.yef)(r,n,null),t[27](n),(0,u.ztY)(e,o),d&&d.m(e,null),(0,u.ztY)(e,i),g&&g.m(e,null),(0,u.ztY)(e,s),h&&h.m(e,null),(0,u.ztY)(e,c),m&&m.m(e,null),(0,u.ztY)(e,l),v&&v.m(e,null),(0,u.ztY)(e,a),y&&y.m(e,null),(0,u.ztY)(e,f),w&&w.m(e,null),p=!0},p(t,o){const I={};1&o[0]&&(I.image=t[0].image),r.$set(I),1&o[0]&&(0,u.VHj)(n,"dimmed",t[0].dimmed&&!t[0].error),t[2]===G.RUN_CV&&t[15]?d?(d.p(t,o),32772&o[0]&&(0,u.Ui)(d,1)):(d=gn(t),d.c(),(0,u.Ui)(d,1),d.m(e,i)):d&&((0,u.dvw)(),(0,u.etI)(d,1,1,(()=>{d=null})),(0,u.gbL)()),t[16]&&t[1]?g?(g.p(t,o),65538&o[0]&&(0,u.Ui)(g,1)):(g=hn(t),g.c(),(0,u.Ui)(g,1),g.m(e,s)):g&&((0,u.dvw)(),(0,u.etI)(g,1,1,(()=>{g=null})),(0,u.gbL)()),t[2]===G.SET_ROI?h?(h.p(t,o),4&o[0]&&(0,u.Ui)(h,1)):(h=mn(t),h.c(),(0,u.Ui)(h,1),h.m(e,c)):h&&((0,u.dvw)(),(0,u.etI)(h,1,1,(()=>{h=null})),(0,u.gbL)()),t[17]?m?(m.p(t,o),131072&o[0]&&(0,u.Ui)(m,1)):(m=vn(t),m.c(),(0,u.Ui)(m,1),m.m(e,l)):m&&((0,u.dvw)(),(0,u.etI)(m,1,1,(()=>{m=null})),(0,u.gbL)()),t[2]===G.SET_PIVOT?v?(v.p(t,o),4&o[0]&&(0,u.Ui)(v,1)):(v=yn(t),v.c(),(0,u.Ui)(v,1),v.m(e,a)):v&&((0,u.dvw)(),(0,u.etI)(v,1,1,(()=>{v=null})),(0,u.gbL)()),t[18]?y?(y.p(t,o),262144&o[0]&&(0,u.Ui)(y,1)):(y=wn(t),y.c(),(0,u.Ui)(y,1),y.m(e,f)):y&&((0,u.dvw)(),(0,u.etI)(y,1,1,(()=>{y=null})),(0,u.gbL)()),t[1]&&t[2]!==G.RUN_CV&&t[1]!==t[3]?w||(w=In(),w.c(),w.m(e,null)):w&&(w.d(1),w=null),(!p||3856&o[0]&&$!==($=`\n        --viewer-scale: ${t[4]};\n        --viewer-offset-x: ${t[8]}px;\n        --viewer-offset-y: ${t[9]}px;\n        --viewer-width: ${t[10]}px;\n        --viewer-height: ${t[11]}px;`))&&(0,u.Ljt)(e,"style",$)},i(t){p||((0,u.Ui)(r.$$.fragment,t),(0,u.Ui)(d),(0,u.Ui)(g),(0,u.Ui)(h),(0,u.Ui)(m),(0,u.Ui)(v),(0,u.Ui)(y),p=!0)},o(t){(0,u.etI)(r.$$.fragment,t),(0,u.etI)(d),(0,u.etI)(g),(0,u.etI)(h),(0,u.etI)(m),(0,u.etI)(v),(0,u.etI)(y),p=!1},d(n){n&&(0,u.ogt)(e),(0,u.vpE)(r),t[27](null),d&&d.d(),g&&g.d(),h&&h.d(),m&&m.d(),v&&v.d(),y&&y.d(),w&&w.d()}}}function Ln(t){let e,n;return e=new pe({props:{icon:g.u5B}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p:u.ZTd,i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function bn(t){let e,n;return e=new pe({props:{icon:g.kyT}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p:u.ZTd,i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function En(t){let e,n,r,o,i,s,c,l,a,f,$,p,d,g=t[14]&&pn(),h=t[0].processing&&un(),m=t[0].error&&dn(t);return i=new we({props:{options:{damping:1},$$slots:{default:[xn]},$$scope:{ctx:t}}}),t[32](i),l=new Je.Z({props:{title:"縮小",disabled:t[4]===Yn,$$slots:{default:[Ln]},$$scope:{ctx:t}}}),l.$on("pointerdown",t[22]),f=new Je.Z({props:{title:"拡大",disabled:t[4]===zn,$$slots:{default:[bn]},$$scope:{ctx:t}}}),f.$on("pointerdown",t[21]),{c(){e=(0,u.bGB)("div"),g&&g.c(),n=(0,u.DhX)(),h&&h.c(),r=(0,u.DhX)(),m&&m.c(),o=(0,u.DhX)(),(0,u.YCL)(i.$$.fragment),s=(0,u.DhX)(),c=(0,u.bGB)("footer"),(0,u.YCL)(l.$$.fragment),a=(0,u.DhX)(),(0,u.YCL)(f.$$.fragment),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0});var $=(0,u.pIy)(e);g&&g.l($),n=(0,u.qzd)($),h&&h.l($),r=(0,u.qzd)($),m&&m.l($),o=(0,u.qzd)($),(0,u.wOw)(i.$$.fragment,$),s=(0,u.qzd)($),c=(0,u.vT0)($,"FOOTER",{class:!0});var p=(0,u.pIy)(c);(0,u.wOw)(l.$$.fragment,p),a=(0,u.qzd)(p),(0,u.wOw)(f.$$.fragment,p),p.forEach(u.ogt),$.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(c,"class","viewer-zoom svelte-arq60t"),(0,u.Ljt)(e,"class","viewer svelte-arq60t")},m(v,y){(0,u.ZMF)(v,e,y),g&&g.m(e,null),(0,u.ztY)(e,n),h&&h.m(e,null),(0,u.ztY)(e,r),m&&m.m(e,null),(0,u.ztY)(e,o),(0,u.yef)(i,e,null),(0,u.ztY)(e,s),(0,u.ztY)(e,c),(0,u.yef)(l,c,null),(0,u.ztY)(c,a),(0,u.yef)(f,c,null),t[33](e),$=!0,p||(d=[(0,u.oLt)(window,"resize",(0,Qe.Z)(t[20],100)),(0,u.oLt)(e,"wheel",t[23])],p=!0)},p(t,s){t[14]?g||(g=pn(),g.c(),g.m(e,n)):g&&(g.d(1),g=null),t[0].processing?h||(h=un(),h.c(),h.m(e,r)):h&&(h.d(1),h=null),t[0].error?m?m.p(t,s):(m=dn(t),m.c(),m.m(e,o)):m&&(m.d(1),m=null);const c={};507807&s[0]|256&s[1]&&(c.$$scope={dirty:s,ctx:t}),i.$set(c);const a={};16&s[0]&&(a.disabled=t[4]===Yn),256&s[1]&&(a.$$scope={dirty:s,ctx:t}),l.$set(a);const $={};16&s[0]&&($.disabled=t[4]===zn),256&s[1]&&($.$$scope={dirty:s,ctx:t}),f.$set($)},i(t){$||((0,u.Ui)(i.$$.fragment,t),(0,u.Ui)(l.$$.fragment,t),(0,u.Ui)(f.$$.fragment,t),$=!0)},o(t){(0,u.etI)(i.$$.fragment,t),(0,u.etI)(l.$$.fragment,t),(0,u.etI)(f.$$.fragment,t),$=!1},d(n){n&&(0,u.ogt)(e),g&&g.d(),h&&h.d(),m&&m.d(),t[32](null),(0,u.vpE)(i),(0,u.vpE)(l),(0,u.vpE)(f),t[33](null),p=!1,(0,u.j7q)(d)}}}Yt()($n.Z,{insert:"head",singleton:!1}),$n.Z.locals;const Yn=.01,zn=3;function Tn(t,e,n){let r,o,i,l,a,f,$,p,d,g,h,m,v;(0,u.FIv)(t,gt,(t=>n(1,i=t))),(0,u.FIv)(t,mt,(t=>n(12,l=t))),(0,u.FIv)(t,ht,(t=>n(13,a=t))),(0,u.FIv)(t,ft,(t=>n(26,$=t))),(0,u.FIv)(t,at,(t=>n(3,p=t))),(0,u.FIv)(t,wt,(t=>n(14,d=t))),(0,u.FIv)(t,bt,(t=>n(15,g=t))),(0,u.FIv)(t,Lt,(t=>n(16,h=t))),(0,u.FIv)(t,It,(t=>n(17,m=t))),(0,u.FIv)(t,xt,(t=>n(18,v=t)));const{currentStep:y}=vt;(0,u.FIv)(t,y,(t=>n(2,f=t)));let w,I,x,L,b,E=0,Y=0,z=0;const T=new ge((()=>[o])),F=new ge((()=>[E]));function Z(){o&&(n(10,L=Math.round(o.width*E)),n(11,b=Math.round(o.height*E)),L<I.clientWidth?n(8,Y=Math.round((I.clientWidth-L)/2)):n(8,Y=0),b<I.clientHeight?n(9,z=Math.round((I.clientHeight-b)/2)):n(9,z=0))}function U(t,e,r){return(0,s.mG)(this,void 0,void 0,(function*(){void 0!==e&&void 0!==r||(e=I.clientWidth/2,r=I.clientHeight/2);const o=E;n(4,E=(0,c.Z)(t,Yn,zn));const i=E/o,s=yield w.getScrollbar();s.update();const l=I.getBoundingClientRect(),a=x.getBoundingClientRect(),f=e-a.left,$=r-a.top;s.setPosition(f*i-(e-l.left),$*i-(r-l.top))}))}return(0,ue.gx)((()=>{o&&I&&(T.stale()&&function(){if(!o)return;const t=.8*I.clientWidth,e=.8*I.clientHeight;n(4,E=Math.min(1,t/o.width,e/o.height))}(),F.stale()&&((0,u.fxP)(ht,a=a.clone(),a),(0,u.fxP)(mt,l=l.clone(),l)),Z())})),t.$$.update=()=>{67108878&t.$$.dirty[0]&&n(0,r=de(p,$,i,f)),1&t.$$.dirty[0]&&(o=r.image)},[r,i,f,p,E,w,I,x,Y,z,L,b,l,a,d,g,h,m,v,y,Z,function(){U(1.25*E)},function(){U(E/1.25)},function(t){if(!t.ctrlKey)return;t.stopPropagation(),t.preventDefault();const e=Math.pow(Math.E,-t.deltaY*([.01,.05,1][t.deltaMode]||.01));U(E*e,t.clientX,t.clientY)},function(t){return new q({x:(0,c.Z)(Math.round(t.x/E),0,i.width),y:(0,c.Z)(Math.round(t.y/E),0,i.height)})},function(t){return new q({x:Math.round(t.x*E),y:Math.round(t.y*E)})},$,function(t){u.VnY[t?"unshift":"push"]((()=>{x=t,n(7,x)}))},function(t){l=t,mt.set(l)},function(t){l=t,mt.set(l)},function(t){a=t,ht.set(a)},function(t){a=t,ht.set(a)},function(t){u.VnY[t?"unshift":"push"]((()=>{w=t,n(5,w)}))},function(t){u.VnY[t?"unshift":"push"]((()=>{I=t,n(6,I)}))}]}class Fn extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,Tn,En,u.AqN,{},null,[-1,-1])}}var Zn=Fn,Un=n(9825),Bn=n(4007),Dn=n(4950),On=n(627);function jn(t){let e;return{c(){e=(0,u.fLW)("各種設定")},l(t){e=(0,u.Bno)(t,"各種設定")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Mn(t){let e,n,r;return e=new pe({props:{icon:g.JdA}}),{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.fLW)("\n        タップ穴を基準にする")},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.Bno)(t,"\n        タップ穴を基準にする")},m(t,o){(0,u.yef)(e,t,o),(0,u.ZMF)(t,n,o),r=!0},p:u.ZTd,i(t){r||((0,u.Ui)(e.$$.fragment,t),r=!0)},o(t){(0,u.etI)(e.$$.fragment,t),r=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n)}}}function Cn(t){let e,n,r;return e=new pe({props:{icon:g.E14}}),{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.fLW)("\n        フレームを基準にする")},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.Bno)(t,"\n        フレームを基準にする")},m(t,o){(0,u.yef)(e,t,o),(0,u.ZMF)(t,n,o),r=!0},p:u.ZTd,i(t){r||((0,u.Ui)(e.$$.fragment,t),r=!0)},o(t){(0,u.etI)(e.$$.fragment,t),r=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n)}}}function Gn(t){let e,n,r,o;return e=new Un.W({props:{value:C.PEG_HOLE,$$slots:{default:[Mn]},$$scope:{ctx:t}}}),r=new Un.W({props:{value:C.FRAME,$$slots:{default:[Cn]},$$scope:{ctx:t}}}),{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.DhX)(),(0,u.YCL)(r.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.qzd)(t),(0,u.wOw)(r.$$.fragment,t)},m(t,i){(0,u.yef)(e,t,i),(0,u.ZMF)(t,n,i),(0,u.yef)(r,t,i),o=!0},p(t,n){const o={};134217728&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const i={};134217728&n&&(i.$$scope={dirty:n,ctx:t}),r.$set(i)},i(t){o||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(r.$$.fragment,t),o=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(r.$$.fragment,t),o=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n),(0,u.vpE)(r,t)}}}function Sn(t){let e,n;return e=new pe({props:{class:"mdc-select__icon",icon:t[1]===C.PEG_HOLE?g.JdA:g.E14,slot:"leadingIcon"}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.icon=t[1]===C.PEG_HOLE?g.JdA:g.E14),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function qn(t){let e;return{c(){e=(0,u.fLW)("元ファイルと同じ形式")},l(t){e=(0,u.Bno)(t,"元ファイルと同じ形式")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Vn(t){let e;return{c(){e=(0,u.fLW)("PNG (透過対応)")},l(t){e=(0,u.Bno)(t,"PNG (透過対応)")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Pn(t){let e;return{c(){e=(0,u.fLW)("JPEG (非透過, 高圧縮)")},l(t){e=(0,u.Bno)(t,"JPEG (非透過, 高圧縮)")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function _n(t){let e;return{c(){e=(0,u.fLW)("WebP (透過対応, 高圧縮)")},l(t){e=(0,u.Bno)(t,"WebP (透過対応, 高圧縮)")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Nn(t){let e;return{c(){e=(0,u.fLW)("TGA (透過対応, 非圧縮)")},l(t){e=(0,u.Bno)(t,"TGA (透過対応, 非圧縮)")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Wn(t){let e,n,r,o,i,s,c,l,a,f;return e=new Un.W({props:{value:z.AS_IS,$$slots:{default:[qn]},$$scope:{ctx:t}}}),r=new Un.W({props:{value:z.PNG,$$slots:{default:[Vn]},$$scope:{ctx:t}}}),i=new Un.W({props:{value:z.JPEG,$$slots:{default:[Pn]},$$scope:{ctx:t}}}),c=new Un.W({props:{value:z.WEBP,$$slots:{default:[_n]},$$scope:{ctx:t}}}),a=new Un.W({props:{value:z.TGA,$$slots:{default:[Nn]},$$scope:{ctx:t}}}),{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.DhX)(),(0,u.YCL)(r.$$.fragment),o=(0,u.DhX)(),(0,u.YCL)(i.$$.fragment),s=(0,u.DhX)(),(0,u.YCL)(c.$$.fragment),l=(0,u.DhX)(),(0,u.YCL)(a.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.qzd)(t),(0,u.wOw)(r.$$.fragment,t),o=(0,u.qzd)(t),(0,u.wOw)(i.$$.fragment,t),s=(0,u.qzd)(t),(0,u.wOw)(c.$$.fragment,t),l=(0,u.qzd)(t),(0,u.wOw)(a.$$.fragment,t)},m(t,$){(0,u.yef)(e,t,$),(0,u.ZMF)(t,n,$),(0,u.yef)(r,t,$),(0,u.ZMF)(t,o,$),(0,u.yef)(i,t,$),(0,u.ZMF)(t,s,$),(0,u.yef)(c,t,$),(0,u.ZMF)(t,l,$),(0,u.yef)(a,t,$),f=!0},p(t,n){const o={};134217728&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const s={};134217728&n&&(s.$$scope={dirty:n,ctx:t}),r.$set(s);const l={};134217728&n&&(l.$$scope={dirty:n,ctx:t}),i.$set(l);const f={};134217728&n&&(f.$$scope={dirty:n,ctx:t}),c.$set(f);const $={};134217728&n&&($.$$scope={dirty:n,ctx:t}),a.$set($)},i(t){f||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(r.$$.fragment,t),(0,u.Ui)(i.$$.fragment,t),(0,u.Ui)(c.$$.fragment,t),(0,u.Ui)(a.$$.fragment,t),f=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(r.$$.fragment,t),(0,u.etI)(i.$$.fragment,t),(0,u.etI)(c.$$.fragment,t),(0,u.etI)(a.$$.fragment,t),f=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n),(0,u.vpE)(r,t),t&&(0,u.ogt)(o),(0,u.vpE)(i,t),t&&(0,u.ogt)(s),(0,u.vpE)(c,t),t&&(0,u.ogt)(l),(0,u.vpE)(a,t)}}}function Xn(t){let e,n="{filename} - 元ファイル名, {index} - 連番";return{c(){e=(0,u.fLW)(n)},l(t){e=(0,u.Bno)(t,n)},m(t,n){(0,u.ZMF)(t,e,n)},p:u.ZTd,d(t){t&&(0,u.ogt)(e)}}}function An(t){let e,n;return e=new Bn.Z({props:{slot:"helper",persistent:!0,$$slots:{default:[Xn]},$$scope:{ctx:t}}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,n){const r={};134217728&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function kn(t){let e,n,r,o,i,s,c,l,a,f,$,p,d,g,h,m,v,y=U(t[3])+"";function w(e){t[12](e)}let I={label:"位置合わせ方式",variant:"outlined",$$slots:{leadingIcon:[Sn],default:[Gn]},$$scope:{ctx:t}};function x(e){t[13](e)}void 0!==t[1]&&(I.value=t[1]),n=new Un.Z({props:I}),u.VnY.push((()=>(0,u.akz)(n,"value",w)));let L={label:"出力ファイル形式",variant:"outlined",$$slots:{default:[Wn]},$$scope:{ctx:t}};function b(e){t[14](e)}void 0!==t[3]&&(L.value=t[3]),s=new Un.Z({props:L}),u.VnY.push((()=>(0,u.akz)(s,"value",x)));let E={style:"width: 100%;",label:"出力ファイル名テンプレート",variant:"outlined",$$slots:{helper:[An]},$$scope:{ctx:t}};return void 0!==t[2]&&(E.value=t[2]),$=new Dn.ZP({props:E}),u.VnY.push((()=>(0,u.akz)($,"value",b))),{c(){e=(0,u.bGB)("div"),(0,u.YCL)(n.$$.fragment),o=(0,u.DhX)(),i=(0,u.bGB)("div"),(0,u.YCL)(s.$$.fragment),l=(0,u.DhX)(),a=(0,u.bGB)("div"),f=(0,u.bGB)("div"),(0,u.YCL)($.$$.fragment),d=(0,u.DhX)(),g=(0,u.bGB)("span"),h=(0,u.fLW)("."),m=(0,u.fLW)(y),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0});var r=(0,u.pIy)(e);(0,u.wOw)(n.$$.fragment,r),r.forEach(u.ogt),o=(0,u.qzd)(t),i=(0,u.vT0)(t,"DIV",{class:!0});var c=(0,u.pIy)(i);(0,u.wOw)(s.$$.fragment,c),c.forEach(u.ogt),l=(0,u.qzd)(t),a=(0,u.vT0)(t,"DIV",{class:!0});var p=(0,u.pIy)(a);f=(0,u.vT0)(p,"DIV",{class:!0});var v=(0,u.pIy)(f);(0,u.wOw)($.$$.fragment,v),v.forEach(u.ogt),d=(0,u.qzd)(p),g=(0,u.vT0)(p,"SPAN",{class:!0});var w=(0,u.pIy)(g);h=(0,u.Bno)(w,"."),m=(0,u.Bno)(w,y),w.forEach(u.ogt),p.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","section svelte-9efnli"),(0,u.Ljt)(i,"class","section svelte-9efnli"),(0,u.Ljt)(f,"class","filename-input svelte-9efnli"),(0,u.Ljt)(g,"class","svelte-9efnli"),(0,u.Ljt)(a,"class","section filename-section svelte-9efnli")},m(t,r){(0,u.ZMF)(t,e,r),(0,u.yef)(n,e,null),(0,u.ZMF)(t,o,r),(0,u.ZMF)(t,i,r),(0,u.yef)(s,i,null),(0,u.ZMF)(t,l,r),(0,u.ZMF)(t,a,r),(0,u.ztY)(a,f),(0,u.yef)($,f,null),(0,u.ztY)(a,d),(0,u.ztY)(a,g),(0,u.ztY)(g,h),(0,u.ztY)(g,m),v=!0},p(t,e){const o={};134217730&e&&(o.$$scope={dirty:e,ctx:t}),!r&&2&e&&(r=!0,o.value=t[1],(0,u.hjT)((()=>r=!1))),n.$set(o);const i={};134217728&e&&(i.$$scope={dirty:e,ctx:t}),!c&&8&e&&(c=!0,i.value=t[3],(0,u.hjT)((()=>c=!1))),s.$set(i);const l={};134217728&e&&(l.$$scope={dirty:e,ctx:t}),!p&&4&e&&(p=!0,l.value=t[2],(0,u.hjT)((()=>p=!1))),$.$set(l),(!v||8&e)&&y!==(y=U(t[3])+"")&&(0,u.rTO)(m,y)},i(t){v||((0,u.Ui)(n.$$.fragment,t),(0,u.Ui)(s.$$.fragment,t),(0,u.Ui)($.$$.fragment,t),v=!0)},o(t){(0,u.etI)(n.$$.fragment,t),(0,u.etI)(s.$$.fragment,t),(0,u.etI)($.$$.fragment,t),v=!1},d(t){t&&(0,u.ogt)(e),(0,u.vpE)(n),t&&(0,u.ogt)(o),t&&(0,u.ogt)(i),(0,u.vpE)(s),t&&(0,u.ogt)(l),t&&(0,u.ogt)(a),(0,u.vpE)($)}}}function Rn(t){let e;return{c(){e=(0,u.fLW)("閉じる")},l(t){e=(0,u.Bno)(t,"閉じる")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Hn(t){let e;return{c(){e=(0,u.fLW)("適用")},l(t){e=(0,u.Bno)(t,"適用")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Qn(t){let e,n,r,o;return e=new y.ZP({props:{$$slots:{default:[Rn]},$$scope:{ctx:t}}}),r=new y.ZP({props:{$$slots:{default:[Hn]},$$scope:{ctx:t}}}),r.$on("click",t[9]),{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.DhX)(),(0,u.YCL)(r.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.qzd)(t),(0,u.wOw)(r.$$.fragment,t)},m(t,i){(0,u.yef)(e,t,i),(0,u.ZMF)(t,n,i),(0,u.yef)(r,t,i),o=!0},p(t,n){const o={};134217728&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const i={};134217728&n&&(i.$$scope={dirty:n,ctx:t}),r.$set(i)},i(t){o||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(r.$$.fragment,t),o=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(r.$$.fragment,t),o=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n),(0,u.vpE)(r,t)}}}function Jn(t){let e,n,r,o,i,s;return e=new m.Dx({props:{$$slots:{default:[jn]},$$scope:{ctx:t}}}),r=new m.VY({props:{$$slots:{default:[kn]},$$scope:{ctx:t}}}),i=new m.eX({props:{$$slots:{default:[Qn]},$$scope:{ctx:t}}}),{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.DhX)(),(0,u.YCL)(r.$$.fragment),o=(0,u.DhX)(),(0,u.YCL)(i.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.qzd)(t),(0,u.wOw)(r.$$.fragment,t),o=(0,u.qzd)(t),(0,u.wOw)(i.$$.fragment,t)},m(t,c){(0,u.yef)(e,t,c),(0,u.ZMF)(t,n,c),(0,u.yef)(r,t,c),(0,u.ZMF)(t,o,c),(0,u.yef)(i,t,c),s=!0},p(t,n){const o={};134217728&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const s={};134217742&n&&(s.$$scope={dirty:n,ctx:t}),r.$set(s);const c={};134217728&n&&(c.$$scope={dirty:n,ctx:t}),i.$set(c)},i(t){s||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(r.$$.fragment,t),(0,u.Ui)(i.$$.fragment,t),s=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(r.$$.fragment,t),(0,u.etI)(i.$$.fragment,t),s=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n),(0,u.vpE)(r,t),t&&(0,u.ogt)(o),(0,u.vpE)(i,t)}}}function Kn(t){let e,n,r,o,i,s;return n=new pe({props:{icon:g.uQd}}),{c(){e=(0,u.bGB)("span"),(0,u.YCL)(n.$$.fragment),this.h()},l(t){e=(0,u.vT0)(t,"SPAN",{class:!0,title:!0});var r=(0,u.pIy)(e);(0,u.wOw)(n.$$.fragment,r),r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","icon toggle-fit-frame svelte-9efnli"),(0,u.Ljt)(e,"title",r=t[4]?"フレームサイズ合わせ OFF":"フレームサイズ合わせ ON"),(0,u.VHj)(e,"disabled",!t[4])},m(r,c){(0,u.ZMF)(r,e,c),(0,u.yef)(n,e,null),o=!0,i||(s=(0,u.oLt)(e,"click",t[11]),i=!0)},p(t,n){(!o||16&n&&r!==(r=t[4]?"フレームサイズ合わせ OFF":"フレームサイズ合わせ ON"))&&(0,u.Ljt)(e,"title",r),16&n&&(0,u.VHj)(e,"disabled",!t[4])},i(t){o||((0,u.Ui)(n.$$.fragment,t),o=!0)},o(t){(0,u.etI)(n.$$.fragment,t),o=!1},d(t){t&&(0,u.ogt)(e),(0,u.vpE)(n),i=!1,s()}}}function tr(t){let e,n,r,o,i,s,c,l,a,f,$,p,d,h,m,v,y;function w(e){t[15](e)}let I={id:"mode-dialog",$$slots:{default:[Jn]},$$scope:{ctx:t}};void 0!==t[0]&&(I.open=t[0]),e=new T({props:I}),u.VnY.push((()=>(0,u.akz)(e,"open",w))),e.$on("MDCDialog:closed",t[16]),s=new pe({props:{icon:g.Shd}});let x=t[6]===C.FRAME&&Kn(t);return f=new pe({props:{icon:g.Dng}}),h=new pe({props:{icon:g.LcO}}),{c(){(0,u.YCL)(e.$$.fragment),r=(0,u.DhX)(),o=(0,u.bGB)("div"),i=(0,u.bGB)("span"),(0,u.YCL)(s.$$.fragment),c=(0,u.DhX)(),x&&x.c(),l=(0,u.DhX)(),a=(0,u.bGB)("span"),(0,u.YCL)(f.$$.fragment),p=(0,u.DhX)(),d=(0,u.bGB)("a"),(0,u.YCL)(h.$$.fragment),this.h()},l(t){(0,u.wOw)(e.$$.fragment,t),r=(0,u.qzd)(t),o=(0,u.vT0)(t,"DIV",{class:!0});var n=(0,u.pIy)(o);i=(0,u.vT0)(n,"SPAN",{class:!0,title:!0});var $=(0,u.pIy)(i);(0,u.wOw)(s.$$.fragment,$),$.forEach(u.ogt),c=(0,u.qzd)(n),x&&x.l(n),l=(0,u.qzd)(n),a=(0,u.vT0)(n,"SPAN",{class:!0,title:!0});var g=(0,u.pIy)(a);(0,u.wOw)(f.$$.fragment,g),g.forEach(u.ogt),p=(0,u.qzd)(n),d=(0,u.vT0)(n,"A",{class:!0,href:!0,target:!0});var m=(0,u.pIy)(d);(0,u.wOw)(h.$$.fragment,m),m.forEach(u.ogt),n.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(i,"class","icon change-mode svelte-9efnli"),(0,u.Ljt)(i,"title","各種設定"),(0,u.Ljt)(a,"class","icon toggle-debug svelte-9efnli"),(0,u.Ljt)(a,"title",$=t[5]?"デバッグモード OFF":"デバッグモード ON"),(0,u.VHj)(a,"disabled",!t[5]),(0,u.Ljt)(d,"class","icon github svelte-9efnli"),(0,u.Ljt)(d,"href","https://github.com/textcunma/keyframe-refiner"),(0,u.Ljt)(d,"target","_blank"),(0,u.Ljt)(o,"class","settings")},m(n,$){(0,u.yef)(e,n,$),(0,u.ZMF)(n,r,$),(0,u.ZMF)(n,o,$),(0,u.ztY)(o,i),(0,u.yef)(s,i,null),(0,u.ztY)(o,c),x&&x.m(o,null),(0,u.ztY)(o,l),(0,u.ztY)(o,a),(0,u.yef)(f,a,null),(0,u.ztY)(o,p),(0,u.ztY)(o,d),(0,u.yef)(h,d,null),m=!0,v||(y=[(0,u.oLt)(i,"click",t[8]),(0,u.oLt)(a,"click",t[10])],v=!0)},p(t,[r]){const i={};134217742&r&&(i.$$scope={dirty:r,ctx:t}),!n&&1&r&&(n=!0,i.open=t[0],(0,u.hjT)((()=>n=!1))),e.$set(i),t[6]===C.FRAME?x?(x.p(t,r),64&r&&(0,u.Ui)(x,1)):(x=Kn(t),x.c(),(0,u.Ui)(x,1),x.m(o,l)):x&&((0,u.dvw)(),(0,u.etI)(x,1,1,(()=>{x=null})),(0,u.gbL)()),(!m||32&r&&$!==($=t[5]?"デバッグモード OFF":"デバッグモード ON"))&&(0,u.Ljt)(a,"title",$),32&r&&(0,u.VHj)(a,"disabled",!t[5])},i(t){m||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(s.$$.fragment,t),(0,u.Ui)(x),(0,u.Ui)(f.$$.fragment,t),(0,u.Ui)(h.$$.fragment,t),m=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(s.$$.fragment,t),(0,u.etI)(x),(0,u.etI)(f.$$.fragment,t),(0,u.etI)(h.$$.fragment,t),m=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(r),t&&(0,u.ogt)(o),(0,u.vpE)(s),x&&x.d(),(0,u.vpE)(f),(0,u.vpE)(h),v=!1,(0,u.j7q)(y)}}}function er(t,e,n){let r,o,i,s,c,l,a,f,$,p,d,g;(0,u.FIv)(t,dt,(t=>n(4,r=t))),(0,u.FIv)(t,it,(t=>n(5,o=t))),(0,u.FIv)(t,yt,(t=>n(17,i=t))),(0,u.FIv)(t,ct,(t=>n(19,c=t))),(0,u.FIv)(t,gt,(t=>n(20,l=t))),(0,u.FIv)(t,It,(t=>n(21,a=t))),(0,u.FIv)(t,xt,(t=>n(22,f=t))),(0,u.FIv)(t,Lt,(t=>n(23,$=t))),(0,u.FIv)(t,$t,(t=>n(6,p=t))),(0,u.FIv)(t,ut,(t=>n(24,d=t))),(0,u.FIv)(t,pt,(t=>n(25,g=t)));let{openDialog:h=!1}=e;const{currentStep:m}=vt;(0,u.FIv)(t,m,(t=>n(18,s=t)));let v=p,y=g,w=d;function I(){s===G.RUN_CV&&((0,u.fxP)(m,s=G.SET_PIVOT,s),(0,u.fxP)(m,s=G.RUN_CV,s),(0,u.fxP)(ct,c=c.clear(),c))}return t.$$set=t=>{"openDialog"in t&&n(0,h=t.openDialog)},[h,v,y,w,r,o,p,m,function(){n(0,h=!0),n(1,v=p),n(2,y=g),n(3,w=d)},function(){(0,u.fxP)(pt,g=y,g),(0,u.fxP)(ut,d=w,d),v!==p&&(v===C.PEG_HOLE&&(0,u.fxP)(dt,r=!1,r),(0,u.fxP)($t,p=v,p),(0,u.fxP)(Lt,$=!1,$),(0,u.fxP)(xt,f=!1,f),(0,u.fxP)(It,a=!1,a),(0,u.fxP)(gt,l=void 0,l),(0,u.fxP)(ct,c=c.clear(),c),(0,u.fxP)(m,s=vt.hasFinished(G.OPEN_IMAGES)?G.SELECT_REF_IMAGE:G.OPEN_IMAGES,s))},function(){(0,u.fxP)(it,o=!o,o),i.setDebugMode(o),I()},function(){(0,u.fxP)(dt,r=!r,r),I()},function(t){v=t,n(1,v)},function(t){w=t,n(3,w)},function(t){y=t,n(2,y)},function(t){h=t,n(0,h)},()=>{n(1,v=p)}]}Yt()(On.Z,{insert:"head",singleton:!1}),On.Z.locals;class nr extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,er,tr,u.AqN,{openDialog:0})}}var rr=nr,or=n(6006);function ir(t){let e,n;return e=new be({props:{image:t[2]}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.image=t[2]),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function sr(t){let e,n,r,o,i,s,c,l,a,f,$,p,d,g,h,m,v,y,w,I,x,L,b,E,Y,z,T=(t[2]?.filetype||"N/A")+"";function F(t,e){return t[2]?lr:cr}let Z=F(t),U=Z(t);function B(t,e){return t[2]?.width&&t[2]?.width?pr:$r}let D=B(t),O=D(t);function j(t,e){return t[6]&&t[5]?dr:ur}let M=j(t),C=M(t);return{c(){e=(0,u.bGB)("table"),n=(0,u.bGB)("tbody"),r=(0,u.bGB)("tr"),o=(0,u.bGB)("td"),i=(0,u.fLW)("ファイル名"),s=(0,u.DhX)(),c=(0,u.bGB)("td"),U.c(),l=(0,u.DhX)(),a=(0,u.bGB)("tr"),f=(0,u.bGB)("td"),$=(0,u.fLW)("大きさ"),p=(0,u.DhX)(),d=(0,u.bGB)("td"),O.c(),g=(0,u.DhX)(),h=(0,u.bGB)("tr"),m=(0,u.bGB)("td"),v=(0,u.fLW)("解像度"),y=(0,u.DhX)(),w=(0,u.bGB)("td"),C.c(),I=(0,u.DhX)(),x=(0,u.bGB)("tr"),L=(0,u.bGB)("td"),b=(0,u.fLW)("メディアタイプ"),E=(0,u.DhX)(),Y=(0,u.bGB)("td"),z=(0,u.fLW)(T),this.h()},l(t){e=(0,u.vT0)(t,"TABLE",{class:!0});var F=(0,u.pIy)(e);n=(0,u.vT0)(F,"TBODY",{});var Z=(0,u.pIy)(n);r=(0,u.vT0)(Z,"TR",{});var B=(0,u.pIy)(r);o=(0,u.vT0)(B,"TD",{});var D=(0,u.pIy)(o);i=(0,u.Bno)(D,"ファイル名"),D.forEach(u.ogt),s=(0,u.qzd)(B),c=(0,u.vT0)(B,"TD",{});var j=(0,u.pIy)(c);U.l(j),j.forEach(u.ogt),B.forEach(u.ogt),l=(0,u.qzd)(Z),a=(0,u.vT0)(Z,"TR",{});var M=(0,u.pIy)(a);f=(0,u.vT0)(M,"TD",{});var G=(0,u.pIy)(f);$=(0,u.Bno)(G,"大きさ"),G.forEach(u.ogt),p=(0,u.qzd)(M),d=(0,u.vT0)(M,"TD",{});var S=(0,u.pIy)(d);O.l(S),S.forEach(u.ogt),M.forEach(u.ogt),g=(0,u.qzd)(Z),h=(0,u.vT0)(Z,"TR",{});var q=(0,u.pIy)(h);m=(0,u.vT0)(q,"TD",{});var V=(0,u.pIy)(m);v=(0,u.Bno)(V,"解像度"),V.forEach(u.ogt),y=(0,u.qzd)(q),w=(0,u.vT0)(q,"TD",{});var P=(0,u.pIy)(w);C.l(P),P.forEach(u.ogt),q.forEach(u.ogt),I=(0,u.qzd)(Z),x=(0,u.vT0)(Z,"TR",{});var _=(0,u.pIy)(x);L=(0,u.vT0)(_,"TD",{});var N=(0,u.pIy)(L);b=(0,u.Bno)(N,"メディアタイプ"),N.forEach(u.ogt),E=(0,u.qzd)(_),Y=(0,u.vT0)(_,"TD",{});var W=(0,u.pIy)(Y);z=(0,u.Bno)(W,T),W.forEach(u.ogt),_.forEach(u.ogt),Z.forEach(u.ogt),F.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","svelte-15j0nr4")},m(t,T){(0,u.ZMF)(t,e,T),(0,u.ztY)(e,n),(0,u.ztY)(n,r),(0,u.ztY)(r,o),(0,u.ztY)(o,i),(0,u.ztY)(r,s),(0,u.ztY)(r,c),U.m(c,null),(0,u.ztY)(n,l),(0,u.ztY)(n,a),(0,u.ztY)(a,f),(0,u.ztY)(f,$),(0,u.ztY)(a,p),(0,u.ztY)(a,d),O.m(d,null),(0,u.ztY)(n,g),(0,u.ztY)(n,h),(0,u.ztY)(h,m),(0,u.ztY)(m,v),(0,u.ztY)(h,y),(0,u.ztY)(h,w),C.m(w,null),(0,u.ztY)(n,I),(0,u.ztY)(n,x),(0,u.ztY)(x,L),(0,u.ztY)(L,b),(0,u.ztY)(x,E),(0,u.ztY)(x,Y),(0,u.ztY)(Y,z)},p(t,e){Z===(Z=F(t))&&U?U.p(t,e):(U.d(1),U=Z(t),U&&(U.c(),U.m(c,null))),D===(D=B(t))&&O?O.p(t,e):(O.d(1),O=D(t),O&&(O.c(),O.m(d,null))),M===(M=j(t))&&C?C.p(t,e):(C.d(1),C=M(t),C&&(C.c(),C.m(w,null))),4&e&&T!==(T=(t[2]?.filetype||"N/A")+"")&&(0,u.rTO)(z,T)},d(t){t&&(0,u.ogt)(e),U.d(),O.d(),C.d()}}}function cr(t){let e;return{c(){e=(0,u.fLW)("N/A")},l(t){e=(0,u.Bno)(t,"N/A")},m(t,n){(0,u.ZMF)(t,e,n)},p:u.ZTd,d(t){t&&(0,u.ogt)(e)}}}function lr(t){let e;function n(t,e){return t[3]?fr:ar}let r=n(t),o=r(t);return{c(){o.c(),e=(0,u.cSb)()},l(t){o.l(t),e=(0,u.cSb)()},m(t,n){o.m(t,n),(0,u.ZMF)(t,e,n)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&(0,u.ogt)(e)}}}function ar(t){let e,n,r,o,i,s,c,l;return{c(){e=(0,u.bGB)("div"),n=(0,u.bGB)("input"),r=(0,u.DhX)(),o=(0,u.bGB)("span"),i=(0,u.fLW)("."),s=(0,u.fLW)(t[4]),this.h()},l(c){e=(0,u.vT0)(c,"DIV",{class:!0});var l=(0,u.pIy)(e);n=(0,u.vT0)(l,"INPUT",{type:!0,class:!0}),r=(0,u.qzd)(l),o=(0,u.vT0)(l,"SPAN",{class:!0});var a=(0,u.pIy)(o);i=(0,u.Bno)(a,"."),s=(0,u.Bno)(a,t[4]),a.forEach(u.ogt),l.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(n,"type","text"),(0,u.Ljt)(n,"class","svelte-15j0nr4"),(0,u.Ljt)(o,"class","svelte-15j0nr4"),(0,u.Ljt)(e,"class","rename svelte-15j0nr4")},m(a,f){(0,u.ZMF)(a,e,f),(0,u.ztY)(e,n),(0,u.BmG)(n,t[7]),(0,u.ztY)(e,r),(0,u.ztY)(e,o),(0,u.ztY)(o,i),(0,u.ztY)(o,s),c||(l=[(0,u.oLt)(n,"input",t[14]),(0,u.oLt)(n,"input",t[15]),(0,u.oLt)(n,"keydown",(0,u.XET)(t[13]))],c=!0)},p(t,e){128&e&&n.value!==t[7]&&(0,u.BmG)(n,t[7]),16&e&&(0,u.rTO)(s,t[4])},d(t){t&&(0,u.ogt)(e),c=!1,(0,u.j7q)(l)}}}function fr(t){let e,n,r=t[2].filename+"";return{c(){e=(0,u.bGB)("span"),n=(0,u.fLW)(r)},l(t){e=(0,u.vT0)(t,"SPAN",{});var o=(0,u.pIy)(e);n=(0,u.Bno)(o,r),o.forEach(u.ogt)},m(t,r){(0,u.ZMF)(t,e,r),(0,u.ztY)(e,n)},p(t,e){4&e&&r!==(r=t[2].filename+"")&&(0,u.rTO)(n,r)},d(t){t&&(0,u.ogt)(e)}}}function $r(t){let e;return{c(){e=(0,u.fLW)("N/A")},l(t){e=(0,u.Bno)(t,"N/A")},m(t,n){(0,u.ZMF)(t,e,n)},p:u.ZTd,d(t){t&&(0,u.ogt)(e)}}}function pr(t){let e,n,r,o=t[2].width+"",i=t[2].height+"";return{c(){e=(0,u.fLW)(o),n=(0,u.fLW)(" × "),r=(0,u.fLW)(i)},l(t){e=(0,u.Bno)(t,o),n=(0,u.Bno)(t," × "),r=(0,u.Bno)(t,i)},m(t,o){(0,u.ZMF)(t,e,o),(0,u.ZMF)(t,n,o),(0,u.ZMF)(t,r,o)},p(t,n){4&n&&o!==(o=t[2].width+"")&&(0,u.rTO)(e,o),4&n&&i!==(i=t[2].height+"")&&(0,u.rTO)(r,i)},d(t){t&&(0,u.ogt)(e),t&&(0,u.ogt)(n),t&&(0,u.ogt)(r)}}}function ur(t){let e;return{c(){e=(0,u.fLW)("N/A")},l(t){e=(0,u.Bno)(t,"N/A")},m(t,n){(0,u.ZMF)(t,e,n)},p:u.ZTd,d(t){t&&(0,u.ogt)(e)}}}function dr(t){let e,n,r,o=Math.floor(t[6][0]/t[6][1])+"",i=Math.floor(t[5][0]/t[5][1])+"";return{c(){e=(0,u.fLW)(o),n=(0,u.fLW)(" × "),r=(0,u.fLW)(i)},l(t){e=(0,u.Bno)(t,o),n=(0,u.Bno)(t," × "),r=(0,u.Bno)(t,i)},m(t,o){(0,u.ZMF)(t,e,o),(0,u.ZMF)(t,n,o),(0,u.ZMF)(t,r,o)},p(t,n){64&n&&o!==(o=Math.floor(t[6][0]/t[6][1])+"")&&(0,u.rTO)(e,o),32&n&&i!==(i=Math.floor(t[5][0]/t[5][1])+"")&&(0,u.rTO)(r,i)},d(t){t&&(0,u.ogt)(e),t&&(0,u.ogt)(n),t&&(0,u.ogt)(r)}}}function gr(t){let e,n,r,o=t[0]&&t[2]&&ir(t),i=(t[2]||t[1])&&sr(t);return{c(){e=(0,u.bGB)("div"),o&&o.c(),n=(0,u.DhX)(),i&&i.c(),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0});var r=(0,u.pIy)(e);o&&o.l(r),n=(0,u.qzd)(r),i&&i.l(r),r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","image-info svelte-15j0nr4")},m(t,s){(0,u.ZMF)(t,e,s),o&&o.m(e,null),(0,u.ztY)(e,n),i&&i.m(e,null),r=!0},p(t,[r]){t[0]&&t[2]?o?(o.p(t,r),5&r&&(0,u.Ui)(o,1)):(o=ir(t),o.c(),(0,u.Ui)(o,1),o.m(e,n)):o&&((0,u.dvw)(),(0,u.etI)(o,1,1,(()=>{o=null})),(0,u.gbL)()),t[2]||t[1]?i?i.p(t,r):(i=sr(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i(t){r||((0,u.Ui)(o),r=!0)},o(t){(0,u.etI)(o),r=!1},d(t){t&&(0,u.ogt)(e),o&&o.d(),i&&i.d()}}}function hr(t,e,n){let r,o,i,s;var c,l,a;let{preview:f=!1}=e,{allowEmpty:$=!1}=e,{image:p}=e,{readonly:d=!0}=e,{onRename:g}=e;function h(t){d||null==g||g(t?`${t}.${o}`:(null==p?void 0:p.filename)||"")}return t.$$set=t=>{"preview"in t&&n(0,f=t.preview),"allowEmpty"in t&&n(1,$=t.allowEmpty),"image"in t&&n(2,p=t.image),"readonly"in t&&n(3,d=t.readonly),"onRename"in t&&n(9,g=t.onRename)},t.$$.update=()=>{4&t.$$.dirty&&n(7,r=(null==p?void 0:p.filename.replace(/\.[^/.]+$/,""))||""),1028&t.$$.dirty&&n(4,o=null===n(10,c=null==p?void 0:p.filename.split(".").pop())||void 0===c?void 0:c.toLowerCase()),2052&t.$$.dirty&&n(6,i=null===n(11,l=null==p?void 0:p.exif)||void 0===l?void 0:l["0th"][Z().ImageIFD.XResolution]),4100&t.$$.dirty&&n(5,s=null===n(12,a=null==p?void 0:p.exif)||void 0===a?void 0:a["0th"][Z().ImageIFD.XResolution])},[f,$,p,d,o,s,i,r,h,g,c,l,a,function(e){u.cKT.call(this,t,e)},function(){r=this.value,n(7,r),n(2,p)},t=>h(t.target.value)]}Yt()(or.Z,{insert:"head",singleton:!1}),or.Z.locals;class mr extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,hr,gr,u.AqN,{preview:0,allowEmpty:1,image:2,readonly:3,onRename:9})}}var vr=mr,yr=n(5642);Yt()(yr.Z,{insert:"head",singleton:!1}),yr.Z.locals;const wr=t=>({}),Ir=t=>({}),xr=t=>({}),Lr=t=>({});function br(t){let e,n,r;return n=new pe({props:{icon:g.zrb}}),{c(){e=(0,u.bGB)("span"),(0,u.YCL)(n.$$.fragment),this.h()},l(t){e=(0,u.vT0)(t,"SPAN",{class:!0});var r=(0,u.pIy)(e);(0,u.wOw)(n.$$.fragment,r),r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","drawer-toggle svelte-1n1y0r3")},m(t,o){(0,u.ZMF)(t,e,o),(0,u.yef)(n,e,null),r=!0},p:u.ZTd,i(t){r||((0,u.Ui)(n.$$.fragment,t),r=!0)},o(t){(0,u.etI)(n.$$.fragment,t),r=!1},d(t){t&&(0,u.ogt)(e),(0,u.vpE)(n)}}}function Er(t){let e,n,r,o,i,s,c,l,a,f,$=!t[1]&&br();const p=t[7].title,d=(0,u.nuO)(p,t,t[6],Lr),g=t[7].body,h=(0,u.nuO)(g,t,t[6],Ir);return{c(){e=(0,u.bGB)("section"),n=(0,u.bGB)("header"),$&&$.c(),r=(0,u.DhX)(),d&&d.c(),o=(0,u.DhX)(),i=(0,u.bGB)("article"),s=(0,u.bGB)("div"),h&&h.c(),this.h()},l(t){e=(0,u.vT0)(t,"SECTION",{class:!0});var c=(0,u.pIy)(e);n=(0,u.vT0)(c,"HEADER",{class:!0});var l=(0,u.pIy)(n);$&&$.l(l),r=(0,u.qzd)(l),d&&d.l(l),l.forEach(u.ogt),o=(0,u.qzd)(c),i=(0,u.vT0)(c,"ARTICLE",{class:!0,style:!0});var a=(0,u.pIy)(i);s=(0,u.vT0)(a,"DIV",{class:!0});var f=(0,u.pIy)(s);h&&h.l(f),f.forEach(u.ogt),a.forEach(u.ogt),c.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(n,"class","drawer-header svelte-1n1y0r3"),(0,u.Ljt)(s,"class","drawer-body-wrapper svelte-1n1y0r3"),(0,u.Ljt)(i,"class","drawer-body svelte-1n1y0r3"),(0,u.Ljt)(i,"style",c=`height: ${t[0]?t[4]:0}px`),(0,u.Ljt)(e,"class","drawer svelte-1n1y0r3"),(0,u.VHj)(e,"open",t[0]),(0,u.VHj)(e,"freeze",t[1]),(0,u.VHj)(e,"highlight",t[2])},m(c,p){(0,u.ZMF)(c,e,p),(0,u.ztY)(e,n),$&&$.m(n,null),(0,u.ztY)(n,r),d&&d.m(n,null),(0,u.ztY)(e,o),(0,u.ztY)(e,i),(0,u.ztY)(i,s),h&&h.m(s,null),t[8](s),l=!0,a||(f=(0,u.oLt)(n,"click",t[5]),a=!0)},p(t,[o]){t[1]?$&&((0,u.dvw)(),(0,u.etI)($,1,1,(()=>{$=null})),(0,u.gbL)()):$?($.p(t,o),2&o&&(0,u.Ui)($,1)):($=br(),$.c(),(0,u.Ui)($,1),$.m(n,r)),d&&d.p&&(!l||64&o)&&(0,u.kmG)(d,p,t,t[6],l?(0,u.u2N)(p,t[6],o,xr):(0,u.VOJ)(t[6]),Lr),h&&h.p&&(!l||64&o)&&(0,u.kmG)(h,g,t,t[6],l?(0,u.u2N)(g,t[6],o,wr):(0,u.VOJ)(t[6]),Ir),(!l||17&o&&c!==(c=`height: ${t[0]?t[4]:0}px`))&&(0,u.Ljt)(i,"style",c),1&o&&(0,u.VHj)(e,"open",t[0]),2&o&&(0,u.VHj)(e,"freeze",t[1]),4&o&&(0,u.VHj)(e,"highlight",t[2])},i(t){l||((0,u.Ui)($),(0,u.Ui)(d,t),(0,u.Ui)(h,t),l=!0)},o(t){(0,u.etI)($),(0,u.etI)(d,t),(0,u.etI)(h,t),l=!1},d(n){n&&(0,u.ogt)(e),$&&$.d(),d&&d.d(n),h&&h.d(n),t[8](null),a=!1,f()}}}function Yr(t,e,n){let{$$slots:r={},$$scope:o}=e,{open:i=!0}=e,{freeze:c=!1}=e,{highlight:l=!1}=e;const a=new ge((()=>[l]));let f,$,p,d;return(0,ue.ed)("getScrollbar")&&(d=(0,ue.fw)("getScrollbar")),(0,ue.H3)((()=>{"function"==typeof ResizeObserver&&($=new ResizeObserver((()=>{n(4,p=f.scrollHeight)})),$.observe(f))})),(0,ue.ev)((()=>{null==$||$.disconnect()})),(0,ue.gx)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){a.stale()&&l&&(yield d()).scrollIntoView(f)})))),t.$$set=t=>{"open"in t&&n(0,i=t.open),"freeze"in t&&n(1,c=t.freeze),"highlight"in t&&n(2,l=t.highlight),"$$scope"in t&&n(6,o=t.$$scope)},[i,c,l,f,p,function(){c||n(0,i=!i)},o,r,function(t){u.VnY[t?"unshift":"push"]((()=>{f=t,n(3,f)}))}]}class zr extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,Yr,Er,u.AqN,{open:0,freeze:1,highlight:2})}}var Tr=zr,Fr=n(4188);function Zr(t){let e,n,r,o,i,s,c,l,a,f;return s=new pe({props:{icon:t[1]?g._VZ:g.qS7}}),{c(){e=(0,u.bGB)("span"),n=(0,u.fLW)("元画像"),r=(0,u.DhX)(),o=(0,u.bGB)("div"),i=(0,u.bGB)("span"),(0,u.YCL)(s.$$.fragment),this.h()},l(t){e=(0,u.vT0)(t,"SPAN",{});var c=(0,u.pIy)(e);n=(0,u.Bno)(c,"元画像"),c.forEach(u.ogt),r=(0,u.qzd)(t),o=(0,u.vT0)(t,"DIV",{class:!0});var l=(0,u.pIy)(o);i=(0,u.vT0)(l,"SPAN",{class:!0,title:!0});var a=(0,u.pIy)(i);(0,u.wOw)(s.$$.fragment,a),a.forEach(u.ogt),l.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(i,"class","control-icon toggle-visibility svelte-16aryz"),(0,u.Ljt)(i,"title",c=t[1]?"重ねて表示 OFF":"重ねて表示 ON"),(0,u.Ljt)(o,"class","control svelte-16aryz")},m(c,$){(0,u.ZMF)(c,e,$),(0,u.ztY)(e,n),(0,u.ZMF)(c,r,$),(0,u.ZMF)(c,o,$),(0,u.ztY)(o,i),(0,u.yef)(s,i,null),l=!0,a||(f=(0,u.oLt)(i,"click",(0,u.XET)(t[2])),a=!0)},p(t,e){const n={};2&e&&(n.icon=t[1]?g._VZ:g.qS7),s.$set(n),(!l||2&e&&c!==(c=t[1]?"重ねて表示 OFF":"重ねて表示 ON"))&&(0,u.Ljt)(i,"title",c)},i(t){l||((0,u.Ui)(s.$$.fragment,t),l=!0)},o(t){(0,u.etI)(s.$$.fragment,t),l=!1},d(t){t&&(0,u.ogt)(e),t&&(0,u.ogt)(r),t&&(0,u.ogt)(o),(0,u.vpE)(s),a=!1,f()}}}function Ur(t){let e,n;return e=new vr({props:{image:t[0],preview:!0}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.image=t[0]),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function Br(t){let e,n;return e=new Tr({props:{$$slots:{body:[Ur],title:[Zr]},$$scope:{ctx:t}}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,[n]){const r={};11&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function Dr(t,e,n){let r,o;return(0,u.FIv)(t,at,(t=>n(0,r=t))),(0,u.FIv)(t,bt,(t=>n(1,o=t))),[r,o,()=>{(0,u.fxP)(bt,o=!o,o)}]}Yt()(Fr.Z,{insert:"head",singleton:!1}),Fr.Z.locals;class Or extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,Dr,Br,u.AqN,{})}}var jr=Or;function Mr(t){let e,n,r=t[0]===G.RUN_CV?"出力画像情報":"画像情報";return{c(){e=(0,u.bGB)("span"),n=(0,u.fLW)(r),this.h()},l(t){e=(0,u.vT0)(t,"SPAN",{slot:!0});var o=(0,u.pIy)(e);n=(0,u.Bno)(o,r),o.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"slot","title")},m(t,r){(0,u.ZMF)(t,e,r),(0,u.ztY)(e,n)},p(t,e){1&e&&r!==(r=t[0]===G.RUN_CV?"出力画像情報":"画像情報")&&(0,u.rTO)(n,r)},d(t){t&&(0,u.ogt)(e)}}}function Cr(t){let e,n;return e=new vr({props:{image:t[2],allowEmpty:!0,onRename:t[4],readonly:t[1]}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.image=t[2]),2&n&&(r.readonly=t[1]),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function Gr(t){let e,n;return e=new Tr({props:{$$slots:{body:[Cr],title:[Mr]},$$scope:{ctx:t}}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,[n]){const r={};2055&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function Sr(t,e,n){let r,o,i,s,c,l,a,f,$;(0,u.FIv)(t,ft,(t=>n(5,i=t))),(0,u.FIv)(t,lt,(t=>n(8,s=t))),(0,u.FIv)(t,ct,(t=>n(9,c=t))),(0,u.FIv)(t,st,(t=>n(10,l=t))),(0,u.FIv)(t,gt,(t=>n(6,a=t))),(0,u.FIv)(t,at,(t=>n(7,f=t)));const{currentStep:p}=vt;return(0,u.FIv)(t,p,(t=>n(0,$=t))),t.$$.update=()=>{225&t.$$.dirty&&n(2,r=de(f,i,a,$).image),33&t.$$.dirty&&n(1,o=$===G.RUN_CV&&i instanceof Error)},[$,o,r,p,function(t){if(f)if($!==G.RUN_CV){const e=f.rename(t);a===f&&(0,u.fxP)(gt,a=e,a),(0,u.fxP)(st,l=l.splice(s,1,e),l)}else!i||i instanceof Error||(0,u.fxP)(ct,c=c.splice(s,1,i.rename(t)),c)},i,a,f]}class qr extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,Sr,Gr,u.AqN,{})}}var Vr=qr,Pr=n(4558);Yt()(Pr.Z,{insert:"head",singleton:!1}),Pr.Z.locals;const _r=t=>({}),Nr=t=>({});function Wr(t){let e,n,r,o,i,s,c,l,a,f,$,p;return r=new pe({props:{icon:t[0]?g._VZ:g.qS7}}),c=new pe({props:{icon:g.$BC}}),{c(){e=(0,u.bGB)("div"),n=(0,u.bGB)("span"),(0,u.YCL)(r.$$.fragment),i=(0,u.DhX)(),s=(0,u.bGB)("span"),(0,u.YCL)(c.$$.fragment),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0});var o=(0,u.pIy)(e);n=(0,u.vT0)(o,"SPAN",{class:!0,title:!0});var l=(0,u.pIy)(n);(0,u.wOw)(r.$$.fragment,l),l.forEach(u.ogt),i=(0,u.qzd)(o),s=(0,u.vT0)(o,"SPAN",{class:!0,title:!0});var a=(0,u.pIy)(s);(0,u.wOw)(c.$$.fragment,a),a.forEach(u.ogt),o.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(n,"class","control-icon toggle-visibility svelte-rpy7lp"),(0,u.Ljt)(n,"title",o=t[0]?"重ねて表示 OFF":"重ねて表示 ON"),(0,u.Ljt)(s,"class","control-icon unlock-param svelte-rpy7lp"),(0,u.Ljt)(s,"title","パラメータロックを解除"),(0,u.Ljt)(e,"class","control svelte-rpy7lp")},m(o,l){(0,u.ZMF)(o,e,l),(0,u.ztY)(e,n),(0,u.yef)(r,n,null),(0,u.ztY)(e,i),(0,u.ztY)(e,s),(0,u.yef)(c,s,null),f=!0,$||(p=[(0,u.oLt)(n,"click",(0,u.XET)(t[10])),(0,u.oLt)(s,"click",(0,u.XET)(t[11]))],$=!0)},p(t,e){const i={};1&e&&(i.icon=t[0]?g._VZ:g.qS7),r.$set(i),(!f||1&e&&o!==(o=t[0]?"重ねて表示 OFF":"重ねて表示 ON"))&&(0,u.Ljt)(n,"title",o)},i(t){f||((0,u.Ui)(r.$$.fragment,t),(0,u.Ui)(c.$$.fragment,t),(0,u.P$F)((()=>{a&&a.end(1),l=(0,u.HCz)(e,d.U1,{}),l.start()})),f=!0)},o(t){(0,u.etI)(r.$$.fragment,t),(0,u.etI)(c.$$.fragment,t),l&&l.invalidate(),a=(0,u.eZl)(e,d.U1,{}),f=!1},d(t){t&&(0,u.ogt)(e),(0,u.vpE)(r),(0,u.vpE)(c),t&&a&&a.end(),$=!1,(0,u.j7q)(p)}}}function Xr(t){let e,n,r,o,i,s=t[5]&&vt.hasFinished(t[2]),c=s&&Wr(t);return{c(){e=(0,u.bGB)("span"),n=(0,u.fLW)(t[1]),r=(0,u.DhX)(),c&&c.c(),o=(0,u.cSb)()},l(i){e=(0,u.vT0)(i,"SPAN",{});var s=(0,u.pIy)(e);n=(0,u.Bno)(s,t[1]),s.forEach(u.ogt),r=(0,u.qzd)(i),c&&c.l(i),o=(0,u.cSb)()},m(t,s){(0,u.ZMF)(t,e,s),(0,u.ztY)(e,n),(0,u.ZMF)(t,r,s),c&&c.m(t,s),(0,u.ZMF)(t,o,s),i=!0},p(t,e){(!i||2&e)&&(0,u.rTO)(n,t[1]),36&e&&(s=t[5]&&vt.hasFinished(t[2])),s?c?(c.p(t,e),36&e&&(0,u.Ui)(c,1)):(c=Wr(t),c.c(),(0,u.Ui)(c,1),c.m(o.parentNode,o)):c&&((0,u.dvw)(),(0,u.etI)(c,1,1,(()=>{c=null})),(0,u.gbL)())},i(t){i||((0,u.Ui)(c),i=!0)},o(t){(0,u.etI)(c),i=!1},d(t){t&&(0,u.ogt)(e),t&&(0,u.ogt)(r),c&&c.d(t),t&&(0,u.ogt)(o)}}}function Ar(t){let e;return{c(){e=(0,u.fLW)(t[3])},l(n){e=(0,u.Bno)(n,t[3])},m(t,n){(0,u.ZMF)(t,e,n)},p(t,n){8&n&&(0,u.rTO)(e,t[3])},d(t){t&&(0,u.ogt)(e)}}}function kr(t){let e,n,r,o;const i=t[9].body,s=(0,u.nuO)(i,t,t[13],Nr);return r=new y.ZP({props:{variant:"unelevated",class:"drawer-button",disabled:t[5]!==t[2],$$slots:{default:[Ar]},$$scope:{ctx:t}}}),r.$on("click",t[7]),{c(){e=(0,u.bGB)("div"),s&&s.c(),n=(0,u.DhX)(),(0,u.YCL)(r.$$.fragment),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{slot:!0});var o=(0,u.pIy)(e);s&&s.l(o),n=(0,u.qzd)(o),(0,u.wOw)(r.$$.fragment,o),o.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"slot","body")},m(t,i){(0,u.ZMF)(t,e,i),s&&s.m(e,null),(0,u.ztY)(e,n),(0,u.yef)(r,e,null),o=!0},p(t,e){s&&s.p&&(!o||8192&e)&&(0,u.kmG)(s,i,t,t[13],o?(0,u.u2N)(i,t[13],e,_r):(0,u.VOJ)(t[13]),Nr);const n={};36&e&&(n.disabled=t[5]!==t[2]),8200&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){o||((0,u.Ui)(s,t),(0,u.Ui)(r.$$.fragment,t),o=!0)},o(t){(0,u.etI)(s,t),(0,u.etI)(r.$$.fragment,t),o=!1},d(t){t&&(0,u.ogt)(e),s&&s.d(t),(0,u.vpE)(r)}}}function Rr(t){let e;return{c(){e=(0,u.fLW)("パラメータロック解除")},l(t){e=(0,u.Bno)(t,"パラメータロック解除")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Hr(t){let e,n=`パラメータのロックを解除すると「${P[t[2]]}」に戻ります。よろしいですか？`;return{c(){e=(0,u.fLW)(n)},l(t){e=(0,u.Bno)(t,n)},m(t,n){(0,u.ZMF)(t,e,n)},p(t,r){4&r&&n!==(n=`パラメータのロックを解除すると「${P[t[2]]}」に戻ります。よろしいですか？`)&&(0,u.rTO)(e,n)},d(t){t&&(0,u.ogt)(e)}}}function Qr(t){let e;return{c(){e=(0,u.fLW)("いいえ")},l(t){e=(0,u.Bno)(t,"いいえ")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Jr(t){let e;return{c(){e=(0,u.fLW)("はい")},l(t){e=(0,u.Bno)(t,"はい")},m(t,n){(0,u.ZMF)(t,e,n)},d(t){t&&(0,u.ogt)(e)}}}function Kr(t){let e,n,r,o;return e=new y.ZP({props:{$$slots:{default:[Qr]},$$scope:{ctx:t}}}),r=new y.ZP({props:{color:"secondary",$$slots:{default:[Jr]},$$scope:{ctx:t}}}),r.$on("click",t[8]),{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.DhX)(),(0,u.YCL)(r.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.qzd)(t),(0,u.wOw)(r.$$.fragment,t)},m(t,i){(0,u.yef)(e,t,i),(0,u.ZMF)(t,n,i),(0,u.yef)(r,t,i),o=!0},p(t,n){const o={};8192&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const i={};8192&n&&(i.$$scope={dirty:n,ctx:t}),r.$set(i)},i(t){o||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(r.$$.fragment,t),o=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(r.$$.fragment,t),o=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n),(0,u.vpE)(r,t)}}}function to(t){let e,n,r,o,i,s;return e=new m.Dx({props:{$$slots:{default:[Rr]},$$scope:{ctx:t}}}),r=new m.VY({props:{$$slots:{default:[Hr]},$$scope:{ctx:t}}}),i=new m.eX({props:{$$slots:{default:[Kr]},$$scope:{ctx:t}}}),{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.DhX)(),(0,u.YCL)(r.$$.fragment),o=(0,u.DhX)(),(0,u.YCL)(i.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.qzd)(t),(0,u.wOw)(r.$$.fragment,t),o=(0,u.qzd)(t),(0,u.wOw)(i.$$.fragment,t)},m(t,c){(0,u.yef)(e,t,c),(0,u.ZMF)(t,n,c),(0,u.yef)(r,t,c),(0,u.ZMF)(t,o,c),(0,u.yef)(i,t,c),s=!0},p(t,n){const o={};8192&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const s={};8196&n&&(s.$$scope={dirty:n,ctx:t}),r.$set(s);const c={};8192&n&&(c.$$scope={dirty:n,ctx:t}),i.$set(c)},i(t){s||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(r.$$.fragment,t),(0,u.Ui)(i.$$.fragment,t),s=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(r.$$.fragment,t),(0,u.etI)(i.$$.fragment,t),s=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n),(0,u.vpE)(r,t),t&&(0,u.ogt)(o),(0,u.vpE)(i,t)}}}function eo(t){let e,n,r,o,i;function s(e){t[12](e)}e=new Tr({props:{highlight:t[5]===t[2],$$slots:{body:[kr],title:[Xr]},$$scope:{ctx:t}}});let c={scrimClickAction:"",escapeKeyAction:"",$$slots:{default:[to]},$$scope:{ctx:t}};return void 0!==t[4]&&(c.open=t[4]),r=new T({props:c}),u.VnY.push((()=>(0,u.akz)(r,"open",s))),{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.DhX)(),(0,u.YCL)(r.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.qzd)(t),(0,u.wOw)(r.$$.fragment,t)},m(t,o){(0,u.yef)(e,t,o),(0,u.ZMF)(t,n,o),(0,u.yef)(r,t,o),i=!0},p(t,[n]){const i={};36&n&&(i.highlight=t[5]===t[2]),8255&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i);const s={};8196&n&&(s.$$scope={dirty:n,ctx:t}),!o&&16&n&&(o=!0,s.open=t[4],(0,u.hjT)((()=>o=!1))),r.$set(s)},i(t){i||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(r.$$.fragment,t),i=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(r.$$.fragment,t),i=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n),(0,u.vpE)(r,t)}}}function no(t,e,n){let r,o,i,s,c;(0,u.FIv)(t,ct,(t=>n(14,r=t))),(0,u.FIv)(t,It,(t=>n(15,o=t))),(0,u.FIv)(t,xt,(t=>n(16,i=t))),(0,u.FIv)(t,Lt,(t=>n(17,s=t)));let{$$slots:l={},$$scope:a}=e,{title:f}=e,{targetStep:$}=e,{buttonLabel:p}=e,{visible:d}=e;const{currentStep:g}=vt;(0,u.FIv)(t,g,(t=>n(5,c=t)));let h=!1;const m=(0,ue.x)();return t.$$set=t=>{"title"in t&&n(1,f=t.title),"targetStep"in t&&n(2,$=t.targetStep),"buttonLabel"in t&&n(3,p=t.buttonLabel),"visible"in t&&n(0,d=t.visible),"$$scope"in t&&n(13,a=t.$$scope)},[d,f,$,p,h,c,g,function(){vt.forward(),m("next")},function(){(0,u.fxP)(g,c=$,c),(0,u.fxP)(Lt,s=!1,s),(0,u.fxP)(xt,i=!1,i),(0,u.fxP)(It,o=$===G.SET_PIVOT,o),(0,u.fxP)(ct,r=r.clear(),r),m("paramUnlocked")},l,()=>{n(0,d=!d)},()=>{n(4,h=!0)},function(t){h=t,n(4,h)},a]}class ro extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,no,eo,u.AqN,{title:1,targetStep:2,buttonLabel:3,visible:0})}}var oo=ro;function io(t){let e,n;return e=new vr({props:{image:t[0],preview:!0}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.image=t[0]),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function so(t){let e,n,r=t[0]&&io(t);return{c(){r&&r.c(),e=(0,u.cSb)()},l(t){r&&r.l(t),e=(0,u.cSb)()},m(t,o){r&&r.m(t,o),(0,u.ZMF)(t,e,o),n=!0},p(t,n){t[0]?r?(r.p(t,n),1&n&&(0,u.Ui)(r,1)):(r=io(t),r.c(),(0,u.Ui)(r,1),r.m(e.parentNode,e)):r&&((0,u.dvw)(),(0,u.etI)(r,1,1,(()=>{r=null})),(0,u.gbL)())},i(t){n||((0,u.Ui)(r),n=!0)},o(t){(0,u.etI)(r),n=!1},d(t){r&&r.d(t),t&&(0,u.ogt)(e)}}}function co(t){let e,n,r;function o(e){t[4](e)}let i={title:"基準画像",buttonLabel:"表示中の画像を基準に設定",targetStep:G.SELECT_REF_IMAGE,$$slots:{body:[so]},$$scope:{ctx:t}};return void 0!==t[1]&&(i.visible=t[1]),e=new oo({props:i}),u.VnY.push((()=>(0,u.akz)(e,"visible",o))),e.$on("next",t[2]),e.$on("paramUnlocked",t[3]),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,n){(0,u.yef)(e,t,n),r=!0},p(t,[r]){const o={};65&r&&(o.$$scope={dirty:r,ctx:t}),!n&&2&r&&(n=!0,o.visible=t[1],(0,u.hjT)((()=>n=!1))),e.$set(o)},i(t){r||((0,u.Ui)(e.$$.fragment,t),r=!0)},o(t){(0,u.etI)(e.$$.fragment,t),r=!1},d(t){(0,u.vpE)(e,t)}}}function lo(t,e,n){let r,o,i;return(0,u.FIv)(t,gt,(t=>n(0,r=t))),(0,u.FIv)(t,at,(t=>n(5,o=t))),(0,u.FIv)(t,Lt,(t=>n(1,i=t))),[r,i,function(){(0,u.fxP)(gt,r=o,r)},function(){(0,u.fxP)(gt,r=void 0,r)},function(t){i=t,Lt.set(i)}]}class ao extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,lo,co,u.AqN,{})}}var fo=ao,$o=n(4691),po=n.n($o);function uo(t){let e,n,r,o,i,s,c,l,a,f,$,p,d,g,h,m,v,y,w,I,x,L,b,E,Y,z,T,F,Z,U=t[1].x1+"",B=t[1].y1+"",D=t[1].x2+"",O=t[1].y2+"";return{c(){e=(0,u.bGB)("table"),n=(0,u.bGB)("tbody"),r=(0,u.bGB)("tr"),o=(0,u.bGB)("td"),i=(0,u.fLW)("left"),s=(0,u.DhX)(),c=(0,u.bGB)("td"),l=(0,u.fLW)(U),a=(0,u.DhX)(),f=(0,u.bGB)("tr"),$=(0,u.bGB)("td"),p=(0,u.fLW)("top"),d=(0,u.DhX)(),g=(0,u.bGB)("td"),h=(0,u.fLW)(B),m=(0,u.DhX)(),v=(0,u.bGB)("tr"),y=(0,u.bGB)("td"),w=(0,u.fLW)("right"),I=(0,u.DhX)(),x=(0,u.bGB)("td"),L=(0,u.fLW)(D),b=(0,u.DhX)(),E=(0,u.bGB)("tr"),Y=(0,u.bGB)("td"),z=(0,u.fLW)("bottom"),T=(0,u.DhX)(),F=(0,u.bGB)("td"),Z=(0,u.fLW)(O)},l(t){e=(0,u.vT0)(t,"TABLE",{});var j=(0,u.pIy)(e);n=(0,u.vT0)(j,"TBODY",{});var M=(0,u.pIy)(n);r=(0,u.vT0)(M,"TR",{});var C=(0,u.pIy)(r);o=(0,u.vT0)(C,"TD",{});var G=(0,u.pIy)(o);i=(0,u.Bno)(G,"left"),G.forEach(u.ogt),s=(0,u.qzd)(C),c=(0,u.vT0)(C,"TD",{});var S=(0,u.pIy)(c);l=(0,u.Bno)(S,U),S.forEach(u.ogt),C.forEach(u.ogt),a=(0,u.qzd)(M),f=(0,u.vT0)(M,"TR",{});var q=(0,u.pIy)(f);$=(0,u.vT0)(q,"TD",{});var V=(0,u.pIy)($);p=(0,u.Bno)(V,"top"),V.forEach(u.ogt),d=(0,u.qzd)(q),g=(0,u.vT0)(q,"TD",{});var P=(0,u.pIy)(g);h=(0,u.Bno)(P,B),P.forEach(u.ogt),q.forEach(u.ogt),m=(0,u.qzd)(M),v=(0,u.vT0)(M,"TR",{});var _=(0,u.pIy)(v);y=(0,u.vT0)(_,"TD",{});var N=(0,u.pIy)(y);w=(0,u.Bno)(N,"right"),N.forEach(u.ogt),I=(0,u.qzd)(_),x=(0,u.vT0)(_,"TD",{});var W=(0,u.pIy)(x);L=(0,u.Bno)(W,D),W.forEach(u.ogt),_.forEach(u.ogt),b=(0,u.qzd)(M),E=(0,u.vT0)(M,"TR",{});var X=(0,u.pIy)(E);Y=(0,u.vT0)(X,"TD",{});var A=(0,u.pIy)(Y);z=(0,u.Bno)(A,"bottom"),A.forEach(u.ogt),T=(0,u.qzd)(X),F=(0,u.vT0)(X,"TD",{});var k=(0,u.pIy)(F);Z=(0,u.Bno)(k,O),k.forEach(u.ogt),X.forEach(u.ogt),M.forEach(u.ogt),j.forEach(u.ogt)},m(t,U){(0,u.ZMF)(t,e,U),(0,u.ztY)(e,n),(0,u.ztY)(n,r),(0,u.ztY)(r,o),(0,u.ztY)(o,i),(0,u.ztY)(r,s),(0,u.ztY)(r,c),(0,u.ztY)(c,l),(0,u.ztY)(n,a),(0,u.ztY)(n,f),(0,u.ztY)(f,$),(0,u.ztY)($,p),(0,u.ztY)(f,d),(0,u.ztY)(f,g),(0,u.ztY)(g,h),(0,u.ztY)(n,m),(0,u.ztY)(n,v),(0,u.ztY)(v,y),(0,u.ztY)(y,w),(0,u.ztY)(v,I),(0,u.ztY)(v,x),(0,u.ztY)(x,L),(0,u.ztY)(n,b),(0,u.ztY)(n,E),(0,u.ztY)(E,Y),(0,u.ztY)(Y,z),(0,u.ztY)(E,T),(0,u.ztY)(E,F),(0,u.ztY)(F,Z)},p(t,e){2&e&&U!==(U=t[1].x1+"")&&(0,u.rTO)(l,U),2&e&&B!==(B=t[1].y1+"")&&(0,u.rTO)(h,B),2&e&&D!==(D=t[1].x2+"")&&(0,u.rTO)(L,D),2&e&&O!==(O=t[1].y2+"")&&(0,u.rTO)(Z,O)},d(t){t&&(0,u.ogt)(e)}}}function go(t){let e,n,r;function o(e){t[5](e)}let i={targetStep:t[3],title:"対象領域",buttonLabel:"対象領域を設定",$$slots:{body:[uo]},$$scope:{ctx:t}};return void 0!==t[0]&&(i.visible=t[0]),e=new oo({props:i}),u.VnY.push((()=>(0,u.akz)(e,"visible",o))),e.$on("next",t[4]),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,n){(0,u.yef)(e,t,n),r=!0},p(t,[r]){const o={};2050&r&&(o.$$scope={dirty:r,ctx:t}),!n&&1&r&&(n=!0,o.visible=t[0],(0,u.hjT)((()=>n=!1))),e.$set(o)},i(t){r||((0,u.Ui)(e.$$.fragment,t),r=!0)},o(t){(0,u.etI)(e.$$.fragment,t),r=!1},d(t){(0,u.vpE)(e,t)}}}function ho(t,e,n){let r,o,i,s,c,l;(0,u.FIv)(t,It,(t=>n(0,r=t))),(0,u.FIv)(t,mt,(t=>n(1,o=t))),(0,u.FIv)(t,ht,(t=>n(6,i=t))),(0,u.FIv)(t,gt,(t=>n(7,s=t))),(0,u.FIv)(t,$t,(t=>n(8,c=t)));const{currentStep:a}=vt;(0,u.FIv)(t,a,(t=>n(9,l=t)));const f=G.SET_ROI,$=new ge((()=>[l]));return(0,ue.gx)((()=>{$.stale()&&s&&l===f&&(0===o.width&&0===o.height?c===C.PEG_HOLE?(0,u.fxP)(mt,o=new V({x1:0,y1:0,x2:s.width,y2:Math.floor(s.height/6)}),o):(0,u.fxP)(mt,o=new V({x1:0,y1:0,x2:s.width,y2:s.height}),o):(0,u.fxP)(mt,o=new V({x1:po()(o.x1,0,s.width),y1:po()(o.y1,0,s.height),x2:po()(o.x2,0,s.width),y2:po()(o.y2,0,s.height)}),o))})),[r,o,a,f,function(){(0,u.fxP)(ht,i=new q({x:po()(i.x,o.x1,o.x2),y:po()(i.y,o.y1,o.y2)}),i),(0,u.fxP)(It,r=!0,r)},function(t){r=t,It.set(r)}]}class mo extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,ho,go,u.AqN,{})}}var vo=mo,yo=n(7200);function wo(t){let e,n=t[0]?"自動算出中...":"自動算出";return{c(){e=(0,u.fLW)(n)},l(t){e=(0,u.Bno)(t,n)},m(t,n){(0,u.ZMF)(t,e,n)},p(t,r){1&r&&n!==(n=t[0]?"自動算出中...":"自動算出")&&(0,u.rTO)(e,n)},d(t){t&&(0,u.ogt)(e)}}}function Io(t){let e,n,r,o,i,s,c,l,a,f,$,p,d,g,h,m,v,w,I=t[2].x+"",x=t[2].y+"";return v=new y.ZP({props:{variant:"unelevated",class:"request-pivot",disabled:t[0]||t[5]!==t[7],$$slots:{default:[wo]},$$scope:{ctx:t}}}),v.$on("click",t[8]),{c(){e=(0,u.bGB)("table"),n=(0,u.bGB)("tbody"),r=(0,u.bGB)("tr"),o=(0,u.bGB)("td"),i=(0,u.fLW)("x"),s=(0,u.DhX)(),c=(0,u.bGB)("td"),l=(0,u.fLW)(I),a=(0,u.DhX)(),f=(0,u.bGB)("tr"),$=(0,u.bGB)("td"),p=(0,u.fLW)("y"),d=(0,u.DhX)(),g=(0,u.bGB)("td"),h=(0,u.fLW)(x),m=(0,u.DhX)(),(0,u.YCL)(v.$$.fragment),this.h()},l(t){e=(0,u.vT0)(t,"TABLE",{});var y=(0,u.pIy)(e);n=(0,u.vT0)(y,"TBODY",{});var w=(0,u.pIy)(n);r=(0,u.vT0)(w,"TR",{});var L=(0,u.pIy)(r);o=(0,u.vT0)(L,"TD",{});var b=(0,u.pIy)(o);i=(0,u.Bno)(b,"x"),b.forEach(u.ogt),s=(0,u.qzd)(L),c=(0,u.vT0)(L,"TD",{class:!0});var E=(0,u.pIy)(c);l=(0,u.Bno)(E,I),E.forEach(u.ogt),L.forEach(u.ogt),a=(0,u.qzd)(w),f=(0,u.vT0)(w,"TR",{});var Y=(0,u.pIy)(f);$=(0,u.vT0)(Y,"TD",{});var z=(0,u.pIy)($);p=(0,u.Bno)(z,"y"),z.forEach(u.ogt),d=(0,u.qzd)(Y),g=(0,u.vT0)(Y,"TD",{class:!0});var T=(0,u.pIy)(g);h=(0,u.Bno)(T,x),T.forEach(u.ogt),Y.forEach(u.ogt),w.forEach(u.ogt),y.forEach(u.ogt),m=(0,u.qzd)(t),(0,u.wOw)(v.$$.fragment,t),this.h()},h(){(0,u.Ljt)(c,"class","ellipsis svelte-rgu8gw"),(0,u.Ljt)(g,"class","ellipsis svelte-rgu8gw")},m(t,y){(0,u.ZMF)(t,e,y),(0,u.ztY)(e,n),(0,u.ztY)(n,r),(0,u.ztY)(r,o),(0,u.ztY)(o,i),(0,u.ztY)(r,s),(0,u.ztY)(r,c),(0,u.ztY)(c,l),(0,u.ztY)(n,a),(0,u.ztY)(n,f),(0,u.ztY)(f,$),(0,u.ztY)($,p),(0,u.ztY)(f,d),(0,u.ztY)(f,g),(0,u.ztY)(g,h),(0,u.ZMF)(t,m,y),(0,u.yef)(v,t,y),w=!0},p(t,e){(!w||4&e)&&I!==(I=t[2].x+"")&&(0,u.rTO)(l,I),(!w||4&e)&&x!==(x=t[2].y+"")&&(0,u.rTO)(h,x);const n={};33&e&&(n.disabled=t[0]||t[5]!==t[7]),16385&e&&(n.$$scope={dirty:e,ctx:t}),v.$set(n)},i(t){w||((0,u.Ui)(v.$$.fragment,t),w=!0)},o(t){(0,u.etI)(v.$$.fragment,t),w=!1},d(t){t&&(0,u.ogt)(e),t&&(0,u.ogt)(m),(0,u.vpE)(v,t)}}}function xo(t){let e,n,r;function o(e){t[9](e)}let i={targetStep:t[7],title:"基準位置"+(t[1]===C.PEG_HOLE?"（タップ穴）":"（フレーム）"),buttonLabel:"基準位置を設定",$$slots:{body:[Io]},$$scope:{ctx:t}};return void 0!==t[3]&&(i.visible=t[3]),e=new oo({props:i}),u.VnY.push((()=>(0,u.akz)(e,"visible",o))),e.$on("next",t[10]),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,n){(0,u.yef)(e,t,n),r=!0},p(t,[r]){const o={};2&r&&(o.title="基準位置"+(t[1]===C.PEG_HOLE?"（タップ穴）":"（フレーム）")),16421&r&&(o.$$scope={dirty:r,ctx:t}),!n&&8&r&&(n=!0,o.visible=t[3],(0,u.hjT)((()=>n=!1))),e.$set(o)},i(t){r||((0,u.Ui)(e.$$.fragment,t),r=!0)},o(t){(0,u.etI)(e.$$.fragment,t),r=!1},d(t){(0,u.vpE)(e,t)}}}function Lo(t,e,n){let r,o,i,c,l,a,f,$,p;(0,u.FIv)(t,wt,(t=>n(0,r=t))),(0,u.FIv)(t,mt,(t=>n(11,o=t))),(0,u.FIv)(t,gt,(t=>n(12,i=t))),(0,u.FIv)(t,$t,(t=>n(1,c=t))),(0,u.FIv)(t,yt,(t=>n(13,l=t))),(0,u.FIv)(t,ht,(t=>n(2,a=t))),(0,u.FIv)(t,xt,(t=>n(3,f=t))),(0,u.FIv)(t,It,(t=>n(4,$=t)));const{currentStep:d}=vt;(0,u.FIv)(t,d,(t=>n(5,p=t)));const g=G.SET_PIVOT;return[r,c,a,f,$,p,d,g,function(){return(0,s.mG)(this,void 0,void 0,(function*(){if(i){(0,u.fxP)(wt,r=!0,r);try{(0,u.fxP)(ht,a=yield l.requestPivot(c,i,o),a)}catch(t){alert((null==t?void 0:t.message)||t)}(0,u.fxP)(wt,r=!1,r)}}))},function(t){f=t,xt.set(f)},()=>{(0,u.fxP)(It,$=!0,$),(0,u.fxP)(xt,f=!0,f)}]}Yt()(yo.Z,{insert:"head",singleton:!1}),yo.Z.locals;class bo extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,Lo,xo,u.AqN,{})}}var Eo=bo,Yo=n(4373),zo=n(2115),To=n(5871),Fo=n(3334);function Zo(t){let e,n;return{c(){e=(0,u.bGB)("span"),n=(0,u.fLW)("OpenCV 処理"),this.h()},l(t){e=(0,u.vT0)(t,"SPAN",{slot:!0});var r=(0,u.pIy)(e);n=(0,u.Bno)(r,"OpenCV 処理"),r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"slot","title")},m(t,r){(0,u.ZMF)(t,e,r),(0,u.ztY)(e,n)},d(t){t&&(0,u.ogt)(e)}}}function Uo(t){let e,n=t[1]?"処理中...":1===t[0]?"CV 処理完了":"CV 処理開始";return{c(){e=(0,u.fLW)(n)},l(t){e=(0,u.Bno)(t,n)},m(t,n){(0,u.ZMF)(t,e,n)},p(t,r){3&r&&n!==(n=t[1]?"処理中...":1===t[0]?"CV 処理完了":"CV 処理開始")&&(0,u.rTO)(e,n)},d(t){t&&(0,u.ogt)(e)}}}function Bo(t){let e,n,r;return n=new y.ZP({props:{variant:"unelevated",class:"drawer-button",disabled:t[3]!==t[5]||t[1]||1===t[0],$$slots:{default:[Uo]},$$scope:{ctx:t}}}),n.$on("click",t[6]),{c(){e=(0,u.bGB)("div"),(0,u.YCL)(n.$$.fragment),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{slot:!0});var r=(0,u.pIy)(e);(0,u.wOw)(n.$$.fragment,r),r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"slot","body")},m(t,o){(0,u.ZMF)(t,e,o),(0,u.yef)(n,e,null),r=!0},p(t,e){const r={};11&e&&(r.disabled=t[3]!==t[5]||t[1]||1===t[0]),4194307&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){r||((0,u.Ui)(n.$$.fragment,t),r=!0)},o(t){(0,u.etI)(n.$$.fragment,t),r=!1},d(t){t&&(0,u.ogt)(e),(0,u.vpE)(n)}}}function Do(t){let e,n;return e=new w.Z({props:{target:"body",$$slots:{default:[Co]},$$scope:{ctx:t}}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,n){const r={};4194311&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function Oo(t){let e,n;return e=new pe({props:{icon:t[1]?g.fcg:g.Blf}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.icon=t[1]?g.fcg:g.Blf),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function jo(t){let e,n;return e=new v.Z({props:{class:"progress",progress:t[0]}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.progress=t[0]),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function Mo(t){let e,n;return e=new v.Z({props:{class:"progress four-colors",indeterminate:!0,fourColor:!0}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function Co(t){let e,n,r,o,i,s;n=new To.ZP({props:{disabled:1!==t[0]||t[2],title:"処理結果をダウンロード",$$slots:{default:[Oo]},$$scope:{ctx:t}}}),n.$on("click",t[7]);let c=1!==t[0]&&jo(t),l=t[2]&&Mo();return{c(){e=(0,u.bGB)("div"),(0,u.YCL)(n.$$.fragment),r=(0,u.DhX)(),c&&c.c(),o=(0,u.DhX)(),l&&l.c(),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{class:!0,style:!0});var i=(0,u.pIy)(e);(0,u.wOw)(n.$$.fragment,i),r=(0,u.qzd)(i),c&&c.l(i),o=(0,u.qzd)(i),l&&l.l(i),i.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","download-btn svelte-16vw4c1"),(0,u.Ljt)(e,"style",i=`--progress: ${100*t[0]}%`)},m(t,i){(0,u.ZMF)(t,e,i),(0,u.yef)(n,e,null),(0,u.ztY)(e,r),c&&c.m(e,null),(0,u.ztY)(e,o),l&&l.m(e,null),s=!0},p(t,r){const a={};5&r&&(a.disabled=1!==t[0]||t[2]),4194306&r&&(a.$$scope={dirty:r,ctx:t}),n.$set(a),1!==t[0]?c?(c.p(t,r),1&r&&(0,u.Ui)(c,1)):(c=jo(t),c.c(),(0,u.Ui)(c,1),c.m(e,o)):c&&((0,u.dvw)(),(0,u.etI)(c,1,1,(()=>{c=null})),(0,u.gbL)()),t[2]?l?4&r&&(0,u.Ui)(l,1):(l=Mo(),l.c(),(0,u.Ui)(l,1),l.m(e,null)):l&&((0,u.dvw)(),(0,u.etI)(l,1,1,(()=>{l=null})),(0,u.gbL)()),(!s||1&r&&i!==(i=`--progress: ${100*t[0]}%`))&&(0,u.Ljt)(e,"style",i)},i(t){s||((0,u.Ui)(n.$$.fragment,t),(0,u.Ui)(c),(0,u.Ui)(l),s=!0)},o(t){(0,u.etI)(n.$$.fragment,t),(0,u.etI)(c),(0,u.etI)(l),s=!1},d(t){t&&(0,u.ogt)(e),(0,u.vpE)(n),c&&c.d(),l&&l.d()}}}function Go(t){let e,n,r,o;e=new Tr({props:{highlight:t[3]===t[5],$$slots:{body:[Bo],title:[Zo]},$$scope:{ctx:t}}});let i=(t[1]||1===t[0])&&Do(t);return{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.DhX)(),i&&i.c(),r=(0,u.cSb)()},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.qzd)(t),i&&i.l(t),r=(0,u.cSb)()},m(t,s){(0,u.yef)(e,t,s),(0,u.ZMF)(t,n,s),i&&i.m(t,s),(0,u.ZMF)(t,r,s),o=!0},p(t,[n]){const o={};8&n&&(o.highlight=t[3]===t[5]),4194315&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o),t[1]||1===t[0]?i?(i.p(t,n),3&n&&(0,u.Ui)(i,1)):(i=Do(t),i.c(),(0,u.Ui)(i,1),i.m(r.parentNode,r)):i&&((0,u.dvw)(),(0,u.etI)(i,1,1,(()=>{i=null})),(0,u.gbL)())},i(t){o||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(i),o=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(i),o=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n),i&&i.d(t),t&&(0,u.ogt)(r)}}}function So(){const t=new Date;return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}_${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}`}function qo(t,e,n){let r,o,i,c,l,a,f,$,p,d,g;(0,u.FIv)(t,ut,(t=>n(8,r=t))),(0,u.FIv)(t,st,(t=>n(9,o=t))),(0,u.FIv)(t,ct,(t=>n(10,i=t))),(0,u.FIv)(t,ht,(t=>n(11,c=t))),(0,u.FIv)(t,mt,(t=>n(12,l=t))),(0,u.FIv)(t,gt,(t=>n(13,a=t))),(0,u.FIv)(t,dt,(t=>n(14,f=t))),(0,u.FIv)(t,$t,(t=>n(15,$=t))),(0,u.FIv)(t,yt,(t=>n(16,p=t))),(0,u.FIv)(t,pt,(t=>n(17,d=t)));const{currentStep:h}=vt;(0,u.FIv)(t,h,(t=>n(3,g=t)));const m=G.RUN_CV;let v=0,y=!1,w=!1;function I(t,e){const n=t.filename.replace(/\.[^/.]+$/,""),o=r===z.AS_IS?t.filetype:r,i=d.replace("{filename}",n).replace("{index}",String(e+1))+"."+U(o);return t.rename(i).changeFiletype(o)}function x(){return[...i].map(((t,e)=>{if(t instanceof M)return t;const n=o.get(e);return n?n.rename(`failed-${n.filename}`).changeFiletype(r):null})).filter((t=>null!==t))}return h.subscribe((()=>{n(0,v=0)})),(0,ue.H3)((()=>{function t(){(0,u.fxP)(ct,i=i.map(((t,e)=>{if(t instanceof M){const n=o.get(e);return I(n?t.rename(n.filename).changeFiletype(n.filetype):t,e)}return t})),i)}const e=[pt.subscribe((()=>{t()})),ut.subscribe((()=>{t()}))];return()=>{e.forEach((t=>t()))}})),[v,y,w,g,h,m,function(){return(0,s.mG)(this,void 0,void 0,(function*(){a&&(n(1,y=!0),n(0,v=0),yield p.requestProcessing($,f,[...o],a,l,c,((t,e,r)=>{e instanceof Error?(0,u.fxP)(ct,i=i.set(t,e),i):(0,u.fxP)(ct,i=i.set(t,I(e,t)),i),n(0,v=r)})),n(0,v=1),n(1,y=!1))}))},function(){return(0,s.mG)(this,void 0,void 0,(function*(){try{n(2,w=!0),"showDirectoryPicker"in window?yield function(){return(0,s.mG)(this,void 0,void 0,(function*(){const t=yield window.showDirectoryPicker({id:"keyframe-refiner-output",mode:"readwrite"}),e=yield t.getDirectoryHandle(`result-${So()}`,{create:!0}),n=x().map((t=>()=>(0,s.mG)(this,void 0,void 0,(function*(){const n=yield e.getFileHandle(t.filename,{create:!0}),r=yield n.createWritable();yield r.write(yield t.toBlob()),yield r.close()}))));yield new Promise((t=>setTimeout(t))),yield(0,Yo.Z)(n,{concurrency:navigator.hardwareConcurrency||4}),alert(`${n.length} 枚の画像を ${e.name} フォルダに保存しました`)}))}():yield function(){return(0,s.mG)(this,void 0,void 0,(function*(){const t=new zo._Q(new zo.U5("application/zip")),e=x().map((e=>()=>(0,s.mG)(this,void 0,void 0,(function*(){yield t.add(e.filename,new zo.Nt(yield e.toBlob()),{bufferedWrite:!0})}))));yield new Promise((t=>setTimeout(t))),yield(0,Yo.Z)(e,{concurrency:navigator.hardwareConcurrency||4});const n=document.createElement("a");n.href=URL.createObjectURL(yield t.close()),n.download=`result-${So()}.zip`,n.click()}))}()}finally{n(2,w=!1)}}))}]}Yt()(Fo.Z,{insert:"head",singleton:!1}),Fo.Z.locals;class Vo extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,qo,Go,u.AqN,{})}}var Po=Vo;function _o(t){let e,n;return e=new jr({}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function No(t){let e,n,r,o,i,s,c,l,a,f,$;e=new Vr({});let p=t[0]instanceof M&&_o();return o=new fo({}),s=new vo({}),l=new Eo({}),f=new Po({}),{c(){(0,u.YCL)(e.$$.fragment),n=(0,u.DhX)(),p&&p.c(),r=(0,u.DhX)(),(0,u.YCL)(o.$$.fragment),i=(0,u.DhX)(),(0,u.YCL)(s.$$.fragment),c=(0,u.DhX)(),(0,u.YCL)(l.$$.fragment),a=(0,u.DhX)(),(0,u.YCL)(f.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t),n=(0,u.qzd)(t),p&&p.l(t),r=(0,u.qzd)(t),(0,u.wOw)(o.$$.fragment,t),i=(0,u.qzd)(t),(0,u.wOw)(s.$$.fragment,t),c=(0,u.qzd)(t),(0,u.wOw)(l.$$.fragment,t),a=(0,u.qzd)(t),(0,u.wOw)(f.$$.fragment,t)},m(t,d){(0,u.yef)(e,t,d),(0,u.ZMF)(t,n,d),p&&p.m(t,d),(0,u.ZMF)(t,r,d),(0,u.yef)(o,t,d),(0,u.ZMF)(t,i,d),(0,u.yef)(s,t,d),(0,u.ZMF)(t,c,d),(0,u.yef)(l,t,d),(0,u.ZMF)(t,a,d),(0,u.yef)(f,t,d),$=!0},p(t,e){t[0]instanceof M?p?1&e&&(0,u.Ui)(p,1):(p=_o(),p.c(),(0,u.Ui)(p,1),p.m(r.parentNode,r)):p&&((0,u.dvw)(),(0,u.etI)(p,1,1,(()=>{p=null})),(0,u.gbL)())},i(t){$||((0,u.Ui)(e.$$.fragment,t),(0,u.Ui)(p),(0,u.Ui)(o.$$.fragment,t),(0,u.Ui)(s.$$.fragment,t),(0,u.Ui)(l.$$.fragment,t),(0,u.Ui)(f.$$.fragment,t),$=!0)},o(t){(0,u.etI)(e.$$.fragment,t),(0,u.etI)(p),(0,u.etI)(o.$$.fragment,t),(0,u.etI)(s.$$.fragment,t),(0,u.etI)(l.$$.fragment,t),(0,u.etI)(f.$$.fragment,t),$=!1},d(t){(0,u.vpE)(e,t),t&&(0,u.ogt)(n),p&&p.d(t),t&&(0,u.ogt)(r),(0,u.vpE)(o,t),t&&(0,u.ogt)(i),(0,u.vpE)(s,t),t&&(0,u.ogt)(c),(0,u.vpE)(l,t),t&&(0,u.ogt)(a),(0,u.vpE)(f,t)}}}function Wo(t){let e,n;return e=new we({props:{$$slots:{default:[No]},$$scope:{ctx:t}}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p(t,[n]){const r={};3&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function Xo(t,e,n){let r;return(0,u.FIv)(t,ft,(t=>n(0,r=t))),[r]}class Ao extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,Xo,Wo,u.AqN,{})}}var ko=Ao,Ro=n(874);function Ho(t,e,n){const r=t.slice();return r[2]=e[n],r[4]=n,r}function Qo(t,e){let n,r,o,i,s,c,l,a=e[4]+1+"",f=e[2]+"";return{key:t,first:null,c(){n=(0,u.bGB)("div"),r=(0,u.bGB)("span"),o=(0,u.fLW)(a),i=(0,u.DhX)(),s=(0,u.bGB)("span"),c=(0,u.fLW)(f),l=(0,u.DhX)(),this.h()},l(t){n=(0,u.vT0)(t,"DIV",{class:!0});var e=(0,u.pIy)(n);r=(0,u.vT0)(e,"SPAN",{class:!0});var $=(0,u.pIy)(r);o=(0,u.Bno)($,a),$.forEach(u.ogt),i=(0,u.qzd)(e),s=(0,u.vT0)(e,"SPAN",{class:!0});var p=(0,u.pIy)(s);c=(0,u.Bno)(p,f),p.forEach(u.ogt),l=(0,u.qzd)(e),e.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(r,"class","step-indicator svelte-1cgnh5f"),(0,u.Ljt)(s,"class","step-description svelte-1cgnh5f"),(0,u.Ljt)(n,"class","step svelte-1cgnh5f"),(0,u.VHj)(n,"active",e[4]<=e[1]),this.first=n},m(t,e){(0,u.ZMF)(t,n,e),(0,u.ztY)(n,r),(0,u.ztY)(r,o),(0,u.ztY)(n,i),(0,u.ztY)(n,s),(0,u.ztY)(s,c),(0,u.ztY)(n,l)},p(t,r){e=t,1&r&&a!==(a=e[4]+1+"")&&(0,u.rTO)(o,a),1&r&&f!==(f=e[2]+"")&&(0,u.rTO)(c,f),3&r&&(0,u.VHj)(n,"active",e[4]<=e[1])},d(t){t&&(0,u.ogt)(n)}}}function Jo(t){let e,n=[],r=new Map,o=[...t[0]];const i=t=>t[2];for(let e=0;e<o.length;e+=1){let s=Ho(t,o,e),c=i(s);r.set(c,n[e]=Qo(c,s))}return{c(){e=(0,u.bGB)("nav");for(let t=0;t<n.length;t+=1)n[t].c();this.h()},l(t){e=(0,u.vT0)(t,"NAV",{class:!0});var r=(0,u.pIy)(e);for(let t=0;t<n.length;t+=1)n[t].l(r);r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"class","stepper svelte-1cgnh5f")},m(t,r){(0,u.ZMF)(t,e,r);for(let t=0;t<n.length;t+=1)n[t].m(e,null)},p(t,[s]){3&s&&(o=[...t[0]],n=(0,u.GQg)(n,s,i,1,t,o,r,e,u.OCq,Qo,null,Ho))},i:u.ZTd,o:u.ZTd,d(t){t&&(0,u.ogt)(e);for(let t=0;t<n.length;t+=1)n[t].d()}}}function Ko(t,e,n){let{steps:r}=e,{currentIndex:o}=e;return t.$$set=t=>{"steps"in t&&n(0,r=t.steps),"currentIndex"in t&&n(1,o=t.currentIndex)},[r,o]}Yt()(Ro.Z,{insert:"head",singleton:!1}),Ro.Z.locals;class ti extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,Ko,Jo,u.AqN,{steps:0,currentIndex:1})}}var ei=ti,ni=n(3986);function ri(t){let e,n,r,o,i;return{c(){e=(0,u.bGB)("div"),n=(0,u.fLW)("Web Worker を起動しています..."),this.h()},l(t){e=(0,u.vT0)(t,"DIV",{id:!0,class:!0});var r=(0,u.pIy)(e);n=(0,u.Bno)(r,"Web Worker を起動しています..."),r.forEach(u.ogt),this.h()},h(){(0,u.Ljt)(e,"id","loading-worker"),(0,u.Ljt)(e,"class","svelte-uiuwfe")},m(t,r){(0,u.ZMF)(t,e,r),(0,u.ztY)(e,n),i=!0},i(t){i||((0,u.P$F)((()=>{o&&o.end(1),r=(0,u.HCz)(e,d.U1,{}),r.start()})),i=!0)},o(t){r&&r.invalidate(),o=(0,u.eZl)(e,d.U1,{}),i=!1},d(t){t&&(0,u.ogt)(e),t&&o&&o.end()}}}function oi(t){let e,n;return e=new pe({props:{id:"viewer-placeholder",title:"表示できる画像がありません",icon:g.xm}}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p:u.ZTd,i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function ii(t){let e,n;return e=new Zn({}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},p:u.ZTd,i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function si(t){let e,n;return e=new Kt({}),{c(){(0,u.YCL)(e.$$.fragment)},l(t){(0,u.wOw)(e.$$.fragment,t)},m(t,r){(0,u.yef)(e,t,r),n=!0},i(t){n||((0,u.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,u.etI)(e.$$.fragment,t),n=!1},d(t){(0,u.vpE)(e,t)}}}function ci(t){let e,n,r,o,i,s,c,l,a,f,$,p,d,g,m,v,y,w,I,x,L,b,E,Y,z,T,F,Z,U,B,D=t[0]&&ri();f=new ei({props:{steps:t[2].map(t[10]),currentIndex:t[3]}}),d=new rr({props:{openDialog:t[1]}}),y=new He({});const O=[ii,oi],j=[];function M(t,e){return t[4]?0:1}x=M(t),L=j[x]=O[x](t),Y=new ko({});let C=t[5]!==G.RUN_CV&&si();return U=new h.W({props:{properties:["G-N11KZ2H6B9"]}}),{c(){e=(0,u.bGB)("main"),D&&D.c(),n=(0,u.DhX)(),r=(0,u.bGB)("header"),o=(0,u.bGB)("h1"),i=(0,u.fLW)("Keyframe Refiner\n      "),s=(0,u.bGB)("span"),c=(0,u.fLW)("v"),l=(0,u.fLW)(t[6]),a=(0,u.DhX)(),(0,u.YCL)(f.$$.fragment),$=(0,u.DhX)(),p=(0,u.bGB)("div"),(0,u.YCL)(d.$$.fragment),g=(0,u.DhX)(),m=(0,u.bGB)("article"),v=(0,u.bGB)("aside"),(0,u.YCL)(y.$$.fragment),w=(0,u.DhX)(),I=(0,u.bGB)("section"),L.c(),b=(0,u.DhX)(),E=(0,u.bGB)("aside"),(0,u.YCL)(Y.$$.fragment),z=(0,u.DhX)(),C&&C.c(),T=(0,u.DhX)(),F=(0,u.bGB)("div"),Z=(0,u.DhX)(),(0,u.YCL)(U.$$.fragment),this.h()},l(h){e=(0,u.vT0)(h,"MAIN",{class:!0});var x=(0,u.pIy)(e);D&&D.l(x),n=(0,u.qzd)(x),r=(0,u.vT0)(x,"HEADER",{id:!0,class:!0});var B=(0,u.pIy)(r);o=(0,u.vT0)(B,"H1",{id:!0,class:!0});var O=(0,u.pIy)(o);i=(0,u.Bno)(O,"Keyframe Refiner\n      "),s=(0,u.vT0)(O,"SPAN",{id:!0,class:!0});var j=(0,u.pIy)(s);c=(0,u.Bno)(j,"v"),l=(0,u.Bno)(j,t[6]),j.forEach(u.ogt),O.forEach(u.ogt),a=(0,u.qzd)(B),(0,u.wOw)(f.$$.fragment,B),$=(0,u.qzd)(B),p=(0,u.vT0)(B,"DIV",{id:!0,class:!0});var M=(0,u.pIy)(p);(0,u.wOw)(d.$$.fragment,M),M.forEach(u.ogt),B.forEach(u.ogt),g=(0,u.qzd)(x),m=(0,u.vT0)(x,"ARTICLE",{id:!0,class:!0});var G=(0,u.pIy)(m);v=(0,u.vT0)(G,"ASIDE",{id:!0,class:!0});var S=(0,u.pIy)(v);(0,u.wOw)(y.$$.fragment,S),S.forEach(u.ogt),w=(0,u.qzd)(G),I=(0,u.vT0)(G,"SECTION",{id:!0,class:!0});var q=(0,u.pIy)(I);L.l(q),q.forEach(u.ogt),b=(0,u.qzd)(G),E=(0,u.vT0)(G,"ASIDE",{id:!0,class:!0});var V=(0,u.pIy)(E);(0,u.wOw)(Y.$$.fragment,V),V.forEach(u.ogt),G.forEach(u.ogt),z=(0,u.qzd)(x),C&&C.l(x),x.forEach(u.ogt),T=(0,u.qzd)(h),F=(0,u.vT0)(h,"DIV",{id:!0}),(0,u.pIy)(F).forEach(u.ogt),Z=(0,u.qzd)(h),(0,u.wOw)(U.$$.fragment,h),this.h()},h(){(0,u.Ljt)(s,"id","version"),(0,u.Ljt)(s,"class","svelte-uiuwfe"),(0,u.Ljt)(o,"id","logo"),(0,u.Ljt)(o,"class","svelte-uiuwfe"),(0,u.Ljt)(p,"id","controls"),(0,u.Ljt)(p,"class","svelte-uiuwfe"),(0,u.Ljt)(r,"id","header"),(0,u.Ljt)(r,"class","svelte-uiuwfe"),(0,u.Ljt)(v,"id","track"),(0,u.Ljt)(v,"class","svelte-uiuwfe"),(0,u.Ljt)(I,"id","image-viewer"),(0,u.Ljt)(I,"class","svelte-uiuwfe"),(0,u.Ljt)(E,"id","property"),(0,u.Ljt)(E,"class","svelte-uiuwfe"),(0,u.Ljt)(m,"id","gallery"),(0,u.Ljt)(m,"class","svelte-uiuwfe"),(0,u.Ljt)(e,"class","svelte-uiuwfe"),(0,u.Ljt)(F,"id","modal")},m(t,h){(0,u.ZMF)(t,e,h),D&&D.m(e,null),(0,u.ztY)(e,n),(0,u.ztY)(e,r),(0,u.ztY)(r,o),(0,u.ztY)(o,i),(0,u.ztY)(o,s),(0,u.ztY)(s,c),(0,u.ztY)(s,l),(0,u.ztY)(r,a),(0,u.yef)(f,r,null),(0,u.ztY)(r,$),(0,u.ztY)(r,p),(0,u.yef)(d,p,null),(0,u.ztY)(e,g),(0,u.ztY)(e,m),(0,u.ztY)(m,v),(0,u.yef)(y,v,null),(0,u.ztY)(m,w),(0,u.ztY)(m,I),j[x].m(I,null),(0,u.ztY)(m,b),(0,u.ztY)(m,E),(0,u.yef)(Y,E,null),(0,u.ztY)(e,z),C&&C.m(e,null),(0,u.ZMF)(t,T,h),(0,u.ZMF)(t,F,h),(0,u.ZMF)(t,Z,h),(0,u.yef)(U,t,h),B=!0},p(t,[r]){t[0]?D?1&r&&(0,u.Ui)(D,1):(D=ri(),D.c(),(0,u.Ui)(D,1),D.m(e,n)):D&&((0,u.dvw)(),(0,u.etI)(D,1,1,(()=>{D=null})),(0,u.gbL)());const o={};4&r&&(o.steps=t[2].map(t[10])),8&r&&(o.currentIndex=t[3]),f.$set(o);const i={};2&r&&(i.openDialog=t[1]),d.$set(i);let s=x;x=M(t),x===s?j[x].p(t,r):((0,u.dvw)(),(0,u.etI)(j[s],1,1,(()=>{j[s]=null})),(0,u.gbL)(),L=j[x],L?L.p(t,r):(L=j[x]=O[x](t),L.c()),(0,u.Ui)(L,1),L.m(I,null)),t[5]!==G.RUN_CV?C?32&r&&(0,u.Ui)(C,1):(C=si(),C.c(),(0,u.Ui)(C,1),C.m(e,null)):C&&((0,u.dvw)(),(0,u.etI)(C,1,1,(()=>{C=null})),(0,u.gbL)())},i(t){B||((0,u.Ui)(D),(0,u.Ui)(f.$$.fragment,t),(0,u.Ui)(d.$$.fragment,t),(0,u.Ui)(y.$$.fragment,t),(0,u.Ui)(L),(0,u.Ui)(Y.$$.fragment,t),(0,u.Ui)(C),(0,u.Ui)(U.$$.fragment,t),B=!0)},o(t){(0,u.etI)(D),(0,u.etI)(f.$$.fragment,t),(0,u.etI)(d.$$.fragment,t),(0,u.etI)(y.$$.fragment,t),(0,u.etI)(L),(0,u.etI)(Y.$$.fragment,t),(0,u.etI)(C),(0,u.etI)(U.$$.fragment,t),B=!1},d(t){t&&(0,u.ogt)(e),D&&D.d(),(0,u.vpE)(f),(0,u.vpE)(d),(0,u.vpE)(y),j[x].d(),(0,u.vpE)(Y),C&&C.d(),t&&(0,u.ogt)(T),t&&(0,u.ogt)(F),t&&(0,u.ogt)(Z),(0,u.vpE)(U,t)}}}function li(t,e,n){let r,o,i,s,c;(0,u.FIv)(t,yt,(t=>n(11,r=t))),(0,u.FIv)(t,at,(t=>n(4,s=t)));const{allSteps:l,currentIndex:a,currentStep:f}=vt;(0,u.FIv)(t,l,(t=>n(2,o=t))),(0,u.FIv)(t,a,(t=>n(3,i=t))),(0,u.FIv)(t,f,(t=>n(5,c=t)));let $=!0,p=!1;return r.ready.then((()=>{n(0,$=!1),n(1,p=!0)})).catch((t=>{alert((null==t?void 0:t.message)||t)})),[$,p,o,i,s,c,"1.0.0-beta.5",l,a,f,t=>P[t]]}Yt()(ni.Z,{insert:"head",singleton:!1}),ni.Z.locals;class ai extends u.f_C{constructor(t){super(),(0,u.S1n)(this,t,li,ci,u.AqN,{})}}var fi=ai;"serviceWorker"in navigator&&navigator.serviceWorker.register("./service-worker.js"),new fi({target:document.body})},3663:function(){}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={id:t,exports:{}};return e[t](i,i.exports,r),i.exports}r.m=e,t=[],r.O=function(e,n,o,i){if(!n){var s=1/0;for(f=0;f<t.length;f++){n=t[f][0],o=t[f][1],i=t[f][2];for(var c=!0,l=0;l<n.length;l++)(!1&i||s>=i)&&Object.keys(r.O).every((function(t){return r.O[t](n[l])}))?n.splice(l--,1):(c=!1,i<s&&(s=i));if(c){t.splice(f--,1);var a=o();void 0!==a&&(e=a)}}return e}i=i||0;for(var f=t.length;f>0&&t[f-1][2]>i;f--)t[f]=t[f-1];t[f]=[n,o,i]},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.e=function(){return Promise.resolve()},r.u=function(t){return"refiner.062cb4ed2f19dedbad14.js"},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.j=179,function(){var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t}(),function(){r.b=document.baseURI||self.location.href;var t={179:0};r.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,i,s=n[0],c=n[1],l=n[2],a=0;if(s.some((function(e){return 0!==t[e]}))){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(l)var f=l(r)}for(e&&e(n);a<s.length;a++)i=s[a],r.o(t,i)&&t[i]&&t[i][0](),t[s[a]]=0;return r.O(f)},n=self.webpackChunkkeyframe_refiner=self.webpackChunkkeyframe_refiner||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var o=r.O(void 0,[216],(function(){return r(7694)}));o=r.O(o)}();